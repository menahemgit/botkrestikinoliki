!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ccc87935-217f-4367-9fcf-9d82d86cce9b",e._sentryDebugIdIdentifier="sentry-dbid-ccc87935-217f-4367-9fcf-9d82d86cce9b")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6763],{51577:function(e,t,n){n.d(t,{jy:function(){return c},nO:function(){return d}});var r=n(53854),i=n(20981),o=n(24958),l=n(52133),s=n(77232),u=n(32608);let a=i.createContext(null),c=i.memo(e=>{let{children:t,withCredentials:n,isMweb:c=!1}=e,[d,f]=(0,i.useState)(null),v=(0,i.useRef)(!1),{setSocketStatus:h}=(0,l.v)();return(0,i.useEffect)(()=>{let e=window.location.hostname.includes("localhost"),t=window.location.hostname.includes("vercel-dev-frontend"),r=u.env.NEXT_PUBLIC_USE_TOKEN_AUTH_FOR_SOCKET,i=e?o.ID:void 0;u.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE&&(i=u.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE),i||console.warn("No socket URL provided");let l=(null==i?void 0:i.startsWith("https://staging.i.perplexity.ai"))||(null==i?void 0:i.startsWith("https://testing.i.perplexity.ai")),a=!!u.env.NEXT_PUBLIC_FORCE_CREDENTIALS,d=n||a,v=null;if(e||t||r){let e={...o.Jc,auth:e=>{(0,o.x1)().then(t=>{null===t?e({}):e({perplexity_jwt:t})})}};d&&(e.withCredentials=!0),l&&(e.transports=["websocket"]),f(v=(0,s.ZP)(i,e)),(0,o.Dp)(v,c)}else{let e={...o.Jc};d&&(e.withCredentials=!0),l&&(e.transports=["websocket"]),f(v=(0,s.ZP)(i,e)),(0,o.Dp)(v,c)}return()=>{null==v||v.disconnect()}},[c,n]),(0,i.useEffect)(()=>{if(d)return d.on("connect",()=>{v.current?h("reconnected"):(h("connected"),v.current=!0)}),d.on("disconnect",()=>{h("disconnected"),v.current=!0}),()=>{d.off("connect"),d.off("disconnect")}},[d,h]),(0,r.jsx)(a.Provider,{value:d,children:t})}),d=()=>(0,i.useContext)(a)},65429:function(e,t,n){var r=n(53854);n(20981);var i=n(92508);t.Z=e=>{let{text:t}=e;return(0,r.jsx)(i.Z,{variant:"tiny",children:(0,r.jsx)("span",{className:"text-superAlt",children:t})})}},23228:function(e,t,n){n.d(t,{o:function(){return u}});var r=n(53854),i=n(37462),o=n.n(i);n(20981);var l=n(92508),s=n(65429);let u=e=>{let{label:t,errorText:n,isOptional:i=!1,withMargin:u=!0,optionalLabel:a="optional",testId:c}=e;return t||n?(0,r.jsxs)("div",{className:o()("flex items-center justify-between",{"mb-sm":u}),"data-test-id":c,children:[t&&(0,r.jsx)("label",{htmlFor:t,children:(0,r.jsxs)("div",{className:"gap-x-xs flex",children:[(0,r.jsx)(l.Z,{variant:"smallBold",className:"select-none",children:t}),i&&(0,r.jsx)(l.Z,{variant:"small",color:"light",children:"(".concat(a,")")})]})}),n&&(0,r.jsx)(s.Z,{text:n})]}):null}},25245:function(e,t,n){n.d(t,{Cf:function(){return w},UV:function(){return g},ZS:function(){return k}});var r=n(53854),i=n(34730),o=n(30854),l=n(94961),s=n(64980),u=n(37462),a=n.n(u),c=n(20981),d=n(22571),f=n(92508),v=n(2355),h=n(9618),b=n(69646),m=n(88121),x=n(67144),p=n(23228);let g=(e,t)=>{var n;if(x.t.isEnterKeyWithoutShift(e)){if(t.isComposing||229===e.keyCode){e.preventDefault();return}if(t.isMobileUserAgent)return;e.preventDefault()}null===(n=t.onKeyDown)||void 0===n||n.call(t,e)},k=e=>{e(!0)},w=e=>{setTimeout(()=>{e(!1)},0)},y=c.forwardRef((e,t)=>{let{type:n,errorText:u,className:x,wrapperClassName:y,value:E,name:C,maxLength:j,errorMessage:D,disabled:S=!1,required:M=!1,autoFocus:N=!1,placeholder:_="",rightItems:T=[],onChange:O,onClear:P,onBlur:R,onFocus:U,onKeyDown:Z,isLoading:I,inlineEditBlock:L,label:A,isOptional:K,isMobileUserAgent:F,labelMargin:B=!0,testId:W}=e,z=(0,b.D)(S),G=(0,c.useRef)(null),[q,X]=(0,c.useState)(!1),[H,V]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!F&&N){var e;null===(e=G.current)||void 0===e||e.focus()}},[F,G,N]),(0,c.useEffect)(()=>{z===S||S||F||!N||setTimeout(()=>{var e;null===(e=G.current)||void 0===e||e.focus()},200)});let J=(0,c.useMemo)(()=>a()({"border-r mr-sm pr-xs border-borderMain dark:border-borderMainDark":0!=T.length}),[T.length]),$=(0,c.useMemo)(()=>{let e=a()("w-full outline-none focus:outline-none focus:ring-borderMain font-sans flex items-center","dark:bg-offsetDark dark:text-textMainDark dark:placeholder-textOffDark dark:border-borderMainDark dark:focus:ring-borderMainDark","selection:bg-superDuper selection:text-textMain","duration-200 transition-all",x,{"ring-borderMain ring-1 dark:ring-borderMainDark":q,"bg-background border text-textMain border-borderMain focus:ring-1 placeholder-textOff":!0,"rounded-t-[32px] rounded-b-[32px]":!0}),t=a()({"py-sm md:text-sm px-md":!0,"pl-[40px]":"search"===n}),r=a()({"pr-md":0===T.length,"pr-[49px] md:pr-[59px]":1===T.length,"pr-[128px] md:pr-[138px]":2===T.length});return a()(e,t,r)},[n,x,T.length,q]),Q=void 0!==D,Y=!Q&&!!j&&!!E&&E.length>j,ee=(0,c.useMemo)(()=>"search"===n?(0,r.jsx)("div",{className:"bg-background dark:bg-offsetDark left-md absolute flex items-center rounded-l-lg",children:(0,r.jsx)(f.Z,{color:"light",children:(0,r.jsx)(s.G,{icon:o.wn})})}):null,[n]),et=(0,c.useMemo)(()=>(0,r.jsxs)("div",{className:a()("gap-sm bg-background dark:bg-offsetDark right-sm absolute flex items-center rounded-full"),children:[I?(0,r.jsx)(f.Z,{color:"light",children:(0,r.jsx)(s.G,{className:"aspect-square animate-spin",fixedWidth:!0,icon:i.Dh})}):null,Q&&(0,r.jsx)(d.ZP,{className:"mr-sm",children:(0,r.jsx)(f.Z,{color:"red",variant:"tiny",children:D})}),Y&&(0,r.jsx)(d.ZP,{className:"mr-sm",children:j&&E&&(0,r.jsx)(f.Z,{color:"red",variant:"tiny",children:j-E.length})}),void(h.Z,l.FG,m.$u.small)!==P,T.map((e,t)=>(0,r.jsx)(v.Z,{...e.buttonProps,size:e.buttonProps.size,disabled:e.buttonProps.disabled||Q||Y,pill:!0},t))]}),[I,Q,D,Y,j,E,P,J,T]),en=(0,c.useCallback)(()=>{if(G.current){let e=G.current.value.length;G.current.focus();try{G.current.setSelectionRange(e,e)}catch(e){}}},[]),er=(0,c.useCallback)(e=>{null==U||U(e),X(!0)},[U]),ei=(0,c.useCallback)(e=>{null==R||R(e),X(!1)},[R]);return(0,c.useImperativeHandle)(t,()=>({focus:()=>{G.current&&G.current.focus()},focusAtEnd:en,blur:()=>{G.current&&G.current.blur()},isFocused:()=>q,get value(){var e,t;return null!==(t=null===(e=G.current)||void 0===e?void 0:e.value)&&void 0!==t?t:""},get selectionStart(){var n,r;return null!==(r=null===(n=G.current)||void 0===n?void 0:n.selectionStart)&&void 0!==r?r:null},get selectionEnd(){var i,o;return null!==(o=null===(i=G.current)||void 0===i?void 0:i.selectionEnd)&&void 0!==o?o:null}})),(0,c.useEffect)(()=>{N&&!F&&en()},[N,en,F]),(0,r.jsxs)("div",{className:y,children:[(0,r.jsx)(p.o,{label:A,isOptional:K,errorText:u,withMargin:B}),(0,r.jsx)("div",{className:"rounded-full",children:(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)("input",{type:n,ref:G,autoFocus:N,placeholder:_,disabled:S,value:E,required:M,name:null!=C?C:A,onChange:O,onKeyDown:e=>g(e,{isMobileUserAgent:F,isComposing:H,onKeyDown:Z}),onCompositionStart:()=>k(V),onCompositionEnd:()=>w(V),onBlur:ei,onFocus:er,className:$,autoComplete:"off","data-test-id":W}),ee,et]})}),L&&(0,r.jsx)("div",{className:"mt-sm flex justify-end",children:L})]})});t.ZP=c.memo(y)},25620:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(53854),i=n(87761),o=n(37462),l=n.n(o),s=n(92225),u=n(20981),a=n(92508);let c=(0,u.memo)((0,u.forwardRef)((e,t)=>{let{active:n=!1,disabled:o,id:u,text:c,testId:d,onChange:f,...v}=e,h=l()("rounded-full relative size-4 shadow-sm","before:content-[''] before:duration-150 before:shadow-sm before:absolute before:inset-0 before:rounded-full before:bg-textOff before:dark:bg-textOffDark","data-[state=checked]:before:!bg-super",{"md:group-hover/switch:before:scale-90":!o},{"before:opacity-20":o}),b=l()("w-10 flex p-three bg-transparent rounded-full border border-borderMain duration-150","data-[state=checked]:justify-end",{"border-borderMain/50":o});return(0,r.jsxs)("div",{className:l()("gap-sm group/switch flex cursor-default items-center",{"cursor-pointer":!o}),"data-testid":d,ref:t,...v,children:[(0,r.jsx)(i.fC,{asChild:!0,checked:n,onCheckedChange:o?void 0:f,id:u,disabled:o,className:"gap-sm group/switch flex items-center","data-testid":d,style:{WebkitTapHighlightColor:"transparent"},children:(0,r.jsx)(s.E.button,{className:b,layout:!0,layoutRoot:!0,children:(0,r.jsx)(i.bU,{asChild:!0,children:(0,r.jsx)(s.E.div,{className:h,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),c&&(0,r.jsx)(a.Z,{variant:"smallBold",className:l()("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!o},{"group-hover/switch:text-textMain dark:group-hover/switch:text-textMainDark":!n&&!o}),htmlFor:u,as:"label",color:n?"super":"light",children:c})]})}));c.displayName="Switch"},97455:function(e,t,n){n.d(t,{f:function(){return i}});var r=n(20981);let i=()=>{let[e,t]=r.useState(!1);return r.useEffect(()=>{t(!0)},[]),e}},4009:function(e,t,n){n.d(t,{d:function(){return u}});var r=n(23418),i=n.n(r),o=n(20981),l=n(34785);function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{isMobile:t}=(0,l.useDevice)();return null!=t?t:e}function u(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isMobileStyle:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=s(t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{isAndroid:t}=(0,l.useDevice)();return null!=t?t:e}(t),[u,a]=(0,o.useState)(null!==(e=n||r)&&void 0!==e?e:t);return(0,o.useEffect)(()=>{let e=i()(()=>{let e=window.innerWidth<768;a(n||e)},500);return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n]),u}(e),isMobileUserAgent:s(e)}}},69646:function(e,t,n){n.d(t,{D:function(){return i}});var r=n(20981);function i(e){let t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}},34785:function(e,t,n){n.r(t),n.d(t,{DeviceProvider:function(){return s},useDevice:function(){return u}});var r=n(53854),i=n(20981),o=n(98123);let l=i.createContext({isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,userAgent:""}),s=e=>{let{children:t,userAgent:n}=e,[s]=i.useState({isChrome:(0,o.i7)(n),isMobile:(0,o.tq)(n),isAndroid:(0,o.Dt)(n),isIOS:(0,o.gn)(n),isMacOS:(0,o.eE)(n),isMobileSafari:(0,o.TL)(n),isFirefox:(0,o.vU)(n),userAgent:n});return(0,r.jsx)(l.Provider,{value:s,children:t})},u=()=>{let e=i.useContext(l);if(!e)throw Error("useDevice must be used within DeviceContext");return e}},52133:function(e,t,n){n.d(t,{U:function(){return l},v:function(){return s}});var r=n(53854),i=n(20981);let o=i.createContext({socketStatus:"connected",failedToConnect:!1,setSocketStatus:()=>{}}),l=e=>{let{children:t}=e,[n,l]=i.useState("connected"),[s,u]=(0,i.useState)(!1),a=(0,i.useRef)(n);return(0,i.useEffect)(()=>{if("connected"===n||"reconnected"===n)u(!1);else if("disconnected"===n){a.current=n;let e=setTimeout(()=>{"connected"!==a.current&&u(!0)},3e3);return()=>{clearTimeout(e)}}},[n]),(0,r.jsx)(o.Provider,{value:{socketStatus:n,setSocketStatus:l,failedToConnect:s},children:t})},s=()=>{let e=i.useContext(o);if(!e)throw Error("useSocketStatus must be used within SocketStatusContext");return e}},67144:function(e,t,n){n.d(t,{t:function(){return r}}),n(20981);class r{static isEnterKey(e){return"Enter"===e.code||"Enter"===e.key||13===e.keyCode}static isEnterKeyWithoutShift(e){return this.isEnterKey(e)&&!e.shiftKey}static isArrowDown(e){return"ArrowDown"===e.key}static isArrowUp(e){return"ArrowUp"===e.key}static isEscapeKey(e){return"Escape"===e.key}static isTabKey(e){return"Tab"===e.key}}},98123:function(e,t,n){n.d(t,{Dt:function(){return o},TL:function(){return u},eE:function(){return s},gn:function(){return l},i7:function(){return r},tq:function(){return i},vU:function(){return a}});let r=e=>{var t;return null!==(t=null==e?void 0:e.includes("Chrome"))&&void 0!==t&&t},i=e=>{var t;return null!==(t=(null==e?void 0:e.includes("Mobile"))&&!(null==e?void 0:e.includes("iPad")))&&void 0!==t&&t},o=e=>{var t;return null!==(t=null==e?void 0:e.includes("Android"))&&void 0!==t&&t},l=e=>{var t;return null!==(t=(null==e?void 0:e.includes("iPhone"))||(null==e?void 0:e.includes("iPad")))&&void 0!==t&&t},s=e=>{var t;return null!==(t=(null==e?void 0:e.includes("Macintosh"))||(null==e?void 0:e.includes("iPad")))&&void 0!==t&&t},u=e=>{var t;return null!==(t=null==e?void 0:e.includes("Mobile Safari"))&&void 0!==t&&t},a=e=>{var t;return null!==(t=null==e?void 0:e.includes("Firefox"))&&void 0!==t&&t}}}]);