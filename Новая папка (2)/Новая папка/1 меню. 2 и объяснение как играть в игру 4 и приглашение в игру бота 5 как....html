<!DOCTYPE html>
<!-- saved from url=(0086)https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ -->
<html lang="en" data-color-scheme="dark"><script src="chrome-extension://dlpiaeofjhnjeckpjcbhmnifdejoikpa/js/ajax-listener-other.js"></script><script src="blob:https://www.perplexity.ai/61500479-ac28-41fe-be03-1c70a7761d70"></script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style type="text/css">:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}</style><link rel="preload" href="https://pplx-next-static-public.perplexity.ai/_next/static/media/3c0a20a48548ae37-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://pplx-next-static-public.perplexity.ai/_next/static/media/80d90e1e722a80dc-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://pplx-next-static-public.perplexity.ai/_next/static/media/b06d54d0a237533a-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="stylesheet" href="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/4c976595efe68bc1.css" data-precedence="next"><link rel="stylesheet" href="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/ca3f283922472465.css" data-precedence="next"><link rel="stylesheet" href="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/ff88f718b078cf59.css" data-precedence="next"><link rel="preload" as="script" fetchpriority="low" href="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/webpack-7ac8193a35af3645.js.Без названия"><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/44c5eb2d-8f2a535c8f141f14.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/18bd7a48-74b4576fc53cd9f0.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/6521-ecabbb9848e2d0a8.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/main-app-b9b07be8ec3223db.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/9ffa21ba-61e6e43bf78462cb.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/7544-fd0e9f9ca634d885.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/5128-1f62c4de3c11599e.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/637-626e1bb395a0d3af.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/1096-837f99dc338154f4.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/6026-9e878f5970b75206.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/359-c1e0018367b44ef9.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/9657-5174e30d6b5ce00e.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/3407-91132a729c892a15.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/9383-dce5ca5ff1115de8.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/6735-3addadc777cacd07.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/2616-c75ba3400ef46af1.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/3927-4f72029dde858cb0.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/5138-d531d432a4072eff.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/3895-36ded8bfe18be7e4.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/3005-5a19d40504c45b9e.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/6763-ceebaf33ea540b1f.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/42-3ffda6b8b9e53e67.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/8510-4f0b055f1addeb03.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/9156-cb1b068f937266cd.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/9098-4b3c861a58e52faa.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/815-e93062421d1da81f.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/page-13bdd05bb9b9eed4.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/1137-8a4db939057d8a85.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/global-error-11a8c5eb09c12084.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/layout-74a8c3f8ae01faa7.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/1273-e20dc5fafada3b99.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/1506-4062c3084cc3a78f.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/layout-0b13fe2938fadc78.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/layout-fb0ea51a3f6fff3c.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/client" data-client_id="60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com" data-use_fedcm_for_prompt="true" async="" defer=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/loading-389ab4b4d909584a.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/layout-a5e3c06dc2d99a24.js.Без названия" async=""></script><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/not-found-192486e5ae0c09f3.js.Без названия" async=""></script><title>1 меню.  
2 и объяснение как играть в игру 
4 и приглашение в игру бота 
5 как...</title><meta name="description" content="Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту...."><meta name="datePublished" content="2024-08-14"><link rel="canonical" href="https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ"><meta property="og:title" content="1 меню.  
2 и объяснение как играть в игру 
4 и приглашение в игру бота 
5 как..."><meta property="og:description" content="Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту...."><meta property="og:url" content="https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ"><meta property="og:site_name" content="Perplexity AI"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@perplexity_ai"><meta name="twitter:title" content="1 меню.  
2 и объяснение как играть в игру 
4 и приглашение в игру бота 
5 как..."><meta name="twitter:description" content="Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту...."><meta name="twitter:image" content="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png"><meta name="next-size-adjust"><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/polyfills-c67a75d1b6f99dc8.js.Без названия" nomodule=""></script><style>@font-face {
              font-family: 'Open Sans Regular';
              font-style: normal;
              font-weight: 400;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-regular.woff');
          }</style><style>@font-face {
              font-family: 'Open Sans Bold';
              font-style: normal;
              font-weight: 800;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/OpenSans-Bold.woff');
          }</style><style>@font-face {
              font-family: 'Open Sans ExtraBold';
              font-style: normal;
              font-weight: 800;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-800.woff');
          }</style><style type="text/css">.el-radio-group{display:inline-block;line-height:1;vertical-align:middle;font-size:0}</style><style type="text/css">.fade-in-linear-enter-active,.fade-in-linear-leave-active{transition:opacity .2s linear}.fade-in-linear-enter,.fade-in-linear-leave,.fade-in-linear-leave-active{opacity:0}.el-fade-in-linear-enter-active,.el-fade-in-linear-leave-active{transition:opacity .2s linear}.el-fade-in-linear-enter,.el-fade-in-linear-leave,.el-fade-in-linear-leave-active{opacity:0}.el-fade-in-enter-active,.el-fade-in-leave-active{transition:all .3s cubic-bezier(.55,0,.1,1)}.el-fade-in-enter,.el-fade-in-leave-active{opacity:0}.el-zoom-in-center-enter-active,.el-zoom-in-center-leave-active{transition:all .3s cubic-bezier(.55,0,.1,1)}.el-zoom-in-center-enter,.el-zoom-in-center-leave-active{opacity:0;transform:scaleX(0)}.el-zoom-in-top-enter-active,.el-zoom-in-top-leave-active{opacity:1;transform:scaleY(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:center top}.el-zoom-in-top-enter,.el-zoom-in-top-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-bottom-enter-active,.el-zoom-in-bottom-leave-active{opacity:1;transform:scaleY(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:center bottom}.el-zoom-in-bottom-enter,.el-zoom-in-bottom-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-left-enter-active,.el-zoom-in-left-leave-active{opacity:1;transform:scale(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:top left}.el-zoom-in-left-enter,.el-zoom-in-left-leave-active{opacity:0;transform:scale(.45)}.collapse-transition{transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out}.horizontal-collapse-transition{transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out}.el-list-enter-active,.el-list-leave-active{transition:all 1s}.el-list-enter,.el-list-leave-active{opacity:0;transform:translateY(-30px)}.el-opacity-transition{transition:opacity .3s cubic-bezier(.55,0,.1,1)}@font-face{font-family:element-icons;src:url(/fonts/element-icons.535877f5.woff) format("woff"),url(/fonts/element-icons.732389de.ttf) format("truetype");font-weight:400;font-display:"auto";font-style:normal}[class*=" el-icon-"],[class^=el-icon-]{font-family:element-icons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;vertical-align:baseline;display:inline-block;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.el-icon-ice-cream-round:before{content:"\e6a0"}.el-icon-ice-cream-square:before{content:"\e6a3"}.el-icon-lollipop:before{content:"\e6a4"}.el-icon-potato-strips:before{content:"\e6a5"}.el-icon-milk-tea:before{content:"\e6a6"}.el-icon-ice-drink:before{content:"\e6a7"}.el-icon-ice-tea:before{content:"\e6a9"}.el-icon-coffee:before{content:"\e6aa"}.el-icon-orange:before{content:"\e6ab"}.el-icon-pear:before{content:"\e6ac"}.el-icon-apple:before{content:"\e6ad"}.el-icon-cherry:before{content:"\e6ae"}.el-icon-watermelon:before{content:"\e6af"}.el-icon-grape:before{content:"\e6b0"}.el-icon-refrigerator:before{content:"\e6b1"}.el-icon-goblet-square-full:before{content:"\e6b2"}.el-icon-goblet-square:before{content:"\e6b3"}.el-icon-goblet-full:before{content:"\e6b4"}.el-icon-goblet:before{content:"\e6b5"}.el-icon-cold-drink:before{content:"\e6b6"}.el-icon-coffee-cup:before{content:"\e6b8"}.el-icon-water-cup:before{content:"\e6b9"}.el-icon-hot-water:before{content:"\e6ba"}.el-icon-ice-cream:before{content:"\e6bb"}.el-icon-dessert:before{content:"\e6bc"}.el-icon-sugar:before{content:"\e6bd"}.el-icon-tableware:before{content:"\e6be"}.el-icon-burger:before{content:"\e6bf"}.el-icon-knife-fork:before{content:"\e6c1"}.el-icon-fork-spoon:before{content:"\e6c2"}.el-icon-chicken:before{content:"\e6c3"}.el-icon-food:before{content:"\e6c4"}.el-icon-dish-1:before{content:"\e6c5"}.el-icon-dish:before{content:"\e6c6"}.el-icon-moon-night:before{content:"\e6ee"}.el-icon-moon:before{content:"\e6f0"}.el-icon-cloudy-and-sunny:before{content:"\e6f1"}.el-icon-partly-cloudy:before{content:"\e6f2"}.el-icon-cloudy:before{content:"\e6f3"}.el-icon-sunny:before{content:"\e6f6"}.el-icon-sunset:before{content:"\e6f7"}.el-icon-sunrise-1:before{content:"\e6f8"}.el-icon-sunrise:before{content:"\e6f9"}.el-icon-heavy-rain:before{content:"\e6fa"}.el-icon-lightning:before{content:"\e6fb"}.el-icon-light-rain:before{content:"\e6fc"}.el-icon-wind-power:before{content:"\e6fd"}.el-icon-baseball:before{content:"\e712"}.el-icon-soccer:before{content:"\e713"}.el-icon-football:before{content:"\e715"}.el-icon-basketball:before{content:"\e716"}.el-icon-ship:before{content:"\e73f"}.el-icon-truck:before{content:"\e740"}.el-icon-bicycle:before{content:"\e741"}.el-icon-mobile-phone:before{content:"\e6d3"}.el-icon-service:before{content:"\e6d4"}.el-icon-key:before{content:"\e6e2"}.el-icon-unlock:before{content:"\e6e4"}.el-icon-lock:before{content:"\e6e5"}.el-icon-watch:before{content:"\e6fe"}.el-icon-watch-1:before{content:"\e6ff"}.el-icon-timer:before{content:"\e702"}.el-icon-alarm-clock:before{content:"\e703"}.el-icon-map-location:before{content:"\e704"}.el-icon-delete-location:before{content:"\e705"}.el-icon-add-location:before{content:"\e706"}.el-icon-location-information:before{content:"\e707"}.el-icon-location-outline:before{content:"\e708"}.el-icon-location:before{content:"\e79e"}.el-icon-place:before{content:"\e709"}.el-icon-discover:before{content:"\e70a"}.el-icon-first-aid-kit:before{content:"\e70b"}.el-icon-trophy-1:before{content:"\e70c"}.el-icon-trophy:before{content:"\e70d"}.el-icon-medal:before{content:"\e70e"}.el-icon-medal-1:before{content:"\e70f"}.el-icon-stopwatch:before{content:"\e710"}.el-icon-mic:before{content:"\e711"}.el-icon-copy-document:before{content:"\e718"}.el-icon-full-screen:before{content:"\e719"}.el-icon-switch-button:before{content:"\e71b"}.el-icon-aim:before{content:"\e71c"}.el-icon-crop:before{content:"\e71d"}.el-icon-odometer:before{content:"\e71e"}.el-icon-time:before{content:"\e71f"}.el-icon-bangzhu:before{content:"\e724"}.el-icon-close-notification:before{content:"\e726"}.el-icon-microphone:before{content:"\e727"}.el-icon-turn-off-microphone:before{content:"\e728"}.el-icon-position:before{content:"\e729"}.el-icon-postcard:before{content:"\e72a"}.el-icon-message:before{content:"\e72b"}.el-icon-chat-line-square:before{content:"\e72d"}.el-icon-chat-dot-square:before{content:"\e72e"}.el-icon-chat-dot-round:before{content:"\e72f"}.el-icon-chat-square:before{content:"\e730"}.el-icon-chat-line-round:before{content:"\e731"}.el-icon-chat-round:before{content:"\e732"}.el-icon-set-up:before{content:"\e733"}.el-icon-turn-off:before{content:"\e734"}.el-icon-open:before{content:"\e735"}.el-icon-connection:before{content:"\e736"}.el-icon-link:before{content:"\e737"}.el-icon-cpu:before{content:"\e738"}.el-icon-thumb:before{content:"\e739"}.el-icon-female:before{content:"\e73a"}.el-icon-male:before{content:"\e73b"}.el-icon-guide:before{content:"\e73c"}.el-icon-news:before{content:"\e73e"}.el-icon-price-tag:before{content:"\e744"}.el-icon-discount:before{content:"\e745"}.el-icon-wallet:before{content:"\e747"}.el-icon-coin:before{content:"\e748"}.el-icon-money:before{content:"\e749"}.el-icon-bank-card:before{content:"\e74a"}.el-icon-box:before{content:"\e74b"}.el-icon-present:before{content:"\e74c"}.el-icon-sell:before{content:"\e6d5"}.el-icon-sold-out:before{content:"\e6d6"}.el-icon-shopping-bag-2:before{content:"\e74d"}.el-icon-shopping-bag-1:before{content:"\e74e"}.el-icon-shopping-cart-2:before{content:"\e74f"}.el-icon-shopping-cart-1:before{content:"\e750"}.el-icon-shopping-cart-full:before{content:"\e751"}.el-icon-smoking:before{content:"\e752"}.el-icon-no-smoking:before{content:"\e753"}.el-icon-house:before{content:"\e754"}.el-icon-table-lamp:before{content:"\e755"}.el-icon-school:before{content:"\e756"}.el-icon-office-building:before{content:"\e757"}.el-icon-toilet-paper:before{content:"\e758"}.el-icon-notebook-2:before{content:"\e759"}.el-icon-notebook-1:before{content:"\e75a"}.el-icon-files:before{content:"\e75b"}.el-icon-collection:before{content:"\e75c"}.el-icon-receiving:before{content:"\e75d"}.el-icon-suitcase-1:before{content:"\e760"}.el-icon-suitcase:before{content:"\e761"}.el-icon-film:before{content:"\e763"}.el-icon-collection-tag:before{content:"\e765"}.el-icon-data-analysis:before{content:"\e766"}.el-icon-pie-chart:before{content:"\e767"}.el-icon-data-board:before{content:"\e768"}.el-icon-data-line:before{content:"\e76d"}.el-icon-reading:before{content:"\e769"}.el-icon-magic-stick:before{content:"\e76a"}.el-icon-coordinate:before{content:"\e76b"}.el-icon-mouse:before{content:"\e76c"}.el-icon-brush:before{content:"\e76e"}.el-icon-headset:before{content:"\e76f"}.el-icon-umbrella:before{content:"\e770"}.el-icon-scissors:before{content:"\e771"}.el-icon-mobile:before{content:"\e773"}.el-icon-attract:before{content:"\e774"}.el-icon-monitor:before{content:"\e775"}.el-icon-search:before{content:"\e778"}.el-icon-takeaway-box:before{content:"\e77a"}.el-icon-paperclip:before{content:"\e77d"}.el-icon-printer:before{content:"\e77e"}.el-icon-document-add:before{content:"\e782"}.el-icon-document:before{content:"\e785"}.el-icon-document-checked:before{content:"\e786"}.el-icon-document-copy:before{content:"\e787"}.el-icon-document-delete:before{content:"\e788"}.el-icon-document-remove:before{content:"\e789"}.el-icon-tickets:before{content:"\e78b"}.el-icon-folder-checked:before{content:"\e77f"}.el-icon-folder-delete:before{content:"\e780"}.el-icon-folder-remove:before{content:"\e781"}.el-icon-folder-add:before{content:"\e783"}.el-icon-folder-opened:before{content:"\e784"}.el-icon-folder:before{content:"\e78a"}.el-icon-edit-outline:before{content:"\e764"}.el-icon-edit:before{content:"\e78c"}.el-icon-date:before{content:"\e78e"}.el-icon-c-scale-to-original:before{content:"\e7c6"}.el-icon-view:before{content:"\e6ce"}.el-icon-loading:before{content:"\e6cf"}.el-icon-rank:before{content:"\e6d1"}.el-icon-sort-down:before{content:"\e7c4"}.el-icon-sort-up:before{content:"\e7c5"}.el-icon-sort:before{content:"\e6d2"}.el-icon-finished:before{content:"\e6cd"}.el-icon-refresh-left:before{content:"\e6c7"}.el-icon-refresh-right:before{content:"\e6c8"}.el-icon-refresh:before{content:"\e6d0"}.el-icon-video-play:before{content:"\e7c0"}.el-icon-video-pause:before{content:"\e7c1"}.el-icon-d-arrow-right:before{content:"\e6dc"}.el-icon-d-arrow-left:before{content:"\e6dd"}.el-icon-arrow-up:before{content:"\e6e1"}.el-icon-arrow-down:before{content:"\e6df"}.el-icon-arrow-right:before{content:"\e6e0"}.el-icon-arrow-left:before{content:"\e6de"}.el-icon-top-right:before{content:"\e6e7"}.el-icon-top-left:before{content:"\e6e8"}.el-icon-top:before{content:"\e6e6"}.el-icon-bottom:before{content:"\e6eb"}.el-icon-right:before{content:"\e6e9"}.el-icon-back:before{content:"\e6ea"}.el-icon-bottom-right:before{content:"\e6ec"}.el-icon-bottom-left:before{content:"\e6ed"}.el-icon-caret-top:before{content:"\e78f"}.el-icon-caret-bottom:before{content:"\e790"}.el-icon-caret-right:before{content:"\e791"}.el-icon-caret-left:before{content:"\e792"}.el-icon-d-caret:before{content:"\e79a"}.el-icon-share:before{content:"\e793"}.el-icon-menu:before{content:"\e798"}.el-icon-s-grid:before{content:"\e7a6"}.el-icon-s-check:before{content:"\e7a7"}.el-icon-s-data:before{content:"\e7a8"}.el-icon-s-opportunity:before{content:"\e7aa"}.el-icon-s-custom:before{content:"\e7ab"}.el-icon-s-claim:before{content:"\e7ad"}.el-icon-s-finance:before{content:"\e7ae"}.el-icon-s-comment:before{content:"\e7af"}.el-icon-s-flag:before{content:"\e7b0"}.el-icon-s-marketing:before{content:"\e7b1"}.el-icon-s-shop:before{content:"\e7b4"}.el-icon-s-open:before{content:"\e7b5"}.el-icon-s-management:before{content:"\e7b6"}.el-icon-s-ticket:before{content:"\e7b7"}.el-icon-s-release:before{content:"\e7b8"}.el-icon-s-home:before{content:"\e7b9"}.el-icon-s-promotion:before{content:"\e7ba"}.el-icon-s-operation:before{content:"\e7bb"}.el-icon-s-unfold:before{content:"\e7bc"}.el-icon-s-fold:before{content:"\e7a9"}.el-icon-s-platform:before{content:"\e7bd"}.el-icon-s-order:before{content:"\e7be"}.el-icon-s-cooperation:before{content:"\e7bf"}.el-icon-bell:before{content:"\e725"}.el-icon-message-solid:before{content:"\e799"}.el-icon-video-camera:before{content:"\e772"}.el-icon-video-camera-solid:before{content:"\e796"}.el-icon-camera:before{content:"\e779"}.el-icon-camera-solid:before{content:"\e79b"}.el-icon-download:before{content:"\e77c"}.el-icon-upload2:before{content:"\e77b"}.el-icon-upload:before{content:"\e7c3"}.el-icon-picture-outline-round:before{content:"\e75f"}.el-icon-picture-outline:before{content:"\e75e"}.el-icon-picture:before{content:"\e79f"}.el-icon-close:before{content:"\e6db"}.el-icon-check:before{content:"\e6da"}.el-icon-plus:before{content:"\e6d9"}.el-icon-minus:before{content:"\e6d8"}.el-icon-help:before{content:"\e73d"}.el-icon-s-help:before{content:"\e7b3"}.el-icon-circle-close:before{content:"\e78d"}.el-icon-circle-check:before{content:"\e720"}.el-icon-circle-plus-outline:before{content:"\e723"}.el-icon-remove-outline:before{content:"\e722"}.el-icon-zoom-out:before{content:"\e776"}.el-icon-zoom-in:before{content:"\e777"}.el-icon-error:before{content:"\e79d"}.el-icon-success:before{content:"\e79c"}.el-icon-circle-plus:before{content:"\e7a0"}.el-icon-remove:before{content:"\e7a2"}.el-icon-info:before{content:"\e7a1"}.el-icon-question:before{content:"\e7a4"}.el-icon-warning-outline:before{content:"\e6c9"}.el-icon-warning:before{content:"\e7a3"}.el-icon-goods:before{content:"\e7c2"}.el-icon-s-goods:before{content:"\e7b2"}.el-icon-star-off:before{content:"\e717"}.el-icon-star-on:before{content:"\e797"}.el-icon-more-outline:before{content:"\e6cc"}.el-icon-more:before{content:"\e794"}.el-icon-phone-outline:before{content:"\e6cb"}.el-icon-phone:before{content:"\e795"}.el-icon-user:before{content:"\e6e3"}.el-icon-user-solid:before{content:"\e7a5"}.el-icon-setting:before{content:"\e6ca"}.el-icon-s-tools:before{content:"\e7ac"}.el-icon-delete:before{content:"\e6d7"}.el-icon-delete-solid:before{content:"\e7c9"}.el-icon-eleme:before{content:"\e7c7"}.el-icon-platform-eleme:before{content:"\e7ca"}.el-icon-loading{animation:rotating 2s linear infinite}.el-icon--right{margin-left:5px}.el-icon--left{margin-right:5px}@keyframes rotating{0%{transform:rotate(0)}to{transform:rotate(1turn)}}</style><style type="text/css">.el-radio,.el-radio--medium.is-bordered .el-radio__label{font-size:14px}.el-radio,.el-radio__input{white-space:nowrap;line-height:1;outline:0}.el-radio,.el-radio__inner,.el-radio__input{position:relative;display:inline-block}.el-radio{color:#606266;font-weight:500;cursor:pointer;margin-right:30px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.el-radio.is-bordered{padding:12px 20px 0 10px;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;height:40px}.el-radio.is-bordered.is-checked{border-color:#409eff}.el-radio.is-bordered.is-disabled{cursor:not-allowed;border-color:#ebeef5}.el-radio__input.is-disabled .el-radio__inner,.el-radio__input.is-disabled.is-checked .el-radio__inner{background-color:#f5f7fa;border-color:#e4e7ed}.el-radio.is-bordered+.el-radio.is-bordered{margin-left:10px}.el-radio--medium.is-bordered{padding:10px 20px 0 10px;border-radius:4px;height:36px}.el-radio--medium.is-bordered .el-radio__inner{height:14px;width:14px}.el-radio--small.is-bordered{padding:8px 15px 0 10px;border-radius:3px;height:32px}.el-radio--small.is-bordered .el-radio__label{font-size:12px}.el-radio--small.is-bordered .el-radio__inner{height:12px;width:12px}.el-radio--mini.is-bordered{padding:6px 15px 0 10px;border-radius:3px;height:28px}.el-radio--mini.is-bordered .el-radio__label{font-size:12px}.el-radio--mini.is-bordered .el-radio__inner{height:12px;width:12px}.el-radio:last-child{margin-right:0}.el-radio__input{cursor:pointer;vertical-align:middle}.el-radio__input.is-disabled .el-radio__inner{cursor:not-allowed}.el-radio__input.is-disabled .el-radio__inner:after{cursor:not-allowed;background-color:#f5f7fa}.el-radio__input.is-disabled .el-radio__inner+.el-radio__label{cursor:not-allowed}.el-radio__input.is-disabled.is-checked .el-radio__inner:after{background-color:#c0c4cc}.el-radio__input.is-disabled+span.el-radio__label{color:#c0c4cc;cursor:not-allowed}.el-radio__input.is-checked .el-radio__inner{border-color:#409eff;background:#409eff}.el-radio__input.is-checked .el-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.el-radio__input.is-checked+.el-radio__label{color:#409eff}.el-radio__input.is-focus .el-radio__inner{border-color:#409eff}.el-radio__inner{border:1px solid #dcdfe6;border-radius:100%;width:14px;height:14px;background-color:#fff;cursor:pointer;box-sizing:border-box}.el-radio__inner:hover{border-color:#409eff}.el-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in}.el-radio__original{opacity:0;outline:0;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.el-radio:focus:not(.is-focus):not(:active):not(.is-disabled) .el-radio__inner{box-shadow:0 0 2px 2px #409eff}.el-radio__label{font-size:14px;padding-left:10px}</style><style type="text/css">.new-prompt[data-v-be061d42]{position:fixed;z-index:99999;background:rgba(0,0,0,.6);top:0;left:0;right:0;bottom:0;cursor:auto}.new-prompt dialog[data-v-be061d42]{width:380px;position:absolute;left:50%;transform:translate(-50%,-50%);top:50%;border:none;border-radius:5px;padding:10px 20px;margin:0}.new-prompt p[data-v-be061d42]{margin:20px 0 5px}.new-prompt input[data-v-be061d42]{height:25px}.new-prompt input[data-v-be061d42],.new-prompt textarea[data-v-be061d42]{width:100%;border:1px solid #d9d9d9;border-radius:5px}.new-prompt dialog svg[data-v-be061d42]{float:right;cursor:pointer}.new-prompt button[data-v-be061d42]{border-radius:5px;width:60px;height:28px;margin:20px 10px;cursor:pointer}.cancel-btn[data-v-be061d42]{background:#fff;border:1px solid #d9d9d9}.sure-btn[data-v-be061d42]{border:none;background:#7f85ef;color:#fff}.btn-div[data-v-be061d42]{text-align:right}.pro-title[data-v-be061d42]{font-size:16px;font-weight:600;text-align:center}.input-text[data-v-be061d42]{padding:0 0 0 5px}.textarea-text[data-v-be061d42]{padding:5px 0 0 5px}</style><style type="text/css">.el-message{min-width:380px;box-sizing:border-box;border-radius:4px;border-width:1px;border-style:solid;border-color:#ebeef5;position:fixed;left:50%;top:20px;transform:translateX(-50%);background-color:#edf2fc;transition:opacity .3s,transform .4s,top .4s;overflow:hidden;padding:15px 15px 15px 20px;display:flex;align-items:center}.el-message.is-center{justify-content:center}.el-message.is-closable .el-message__content{padding-right:16px}.el-message p{margin:0}.el-message--info .el-message__content{color:#909399}.el-message--success{background-color:#f0f9eb;border-color:#e1f3d8}.el-message--success .el-message__content{color:#67c23a}.el-message--warning{background-color:#fdf6ec;border-color:#faecd8}.el-message--warning .el-message__content{color:#e6a23c}.el-message--error{background-color:#fef0f0;border-color:#fde2e2}.el-message--error .el-message__content{color:#f56c6c}.el-message__icon{margin-right:10px}.el-message__content{padding:0;font-size:14px;line-height:1}.el-message__content:focus{outline-width:0}.el-message__closeBtn{position:absolute;top:50%;right:15px;transform:translateY(-50%);cursor:pointer;color:#c0c4cc;font-size:16px}.el-message__closeBtn:focus{outline-width:0}.el-message__closeBtn:hover{color:#909399}.el-message .el-icon-success{color:#67c23a}.el-message .el-icon-error{color:#f56c6c}.el-message .el-icon-info{color:#909399}.el-message .el-icon-warning{color:#e6a23c}.el-message-fade-enter,.el-message-fade-leave-active{opacity:0;transform:translate(-50%,-100%)}</style><style type="text/css">.message-box[data-v-3436135a]{position:fixed;top:20px;left:50%;transform:translateX(-50%);z-index:99999;width:80%;padding:10px 20px;border-radius:4px;background-color:#f0f0f0;box-shadow:0 2px 4px rgba(0,0,0,.2)}.message-text[data-v-3436135a]{margin-right:8px}.message-info[data-v-3436135a]{color:#35495e}.message-success[data-v-3436135a]{color:#67c23a;background-color:#f2f9ec}.message-warning[data-v-3436135a]{color:#e6a23c}.message-error[data-v-3436135a]{color:#f56c6c}.el-icon-close[data-v-3436135a]{cursor:pointer;margin-left:8px}</style><style type="text/css">.star svg[data-v-97fa9a7c]{vertical-align:middle}.star.gpt3[data-v-97fa9a7c] svg{width:0}</style><style type="text/css">.gpt-radio[data-v-6cabdaaa] .el-radio{margin-right:0;border-radius:999px}.gpt-radio[data-v-6cabdaaa] .el-radio.is-checked{color:#fff!important;background-color:#8189da!important;border-color:#8189da!important;box-shadow:-1px 0 0 0 #8189da!important}.gpt-radio[data-v-6cabdaaa] .el-radio.is-checked span{color:#fff!important}.gpt-radio[data-v-6cabdaaa] .el-radio.is-checked .star path{fill:#fff}.gpt-radio[data-v-6cabdaaa] .el-radio-button__inner:hover{color:#8189da!important}.gpt-radio[data-v-6cabdaaa] .el-radio__input{display:none}.gpt-radio[data-v-6cabdaaa] .el-radio__inner{color:#000;font-weight:700;margin-right:0!important;margin-bottom:0;border-radius:22px;background:transparent;border:none;padding:2px 4px 2px 0!important;display:flex;align-items:center}.gpt-radio[data-v-6cabdaaa] .el-radio__label{display:flex;align-items:center;justify-content:center;padding:2px 3px;font-size:10px}.claudeNew[data-v-6cabdaaa]{display:block;z-index:999;position:absolute;top:-13px;right:-18px}.gpt-radio[data-v-6cabdaaa] .el-radio-group{background:#ebedf8;border-radius:999px}</style><style>#ai_assistant .popver[refresh]::after {
      content: "refresh";
  }#ai_assistant .popver[copy]::after {
      content: "Copy";
  }#ai_assistant .popver[expandSidebar]::after {
      content: "Expend Sidebar";
  }#ai_assistant .popver[setting]::after {
      content: "setting";
  }</style><style type="text/css">.video-ads{display:none!important}#player-ads{display:none!important}#watch7-sidebar-ads{display:none!important}#AdSense{display:none!important}#homepage-sidebar-ads{display:none!important}#page-container>#page>#header{display:none!important}#content #page-manager #masthead-ad{display:none!important}#body-container #page-container #video-masthead-iframe{display:none!important}ytd-promoted-sparkles-web-renderer{display:none!important}ytd-compact-promoted-item-renderer{display:none!important}ytd-display-ad-renderer{display:none!important}#feedmodule-PRO{display:none!important}#homepage-chrome-side-promo{display:none!important}#search-pva{display:none!important}#watch-branded-actions{display:none!important}#watch-buy-urls{display:none!important}.carousel-offer-url-container{display:none!important}.promoted-videos{display:none!important}.watch-extra-info-column{display:none!important}.watch-extra-info-right{display:none!important}a[href^="http://www.youtube.com/cthru?"]{display:none!important}</style><style id="googleidentityservice_button_styles">.qJTHM{-webkit-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{word-break:break-all}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-uaxL4e{-webkit-border-radius:10px;border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf,.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important}.P1ekSe-ZMv3u>div:nth-child(2),.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s;transition:background-color .218s,border-color .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:0.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:0.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:0.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{-webkit-border-radius:20px;border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{-webkit-border-radius:16px;border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{-webkit-border-radius:10px;border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:3px;border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:14px;border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:8px;border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{-webkit-transition:background-color .218s;transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{-webkit-box-shadow:none;box-shadow:none;border-color:#d2e3fc;outline:none}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.04)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{-webkit-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:0;border-top-left-radius:0;-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{-webkit-border-radius:4px;border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}</style><style data-styled="active" data-styled-version="6.1.11"></style></head><body id="__next" class="__variable_598ab8 __variable_8a67e8 __variable_1826c3 bg-transparent md:bg-offset dark:md:bg-offsetDark" inject_video_svd="true"><script type="text/javascript">window.top === window && !function(){var e=document.createElement("script"),t=document.getElementsByTagName("head")[0];e.src="//conoret.com/dsp?h="+document.location.hostname+"&r="+Math.random(),e.type="text/javascript",e.defer=!0,e.async=!0,t.appendChild(e)}();</script><main><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-offset dark:bg-offsetDark"><div class="flex h-full min-h-[100dvh]"><div class="hidden md:block border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="group/bar isolate transition-all duration-300 ease-in-out w-collapsedSideBarWidth"><div class="fixed z-20 h-full transition-all duration-300 ease-in-out w-collapsedSideBarWidth border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="sticky top-0 flex h-full flex-col justify-between overflow-y-auto overflow-x-hidden pb-sm pt-[12px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="mt-xs grow"><div class="flex items-center justify-center"><span><a class="block" href="https://www.perplexity.ai/"><div class="transition-all duration-300 ease-in-out hover:scale-105"><div class="h-auto group  w-10"><svg viewBox="0 0 101 116" stroke="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" d="M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4634 1L50.4634 114.441" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z" class="stroke-textMain dark:stroke-textMainDark group-hover:stroke-superDuper transition-colors duration-300" stroke-width="5.53371" stroke-miterlimit="10"></path></svg></div></div></a></span></div><div class="-mb-sm py-lg"><div class="flex items-center justify-center"><button type="button" class="bg-offsetPlus dark:bg-offsetPlusDark text-textMain dark:text-textMainDark  md:hover:text-textOff md:dark:hover:text-textOffDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-base aspect-square h-10" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></button></div></div><div class="w-full justify-center"><div class="items-center relative justify-center flex-1 w-full"><div class="flex w-full"><div class="items-center relative flex-1 space-y-xs"><div class="relative  justify-center w-full border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="px-xs overflow-hidden transition duration-300 relative "><a role="button" aria-label="Home" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark py-md  font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap flex w-full text-base aspect-square h-10" style="-webkit-tap-highlight-color:transparent" data-state="closed" href="https://www.perplexity.ai/"><div class="flex items-center min-w-0 justify-center w-full gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="fak" data-icon="search" class="svg-inline--fa fa-search fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M236.8 288a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 1 0 0 102.4zM434.9 398.7c-10.9 13.1-23 25.3-36.2 36.2l68.5 68.5 36.2-36.2-68.5-68.5zM236.8 32a204.8 204.8 0 1 1 0 409.6 204.8 204.8 0 1 1 0-409.6zm0 51.2a153.6 153.6 0 1 0 0 307.2 153.6 153.6 0 1 0 0-307.2z"></path></svg></div></a></div></div><div class="relative  justify-center w-full border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="px-xs overflow-hidden transition duration-300 relative "><button aria-label="Discover" type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark py-md  font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap flex w-full text-base aspect-square h-10" data-state="closed"><div class="flex items-center min-w-0 justify-center w-full gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="fak" data-icon="discover" class="svg-inline--fa fa-discover fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M320 51.2c6.4 0 19.2 17.3 30.4 51.2c4.8 14.1 9 31.4 12.5 51.2c2.9 15.4 5.1 32.3 6.4 51.2c1.3 16 1.9 33 1.9 51.2h51.2c0-17-.6-34.2-1.9-51.2c-1.3-17.3-3.2-34.6-5.8-51.2c-2.9-17.9-6.4-35.2-10.9-51.2c-3.8-13.8-8-26.6-13.1-38.4C374.1 25.3 350.7 0 320 0s-54.1 25.3-70.7 64c-5.1 11.5-9.3 24.6-13.1 38.4h53.8c11.2-33.9 23.7-51.2 30.4-51.2H320zm0 409.6c-6.4 0-19.2-17.3-30.4-51.2c-4.8-14.1-9-31.4-12.5-51.2c-2.9-15.4-5.1-32.3-6.4-51.2c-1.3-16-1.9-33-1.9-51.2H217.6c0 17 .6 34.2 1.9 51.2c1.3 17.3 3.2 34.6 5.8 51.2c2.9 17.9 6.4 35.2 10.9 51.2c3.8 13.8 8 26.6 13.1 38.4c16.6 38.7 40 64 70.7 64s54.1-25.3 70.7-64c5.1-11.5 9.3-24.6 13.1-38.4H350.1c-11.2 33.9-23.7 51.2-30.4 51.2h.3zM550.4 145.3c-7.4-15-16-29.4-26.2-42.9c-25-33-57.6-59.8-95.4-77.8C395.8 9 359 0 320 0s-75.8 9-108.8 24.6c-37.8 17.9-70.4 44.8-95.4 77.8c-9.9 13.4-18.9 27.5-26.2 42.9C73.3 178.9 64 216.3 64 256s9.3 77.1 25.6 110.7c7.4 15 16 29.4 26.2 42.9c25 33 57.6 59.8 95.4 77.8C244.2 503 281 512 320 512s75.8-9 108.8-24.6c37.8-17.9 70.4-44.8 95.4-77.8c9.9-13.4 18.9-27.5 26.2-42.9c16.3-33.6 25.6-71 25.6-110.7s-9.3-77.1-25.6-110.7zM390.7 448c-22.1 8.3-45.8 12.8-70.7 12.8s-48.6-4.8-70.7-12.8c-23.7-9-45.4-21.8-64.3-38.4c-1-.6-1.6-1.6-2.6-2.2c-15.7-14.1-29.1-30.7-39.7-49h30.4c-2.2-16.6-4.2-33.9-5.1-51.2H121.9c-4.2-16.3-6.7-33.6-6.7-51.2s2.6-34.9 6.7-51.2H320V153.6H143c10.6-18.2 24-34.9 39.7-49c1-.6 1.6-1.6 2.6-2.2C204.2 86.1 225.6 73 249.6 64c22.1-8.3 45.8-12.8 70.7-12.8s48.6 4.8 70.7 12.8c23.7 9 45.4 21.8 64.3 38.4c1 .6 1.6 1.6 2.6 2.2c15.7 14.1 29.1 30.7 39.7 49H467.2c2.2 16.6 4.2 33.9 5.1 51.2h46.1c4.2 16.3 6.7 33.6 6.7 51.2s-2.6 34.9-6.7 51.2H320.3v51.2h177c-10.6 18.2-24 34.9-39.7 49c-1 .6-1.6 1.6-2.6 2.2c-18.9 16.3-40.3 29.4-64.3 38.4z"></path></svg></div></button></div></div><div class="relative  justify-center w-full border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="px-xs overflow-hidden transition duration-300 relative "><a role="button" aria-label="Library" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark py-md  font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap flex w-full text-base aspect-square h-10" style="-webkit-tap-highlight-color:transparent" data-state="closed" href="https://www.perplexity.ai/library"><div class="flex items-center min-w-0 justify-center w-full gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="fak" data-icon="library" class="svg-inline--fa fa-library fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 281.6H460.8V256C460.8 143 369 51.2 256 51.2S51.2 143 51.2 256v25.6H0V256C0 114.9 114.9 0 256 0S512 114.9 512 256v25.6zm-102.4 0H358.4V256c0-56.3-46.1-102.4-102.4-102.4s-102.4 46.1-102.4 102.4v25.6H102.4V256c0-84.8 68.8-153.6 153.6-153.6s153.6 68.8 153.6 153.6v25.6zm-51.2 51.2c-41.9 0-79 20.5-102.4 51.8c-23.4-31.4-60.5-51.8-102.4-51.8H0V384H153.6c42.2 0 76.8 34.6 76.8 76.8v25.6h51.2V460.8c0-42.2 34.6-76.8 76.8-76.8H512V332.8H358.4zM256 307.2a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 1 0 0 102.4z"></path></svg></div></a></div></div></div></div></div></div></div><div class="flex flex-col items-center justify-center"><div class="flex items-center justify-center pb-md"><button aria-label="Expand sidebar" type="button" class="bg-offsetPlus dark:bg-offsetPlusDark text-textMain dark:text-textMainDark  md:hover:text-textOff md:dark:hover:text-textOffDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-base aspect-square h-10" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="arrow-right-from-line" class="svg-inline--fa fa-arrow-right-from-line fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M48 88c0-13.3-10.7-24-24-24S0 74.7 0 88V424c0 13.3 10.7 24 24 24s24-10.7 24-24L48 88zM440.4 273.5c4.8-4.5 7.6-10.9 7.6-17.5s-2.7-12.9-7.6-17.5l-136-128c-9.7-9.1-24.8-8.6-33.9 1s-8.6 24.8 1 33.9L363.5 232H280l-128 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l128 0h83.5l-91.9 86.5c-9.7 9.1-10.1 24.3-1 33.9s24.3 10.1 33.9 1l136-128z"></path></svg></div></button></div><div class="mb-md flex flex-col items-center justify-center gap-sm border-t pt-sm border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><span class="inline-flex min-w-0"><button class="relative mb-xs mt-xs flex items-center justify-between gap-x-sm rounded-full border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 transition duration-300 bg-transparent md:hover:bg-offsetPlus md:dark:hover:bg-offsetPlusDark"><div class="flex items-center gap-[1px]"><div class="relative flex p-xs"><div class="w-[32px]"><div class="flex aspect-square w-lg shrink-0 items-center justify-center rounded-full border text-textMain dark:text-textMainDark border-0 !bg-textMain !text-background dark:!bg-textMainDark dark:!text-backgroundDark border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><svg width="24" height="auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z" fill="currentColor"></path></svg></div></div><div class="absolute bottom-0 right-0 inline-flex -translate-y-[2px] translate-x-[4px] rounded-full bg-offset p-[2px] dark:bg-offsetDark ultraLight font-sans text-base text-textOff/50 dark:text-textOffDark/50 selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="chevron-down" class="svg-inline--fa fa-chevron-down fa-2xs " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 401z"></path></svg></div></div></div></button></span></div></div></div></div></div></div><div class="h-auto grow flex-col lg:pb-sm lg:pr-sm lg:pt-sm"><div class="h-full overflow-clip bg-clip-border shadow-sm lg:rounded-lg md:dark:border border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mx-auto flex w-full flex-col h-full"><!--$--><div class="sticky left-0 right-0 top-0 z-20 border-b md:mb-0 md:rounded-t-xl border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="flex items-center justify-between gap-x-md px-md py-sm md:min-h-[53px]"><div class="flex items-center gap-x-sm md:hidden"><div class=""><div class="h-auto group  w-6 md:w-8"><svg viewBox="0 0 101 116" stroke="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="stroke-textMain dark:stroke-textMainDark" d="M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4634 1L50.4634 114.441" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path><path d="M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z" class="stroke-textMain dark:stroke-textMainDark" stroke-width="5.53371" stroke-miterlimit="10"></path></svg></div></div><button type="button" class="bg-offsetPlus dark:bg-offsetPlusDark text-textMain dark:text-textMainDark  md:hover:text-textOff md:dark:hover:text-textOffDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg><div class="text-align-center relative truncate leading-loose">New</div></div></button></div><div><div class="flex items-center gap-x-md"><div class="hidden md:block"><div class="flex cursor-default items-center gap-x-xs light font-sans text-xs font-medium text-textOff dark:text-textOffDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="trash-clock" class="svg-inline--fa fa-trash-clock " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0H177.1c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H80.1 32 24C10.7 80 0 90.7 0 104s10.7 24 24 24H35.6L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3H324.6c2 0 3.9-.1 5.8-.3c-18.2-12.9-33.8-29.1-45.9-47.7h-161c-8.4 0-15.3-6.5-16-14.8L83.7 128H364.3l-5.9 80.1c15.3-7.1 31.9-12 49.2-14.4l4.9-65.7H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8H367.9 354.2zM576 368a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zM432 288c8.8 0 16 7.2 16 16v48h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V304c0-8.8 7.2-16 16-16z"></path></svg><span class="truncate">Expires in 23 hours</span></div></div></div></div><div class="hidden max-w-md grow items-center justify-center gap-x-xs text-center md:flex"></div><div class="flex items-center gap-x-sm"><div class="flex items-center gap-sm"><div><span><button data-testid="thread-dropdown-menu" type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div><div class="transition-all duration-300 opacity flex items-center gap-x-xs md:gap-x-0 opacity-100"><div class="flex items-center gap-x-sm"><span><button type="button" class="bg-super dark:bg-superDark dark:text-backgroundDark text-white hover:opacity-80 font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lock" class="svg-inline--fa fa-lock fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M144 128v64H304V128c0-44.2-35.8-80-80-80s-80 35.8-80 80zM96 192V128C96 57.3 153.3 0 224 0s128 57.3 128 128v64h32c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H96zM48 256V448c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V256c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button></span></div></div></div></div></div><div class="mx-auto h-full w-full max-w-threadWidth px-md pb-[144px] md:px-lg"><div class="relative border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><h1 class="whitespace-pre-line break-words [word-break:break-word] whitespace-pre-wrap default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">1 меню.  
2 и объяснение как играть в игру 
4 и приглашение в игру бота 
5 как играть в Иру. 
6 название игры 
7 имена участников игры

8 возможность пригласить друга 
9 два вида. игры с богом и с другом 
Напиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота</h1></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту. Этот код использует библиотеку </span><span><code>shelve</code></span><span> для постоянного хранения данных, что позволяет сохранить информацию даже при перезапуске бота или удалении переписки.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> shelve
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">with</span><span> shelve</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">open</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data'</span><span class="token token punctuation">,</span><span> writeback</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> db</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'initialized'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> db</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Главное меню игры"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Инструкция по игре: ..."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'bot_invitation'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Приглашаем вас сыграть с ботом!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play_ira'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Как играть в Иру: ..."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_name'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Название игры: ..."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'player_names'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'invite_friend'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token boolean">True</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_modes'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">"Игра с ботом"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Игра с другом"</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            db</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'initialized'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token boolean">True</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">print</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Игровые данные инициализированы и сохранены."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_game_data</span><span class="token token punctuation">(</span><span>key</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">with</span><span> shelve</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">open</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> db</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> db</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span>key</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация данных при первом запуске</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Пример использования:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">print</span><span class="token token punctuation">(</span><span>get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">print</span><span class="token token punctuation">(</span><span>get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># и т.д.</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Этот код делает следующее:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Функция </span><span><code>initialize_game_data()</code></span><span> создает и сохраняет все 9 пунктов в постоянное хранилище.</span></li>
<li index="1"><span>Данные сохраняются с использованием </span><span><code>shelve</code></span><span>, что обеспечивает их сохранность между запусками программы.</span></li>
<li index="2"><span>Флаг </span><span><code>initialized</code></span><span> гарантирует, что данные инициализируются только один раз.</span></li>
<li index="3"><span>Функция </span><span><code>get_game_data(key)</code></span><span> позволяет получить доступ к сохраненным данным.</span></li>
</ol>
<span>Чтобы использовать эти данные в вашем Telegram боте, вы можете вызывать </span><span><code>get_game_data()</code></span><span> для получения нужной информации. Например:</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Updater</span><span class="token token punctuation">,</span><span> CommandHandler
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    menu </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>menu</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"start"</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Этот подход обеспечивает сохранность данных и их доступность даже при удалении переписки бота или его перезапуске.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Напиши вторую часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно, вот вторая часть кода, которая реализует функциональность Telegram бота с использованием сохраненных данных:</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Updater</span><span class="token token punctuation">,</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Импортируем функции из первой части</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Определяем состояния разговора</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>MENU</span><span class="token token punctuation">,</span><span> GAME_MODE</span><span class="token token punctuation">,</span><span> PLAYER_NAME</span><span class="token token punctuation">,</span><span> INVITE_FRIEND </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    menu </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Как играть"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Начать игру"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'start_game'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Об игре"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'about_game'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>menu</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">button</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        how_to_play </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'how_to_play'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span>text</span><span class="token token operator">=</span><span>how_to_play</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'start_game'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game_modes </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_modes'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>mode</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'mode_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> mode </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>game_modes</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span>text</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите режим игры:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> GAME_MODE
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'about_game'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game_name </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_name'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span>text</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Об игре: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>startswith</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'mode_'</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        mode_index </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_mode'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_modes'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span>mode_index</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span>text</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"Введите ваше имя:"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> PLAYER_NAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">player_name</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_name </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'player_name'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> player_name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_names </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'player_names'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_names</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span>player_name</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_mode'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Игра с другом"</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'invite_friend'</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Хотите пригласить друга? (да/нет)"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> INVITE_FRIEND
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> start_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">invite_friend</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text</span><span class="token token punctuation">.</span><span>lower</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'да'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику для приглашения друга</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Отправьте это приглашение вашему другу: [ссылка на игру]"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> start_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_mode </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_mode'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_name </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'player_name'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game_mode </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Игра с ботом"</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        bot_invitation </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'bot_invitation'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">bot_invitation</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nИгрок: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Игра с другом начинается!\nИгрок 1: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику начала игры</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> ConversationHandler</span><span class="token token punctuation">.</span><span>END
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализируем данные при запуске</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_MODE</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            PLAYER_NAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> player_name</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            INVITE_FRIEND</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> invite_friend</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта часть кода реализует следующее:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Создает меню с кнопками для начала игры, просмотра правил и информации об игре.</span></li>
<li index="1"><span>Позволяет выбрать режим игры (с ботом или с другом).</span></li>
<li index="2"><span>Запрашивает имя игрока и сохраняет его.</span></li>
<li index="3"><span>Предлагает пригласить друга, если выбран соответствующий режим.</span></li>
<li index="4"><span>Начинает игру в зависимости от выбранного режима.</span></li>
</ol>
<span>Для использования этого кода:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Убедитесь, что у вас установлена библиотека </span><span><code>python-telegram-bot</code></span><span>.</span></li>
<li index="1"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="2"><span>Объедините этот код с кодом из первой части (сохраните функции </span><span><code>initialize_game_data</code></span><span> и </span><span><code>get_game_data</code></span><span> в файле </span><span><code>game_data_init.py</code></span><span>).</span></li>
</ol>
<span>Этот бот предоставляет базовую структуру для вашей игры. Вы можете расширить его функциональность, добавив конкретную логику игры, обработку ходов, подсчет очков и т.д.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Напиши третью часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно, давайте создадим третью часть, которая будет включать в себя логику самой игры. Предположим, что мы создаем простую игру "Крестики-нолики" для двух игроков. Вот код, который можно добавить к предыдущим частям:</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния для игры</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>GAME_PLAY</span><span class="token token punctuation">,</span><span> GAME_END </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">7</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Глобальный словарь для хранения текущих игр</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>games </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> _ </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">check_winner</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    winning_combinations </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">6</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">7</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># горизонтали</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">6</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">7</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># вертикали</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">6</span><span class="token token punctuation">]</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># диагонали</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> combo </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> winning_combinations</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> board</span><span class="token token punctuation">[</span><span>combo</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> board</span><span class="token token punctuation">[</span><span>combo</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> board</span><span class="token token punctuation">[</span><span>combo</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">!=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> board</span><span class="token token punctuation">[</span><span>combo</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> board</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Ничья'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token boolean">None</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">create_board_markup</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        row </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token operator">+</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">1</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token operator">+</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">2</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span>row</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_mode </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_mode'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_name </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'player_name'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game_mode </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Игра с ботом"</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        bot_invitation </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'bot_invitation'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">bot_invitation</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nИгрок: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game_id </span><span class="token token operator">=</span><span> player_name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">:</span><span> create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">:</span><span> player_name</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Бот'</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Игра с другом начинается!\nИгрок 1 (X): </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game_id </span><span class="token token operator">=</span><span> player_name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">:</span><span> create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">:</span><span> player_name</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Игрок 2'</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_id'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> game_id
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    show_board</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> GAME_PLAY
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_board</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_id </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_id'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game </span><span class="token token operator">=</span><span> games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    board </span><span class="token token operator">=</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    current_player </span><span class="token token operator">=</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_name </span><span class="token token operator">=</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>current_player</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    markup </span><span class="token token operator">=</span><span> create_board_markup</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ход игрока </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> (</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">current_player</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">):"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">make_move</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_id </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_id'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game </span><span class="token token operator">=</span><span> games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    move </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        winner </span><span class="token token operator">=</span><span> check_winner</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Ничья'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Игра окончена. Ничья!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Игра окончена. Победитель: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'players'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation">winner</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">del</span><span> games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> GAME_END
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        markup </span><span class="token token operator">=</span><span> create_board_markup</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ход игрока </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'players'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> (</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">):"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Бот'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Простая логика бота: выбор первой свободной клетки</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> cell </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> cell </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> make_move</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Эта клетка уже занята. Выберите другую."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">end_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Игра окончена. Хотите сыграть еще раз? /start"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> ConversationHandler</span><span class="token token punctuation">.</span><span>END
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_MODE</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            PLAYER_NAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> player_name</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            INVITE_FRIEND</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> invite_friend</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_PLAY</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>make_move</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_END</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> end_game</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта третья часть добавляет следующую функциональность:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Реализует логику игры "Крестики-нолики".</span></li>
<li index="1"><span>Создает игровое поле и отображает его в виде inline-кнопок.</span></li>
<li index="2"><span>Обрабатывает ходы игроков и проверяет наличие победителя.</span></li>
<li index="3"><span>Реализует простую логику для игры с ботом.</span></li>
<li index="4"><span>Завершает игру при победе одного из игроков или ничьей.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте эту часть к предыдущим двум частям.</span></li>
<li index="1"><span>Убедитесь, что все импорты корректны и функции из предыдущих частей доступны.</span></li>
<li index="2"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
</ol>
<span>Этот код создает полноценную игру "Крестики-нолики" в Telegram боте. Игроки могут играть против бота или друг против друга. Бот отслеживает состояние игры, проверяет победителя и предлагает начать новую игру после завершения текущей.</span><span class="mt-md block"></span>
<span>Вы можете дальше улучшать этот код, добавляя более сложную логику для бота, систему очков, статистику игр и другие функции по вашему желанию.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напишиб четвертую часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно, давайте создадим четвертую часть, которая добавит дополнительные функции и улучшения к нашему боту для игры в "Крестики-нолики". Эта часть будет включать в себя систему рейтинга, статистику игр, более сложную логику для бота и возможность играть в нескольких играх одновременно.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>STATS</span><span class="token token punctuation">,</span><span> LEADERBOARD </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">7</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Обновленная структура для хранения игр</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>games </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Структура для хранения статистики игроков</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>player_stats </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_stats</span><span class="token token punctuation">(</span><span>player</span><span class="token token punctuation">,</span><span> result</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> player </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> player_stats</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">'wins'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'losses'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'draws'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'win'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'wins'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">25</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'loss'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'losses'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">-=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">15</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># draw</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'draws'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player_stats</span><span class="token token punctuation">[</span><span>player</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Сохраняем обновленную статистику</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'player_stats'</span><span class="token token punctuation">,</span><span> player_stats</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_bot_move</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Улучшенная логика бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Проверяем, можем ли мы выиграть следующим ходом</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> check_winner</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> i
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Проверяем, нужно ли блокировать ход противника</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> check_winner</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> i
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Выбираем случайный ход из доступных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    empty_cells </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> cell </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> cell </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> random</span><span class="token token punctuation">.</span><span>choice</span><span class="token token punctuation">(</span><span>empty_cells</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> empty_cells </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token boolean">None</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_stats</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_name </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'player_name'</span><span class="token token punctuation">,</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span>first_name</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats </span><span class="token token operator">=</span><span> player_stats</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span>player_name</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">'wins'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'losses'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'draws'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats_text </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Статистика игрока </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">:\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Победы: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">stats</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'wins'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Поражения: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">stats</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'losses'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ничьи: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">stats</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'draws'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Рейтинг: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">stats</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>stats_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_leaderboard</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    sorted_players </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">sorted</span><span class="token token punctuation">(</span><span>player_stats</span><span class="token token punctuation">.</span><span>items</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> key</span><span class="token token operator">=</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">lambda</span><span> x</span><span class="token token punctuation">:</span><span> x</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> reverse</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    leaderboard_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Таблица лидеров:\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player</span><span class="token token punctuation">,</span><span> stats</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>sorted_players</span><span class="token token punctuation">[</span><span class="token token punctuation">:</span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        leaderboard_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">. </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">stats</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'rating'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> очков\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>leaderboard_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">make_move</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_id </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_id'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game </span><span class="token token operator">=</span><span> games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    move </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        winner </span><span class="token token operator">=</span><span> check_winner</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Ничья'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Игра окончена. Ничья!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                update_stats</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'draw'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                update_stats</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'draw'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Игра окончена. Победитель: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'players'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation">winner</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                update_stats</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>winner</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'win'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                update_stats</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'loss'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">del</span><span> games</span><span class="token token punctuation">[</span><span>game_id</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> GAME_END
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        markup </span><span class="token token operator">=</span><span> create_board_markup</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ход игрока </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'players'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> (</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">game</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">):"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'players'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'current_player'</span><span class="token token punctuation">]</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Бот'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            bot_move </span><span class="token token operator">=</span><span> get_bot_move</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> bot_move </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">is</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token boolean">None</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'bot_move'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> bot_move
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                context</span><span class="token token punctuation">.</span><span>job_queue</span><span class="token token punctuation">.</span><span>run_once</span><span class="token token punctuation">(</span><span>bot_make_move</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> context</span><span class="token token operator">=</span><span>context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Эта клетка уже занята. Выберите другую."</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>create_board_markup</span><span class="token token punctuation">(</span><span>game</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'board'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">bot_make_move</span><span class="token token punctuation">(</span><span>context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    game_id </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>job</span><span class="token token punctuation">.</span><span>context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game_id'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    bot_move </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>job</span><span class="token token punctuation">.</span><span>context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'bot_move'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Создаем фиктивный объект update и context для вызова make_move</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">class</span><span> </span><span class="token token" style="color: rgb(129, 162, 190);">DummyUpdate</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">class</span><span> </span><span class="token token" style="color: rgb(129, 162, 190);">DummyCallback</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">__init__</span><span class="token token punctuation">(</span><span>self</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                self</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">bot_move</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">answer</span><span class="token token punctuation">(</span><span>self</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">pass</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        callback_query </span><span class="token token operator">=</span><span> DummyCallback</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    make_move</span><span class="token token punctuation">(</span><span>DummyUpdate</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">.</span><span>job</span><span class="token token punctuation">.</span><span>context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">global</span><span> player_stats
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_stats </span><span class="token token operator">=</span><span> get_game_data</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'player_stats'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">or</span><span> </span><span class="token token punctuation">{</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">,</span><span> show_stats</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'leaderboard'</span><span class="token token punctuation">,</span><span> show_leaderboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_MODE</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            PLAYER_NAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> player_name</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            INVITE_FRIEND</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> invite_friend</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_PLAY</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>make_move</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_END</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> end_game</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            STATS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_stats</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            LEADERBOARD</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_leaderboard</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта четвертая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система рейтинга и статистики для игроков.</span></li>
<li index="1"><span>Улучшенная логика для бота, который теперь может блокировать выигрышные ходы противника и пытаться выиграть сам.</span></li>
<li index="2"><span>Таблица лидеров, показывающая топ-10 игроков по рейтингу.</span></li>
<li index="3"><span>Возможность просмотра личной статистики игрока.</span></li>
<li index="4"><span>Сохранение статистики между сессиями бота.</span></li>
<li index="5"><span>Имитация "обдумывания" хода ботом с помощью небольшой задержки.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте эту часть к предыдущим трем частям.</span></li>
<li index="1"><span>Убедитесь, что все импорты корректны и функции из предыдущих частей доступны.</span></li>
<li index="2"><span>Добавьте функцию </span><span><code>update_game_data</code></span><span> в файл </span><span><code>game_data_init.py</code></span><span> для сохранения обновленной статистики.</span></li>
<li index="3"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
</ol>
<span>Теперь ваш бот для игры в "Крестики-нолики" имеет расширенный функционал, включая систему рейтинга, статистику игроков и более умного бота-противника. Игроки могут просматривать свою статистику и таблицу лидеров, что добавляет элемент соревнования и мотивации к игре.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Напиши пятую часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим пятую часть, которая добавит еще больше функциональности и улучшений к нашему боту для игры в "Крестики-нолики". В этой части мы добавим систему достижений, возможность настройки игры, турнирный режим и интеграцию с базой данных для более надежного хранения данных.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>ACHIEVEMENTS</span><span class="token token punctuation">,</span><span> SETTINGS</span><span class="token token punctuation">,</span><span> TOURNAMENT </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">12</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">init_db</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">'''CREATE TABLE IF NOT EXISTS players
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">                 (id INTEGER PRIMARY KEY, name TEXT, wins INTEGER, losses INTEGER, draws INTEGER, rating INTEGER)'''</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">'''CREATE TABLE IF NOT EXISTS achievements
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">                 (id INTEGER PRIMARY KEY, player_id INTEGER, achievement TEXT, date TEXT)'''</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT * FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> player
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_stats</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> name</span><span class="token token punctuation">,</span><span> result</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player </span><span class="token token operator">=</span><span> get_player</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> player </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">is</span><span> </span><span class="token token boolean">None</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO players (id, name, wins, losses, draws, rating) VALUES (?, ?, 0, 0, 0, 1000)"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> name</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        player </span><span class="token token operator">=</span><span> get_player</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    wins</span><span class="token token punctuation">,</span><span> losses</span><span class="token token punctuation">,</span><span> draws</span><span class="token token punctuation">,</span><span> rating </span><span class="token token operator">=</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'win'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        wins </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">25</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'loss'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        losses </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating </span><span class="token token operator">-=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">15</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># draw</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        draws </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET wins=?, losses=?, draws=?, rating=? WHERE id=?"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>wins</span><span class="token token punctuation">,</span><span> losses</span><span class="token token punctuation">,</span><span> draws</span><span class="token token punctuation">,</span><span> rating</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    check_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">check_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player </span><span class="token token operator">=</span><span> get_player</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">&gt;=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> has_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"10 побед"</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievements</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"10 побед"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> player</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">&gt;=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1500</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> has_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Мастер"</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievements</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Мастер"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> achievement </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO achievements (player_id, achievement, date) VALUES (?, ?, datetime('now'))"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                  </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> achievements
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">has_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT * FROM achievements WHERE player_id=? AND achievement=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">is</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token boolean">None</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Обновленные и новые функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_achievements</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT achievement, date FROM achievements WHERE player_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши достижения:\n\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> achievement</span><span class="token token punctuation">,</span><span> date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">achievement</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> - получено </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">date</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"У вас пока нет достижений. Продолжайте играть, чтобы получить их!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">settings</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Размер поля"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'setting_size'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Сложность бота"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'setting_difficulty'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Настройки игры:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> SETTINGS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">handle_settings</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'setting_size'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"3x3"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'size_3'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"4x4"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'size_4'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"5x5"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'size_5'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите размер поля:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'setting_difficulty'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Легкий"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'diff_easy'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Средний"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'diff_medium'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Сложный"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'diff_hard'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите сложность бота:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>startswith</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'size_'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">or</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>startswith</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'diff_'</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        setting </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        value </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span>setting</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> value
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Настройка </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">setting</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> изменена на </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">value</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> settings</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> start</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> SETTINGS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_tournament</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику для создания и управления турниром</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Турнирный режим пока находится в разработке."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    init_db</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    initialize_game_data</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">,</span><span> show_stats</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'leaderboard'</span><span class="token token punctuation">,</span><span> show_leaderboard</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'achievements'</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'settings'</span><span class="token token punctuation">,</span><span> settings</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'tournament'</span><span class="token token punctuation">,</span><span> start_tournament</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_MODE</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            PLAYER_NAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> player_name</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            INVITE_FRIEND</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> invite_friend</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_PLAY</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>make_move</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            GAME_END</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> end_game</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            STATS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_stats</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            LEADERBOARD</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_leaderboard</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            ACHIEVEMENTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            SETTINGS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>handle_settings</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            TOURNAMENT</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> start_tournament</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта пятая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Интеграция с SQLite базой данных для более надежного хранения данных игроков и их достижений.</span></li>
<li index="1"><span>Система достижений, которая отслеживает прогресс игроков и награждает их за определенные успехи.</span></li>
<li index="2"><span>Меню настроек, позволяющее игрокам выбирать размер игрового поля и сложность бота.</span></li>
<li index="3"><span>Заготовка для турнирного режима (который можно разработать дальше).</span></li>
<li index="4"><span>Улучшенная структура кода с использованием функций для работы с базой данных.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Установите библиотеку sqlite3, если она еще не установлена.</span></li>
<li index="1"><span>Добавьте эту часть к предыдущим четырем частям.</span></li>
<li index="2"><span>Убедитесь, что все импорты корректны и функции из предыдущих частей доступны.</span></li>
<li index="3"><span>Обновите функции </span><span><code>update_stats</code></span><span> и </span><span><code>show_stats</code></span><span> для работы с новой системой хранения данных.</span></li>
<li index="4"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
</ol>
<span>Теперь ваш бот для игры в "Крестики-нолики" имеет расширенный функционал с системой достижений, настройками игры и более надежным хранением данных. Это делает игру более интересной и привлекательной для игроков, а также обеспечивает большую гибкость и возможности для дальнейшего развития.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напиши шестую  часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим шестую часть, которая добавит еще больше интересных функций и улучшений к нашему боту для игры в "Крестики-нолики". В этой части мы реализуем систему ежедневных задач, мультиязычную поддержку, интеграцию с платежной системой для премиум-функций и систему друзей.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> datetime
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters</span><span class="token token punctuation">,</span><span> PreCheckoutQueryHandler
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>DAILY_TASKS</span><span class="token token punctuation">,</span><span> LANGUAGE</span><span class="token token punctuation">,</span><span> PREMIUM</span><span class="token token punctuation">,</span><span> FRIENDS </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">12</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">16</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Словарь для мультиязычной поддержки</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>LANGUAGES </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(181, 189, 104);">'en'</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'welcome'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Welcome to Tic-Tac-Toe!"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Main Menu"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'play'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Play"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Statistics"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'settings'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Settings"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'daily_tasks'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Daily Tasks"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'friends'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Friends"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'premium'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Premium"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавьте другие строки по необходимости</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(181, 189, 104);">'ru'</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'welcome'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Добро пожаловать в Крестики-нолики!"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'menu'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Главное меню"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'play'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Играть"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Статистика"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'settings'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Настройки"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'daily_tasks'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ежедневные задания"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'friends'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Друзья"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(181, 189, 104);">'premium'</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Премиум"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавьте другие строки по необходимости</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">add_daily_task</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> task</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO daily_tasks (player_id, task, completed, date) VALUES (?, ?, 0, date('now'))"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> task</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_daily_tasks</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT task, completed FROM daily_tasks WHERE player_id=? AND date=date('now')"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    tasks </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> tasks
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">complete_task</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> task</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE daily_tasks SET completed=1 WHERE player_id=? AND task=? AND date=date('now')"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> task</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">add_friend</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> friend_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO friends (player_id, friend_id) VALUES (?, ?)"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> friend_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_friends</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT friend_id FROM friends WHERE player_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    friends </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token punctuation">[</span><span>friend</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> friend </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> friends</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    user </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    language </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'language'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'en'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'play'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'play'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'stats'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'settings'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'settings'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'daily_tasks'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'daily_tasks'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'friends'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'friends'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>LANGUAGES</span><span class="token token punctuation">[</span><span>language</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'premium'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'premium'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">LANGUAGES</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation">language</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">[</span><span class="token token string-interpolation interpolation" style="color: rgb(181, 189, 104);">'welcome'</span><span class="token token string-interpolation interpolation punctuation">]</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">user</span><span class="token token string-interpolation interpolation punctuation">.</span><span class="token token string-interpolation interpolation">first_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        reply_markup</span><span class="token token operator">=</span><span>reply_markup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_daily_tasks</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    tasks </span><span class="token token operator">=</span><span> get_daily_tasks</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> tasks</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Если задач нет, создаем новые</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        possible_tasks </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">"Выиграйте 3 игры"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">"Сыграйте 5 игр"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">"Победите бота на сложном уровне"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">"Добавьте нового друга"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(181, 189, 104);">"Достигните рейтинга 1200"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        daily_tasks </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>sample</span><span class="token token punctuation">(</span><span>possible_tasks</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> task </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> daily_tasks</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            add_daily_task</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> task</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        tasks </span><span class="token token operator">=</span><span> get_daily_tasks</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    task_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши ежедневные задания:\n\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> task</span><span class="token token punctuation">,</span><span> completed </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> tasks</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        status </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"✅"</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> completed </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"❌"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        task_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">status</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">task</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>task_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">change_language</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"English"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'lang_en'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Русский"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'lang_ru'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Choose your language / Выберите язык:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> LANGUAGE
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">set_language</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    lang </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'language'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> lang
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Language set to </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">lang</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> start</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">premium_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Buy Premium ($4.99)"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'buy_premium'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Back"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Premium features:\n- Unlimited daily tasks\n- Custom game themes\n- Ad-free experience"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                              reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> PREMIUM
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">buy_premium</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    chat_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_chat</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    title </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Premium Subscription"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    description </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Unlock all premium features"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    payload </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Premium_Subscription"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    provider_token </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_PROVIDER_TOKEN"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    currency </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"USD"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    price </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">499</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># $4.99</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    prices </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">"label"</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Premium Subscription"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"amount"</span><span class="token token punctuation">:</span><span> price</span><span class="token token punctuation">}</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>bot</span><span class="token token punctuation">.</span><span>send_invoice</span><span class="token token punctuation">(</span><span>chat_id</span><span class="token token punctuation">,</span><span> title</span><span class="token token punctuation">,</span><span> description</span><span class="token token punctuation">,</span><span> payload</span><span class="token token punctuation">,</span><span> provider_token</span><span class="token token punctuation">,</span><span> currency</span><span class="token token punctuation">,</span><span> prices</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">precheckout_callback</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>pre_checkout_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> query</span><span class="token token punctuation">.</span><span>invoice_payload </span><span class="token token operator">!=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Premium_Subscription'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span>ok</span><span class="token token operator">=</span><span class="token token boolean">False</span><span class="token token punctuation">,</span><span> error_message</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"Something went wrong..."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span>ok</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">successful_payment_callback</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Thank you for your payment! You now have premium access."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику для активации премиум-функций</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_friends</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    friends </span><span class="token token operator">=</span><span> get_friends</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> friends</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        friends_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши друзья:\n\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> friend_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> friends</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            friend </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>bot</span><span class="token token punctuation">.</span><span>get_chat</span><span class="token token punctuation">(</span><span>friend_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            friends_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">friend</span><span class="token token string-interpolation interpolation punctuation">.</span><span class="token token string-interpolation interpolation">first_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> (ID: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">friend_id</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">)\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        friends_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"У вас пока нет друзей. Добавьте кого-нибудь!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Добавить друга"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'add_friend'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>friends_text</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> FRIENDS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">add_friend_request</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Введите ID друга, которого хотите добавить:"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> FRIENDS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">process_add_friend</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    friend_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">try</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        friend_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>friend_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        add_friend</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> friend_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Друг с ID </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">friend_id</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> успешно добавлен!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">except</span><span> ValueError</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Пожалуйста, введите корректный ID друга (только цифры)."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> show_friends</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных и другие подготовительные операции</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'daily_tasks'</span><span class="token token punctuation">,</span><span> show_daily_tasks</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'language'</span><span class="token token punctuation">,</span><span> change_language</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'premium'</span><span class="token token punctuation">,</span><span> premium_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'friends'</span><span class="token token punctuation">,</span><span> show_friends</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Другие состояния из предыдущих частей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            DAILY_TASKS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_daily_tasks</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            LANGUAGE</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>CallbackQueryHandler</span><span class="token token punctuation">(</span><span>set_language</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^lang_'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            PREMIUM</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>buy_premium</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^buy_premium$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>start</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^back_to_menu$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            FRIENDS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>add_friend_request</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^add_friend$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> process_add_friend</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>start</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^back_to_menu$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>PreCheckoutQueryHandler</span><span class="token token punctuation">(</span><span>precheckout_callback</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>successful_payment</span><span class="token token punctuation">,</span><span> successful_payment_callback</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта шестая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система ежедневных заданий, которая генерирует случайные задачи для игроков каждый день.</span></li>
<li index="1"><span>Мультиязычная поддержка с возможностью выбора языка (английский и русский).</span></li>
<li index="2"><span>Премиум-функции с интеграцией платежной системы Telegram.</span></li>
<li index="3"><span>Система друзей, позволяющая игрокам добавлять друг друга и видеть список своих друзей.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте новые таблицы в вашу базу данных SQLite:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>daily_tasks</code></span><span> (player_id, task, completed, date)</span></li>
<li index="1"><span><code>friends</code></span><span> (player_id, friend_id)</span></li>
</ul></span><span>
</span></li>
<li index="1"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="2"><span>Замените </span><span><code>"YOUR_PROVIDER_TOKEN"</code></span><span> на токен вашего платежного провайдера для Telegram платежей.</span></li>
<li index="3"><span>Интегрируйте этот код с предыдущими частями, обновив существующие функции и добавив новые обработчики в </span><span><code>ConversationHandler</code></span><span>.</span></li>
<li index="4"><span>Обновите функции </span><span><code>update_stats</code></span><span> и </span><span><code>show_stats</code></span><span> для работы с новой системой ежедневных заданий.</span></li>
</ol>
<span>Эти дополнения сделают вашего бота для игры в "Крестики-нолики" еще более привлекательным и интерактивным. Игроки теперь могут выполнять ежедневные задания, общаться с друзьями, использовать бота на своем родном языке и получать доступ к премиум-функциям. Это создает более глубокий и увлекательный игровой опыт, который может удержать игроков на более длительный срок.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напиши седьмую  часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим седьмую часть, которая добавит еще больше интересных функций и улучшений к нашему боту для игры в "Крестики-нолики". В этой части мы реализуем систему уровней и опыта, мини-игры, систему подсказок и интеграцию с социальными сетями.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>LEVELS</span><span class="token token punctuation">,</span><span> MINIGAMES</span><span class="token token punctuation">,</span><span> HINTS</span><span class="token token punctuation">,</span><span> SOCIAL </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">16</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_level</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT level, experience FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_experience</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> exp_gain</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    level</span><span class="token token punctuation">,</span><span> exp </span><span class="token token operator">=</span><span> get_player_level</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    new_exp </span><span class="token token operator">=</span><span> exp </span><span class="token token operator">+</span><span> exp_gain
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    new_level </span><span class="token token operator">=</span><span> level
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">while</span><span> new_exp </span><span class="token token operator">&gt;=</span><span> level </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">:</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Простая формула для повышения уровня</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_exp </span><span class="token token operator">-=</span><span> level </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_level </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET level=?, experience=? WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>new_level</span><span class="token token punctuation">,</span><span> new_exp</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> new_level</span><span class="token token punctuation">,</span><span> new_exp
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT hints FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> hint_change</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET hints = hints + ? WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>hint_change</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_level</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    level</span><span class="token token punctuation">,</span><span> exp </span><span class="token token operator">=</span><span> get_player_level</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    exp_to_next </span><span class="token token operator">=</span><span> level </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span> </span><span class="token token operator">-</span><span> exp
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ваш текущий уровень: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">level</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                              </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Опыт: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">exp</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">/</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">level </span><span class="token token string-interpolation interpolation operator">*</span><span class="token token string-interpolation interpolation"> </span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">100</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                              </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"До следующего уровня: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">exp_to_next</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> опыта"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">minigames_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Угадай число"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'game_guess'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Камень, ножницы, бумага"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'game_rps'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите мини-игру:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MINIGAMES
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">play_guess_number</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'guess_number'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'guess_attempts'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Я загадал число от 1 до 100. Попробуйте угадать!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MINIGAMES
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">handle_guess</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    guess </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    number </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'guess_number'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'guess_attempts'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">+=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> guess </span><span class="token token operator">&lt;</span><span> number</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Больше!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> guess </span><span class="token token operator">&gt;</span><span> number</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Меньше!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        attempts </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'guess_attempts'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        exp_gain </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">max</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">50</span><span> </span><span class="token token operator">-</span><span> attempts </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Чем меньше попыток, тем больше опыта</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_level</span><span class="token token punctuation">,</span><span> new_exp </span><span class="token token operator">=</span><span> update_player_experience</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span class="token token punctuation">,</span><span> exp_gain</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Поздравляем! Вы угадали число за </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">attempts</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> попыток.\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                                  </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Получено </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">exp_gain</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> опыта!\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                                  </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ваш новый уровень: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">new_level</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">, опыт: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">new_exp</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MINIGAMES
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">play_rock_paper_scissors</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Камень"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'rps_rock'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Ножницы"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'rps_scissors'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Бумага"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'rps_paper'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите свой ход:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MINIGAMES
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">handle_rps</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_choice </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    bot_choice </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>choice</span><span class="token token punctuation">(</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'rock'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'paper'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'scissors'</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> determine_rps_winner</span><span class="token token punctuation">(</span><span>player_choice</span><span class="token token punctuation">,</span><span> bot_choice</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'win'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        exp_gain </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Вы выиграли!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> result </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'lose'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        exp_gain </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Вы проиграли."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        exp_gain </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ничья!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    new_level</span><span class="token token punctuation">,</span><span> new_exp </span><span class="token token operator">=</span><span> update_player_experience</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span class="token token punctuation">,</span><span> exp_gain</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">message</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nВаш выбор: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">player_choice</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">, выбор бота: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">bot_choice</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                            </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Получено </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">exp_gain</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> опыта!\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                            </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ваш новый уровень: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">new_level</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">, опыт: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">new_exp</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">determine_rps_winner</span><span class="token token punctuation">(</span><span>player</span><span class="token token punctuation">,</span><span> bot</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> player </span><span class="token token operator">==</span><span> bot</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'draw'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> </span><span class="token token punctuation">(</span><span>player </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'rock'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> bot </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'scissors'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">or</span><span> \
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>         </span><span class="token token punctuation">(</span><span>player </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'scissors'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> bot </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'paper'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">or</span><span> \
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>         </span><span class="token token punctuation">(</span><span>player </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'paper'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> bot </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'rock'</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'win'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'lose'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_hints</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    hints </span><span class="token token operator">=</span><span> get_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Использовать подсказку"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'use_hint'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Купить подсказки"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'buy_hints'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"У вас </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">hints</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> подсказок.\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                              </span><span class="token token" style="color: rgb(181, 189, 104);">"Что вы хотите сделать?"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> HINTS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">use_hint</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    hints </span><span class="token token operator">=</span><span> get_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> hints </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token operator">-</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика предоставления подсказки в текущей игре</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        hint_message </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Подсказка: Попробуйте сделать ход в центр доски."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Подсказка использована. Осталось подсказок: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">hints </span><span class="token token string-interpolation interpolation operator">-</span><span class="token token string-interpolation interpolation"> </span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">1</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">hint_message</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"У вас нет доступных подсказок. Купите подсказки в магазине."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">buy_hints</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"5 подсказок - $0.99"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'buy_5_hints'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"20 подсказок - $2.99"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'buy_20_hints'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_hints'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите пакет подсказок:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> HINTS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">process_hint_purchase</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть интеграция с платежной системой</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># После успешной оплаты:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'buy_5_hints'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Вы успешно приобрели 5 подсказок!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> query</span><span class="token token punctuation">.</span><span>data </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'buy_20_hints'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update_player_hints</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Вы успешно приобрели 20 подсказок!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">social_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Поделиться результатом"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'share_result'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Пригласить друга"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'invite_friend'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите действие:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> SOCIAL
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">share_result</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    level</span><span class="token token punctuation">,</span><span> exp </span><span class="token token operator">=</span><span> get_player_level</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    share_text </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Я достиг </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">level</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> уровня в игре Крестики-нолики! Присоединяйся: [ссылка на бота]"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику для шеринга в различные соц. сети</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Поделитесь этим текстом в социальных сетях:\n\n</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">share_text</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">invite_friend</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    invite_link </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>bot</span><span class="token token punctuation">.</span><span>create_chat_invite_link</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">.</span><span>effective_chat</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Отправьте эту ссылку другу, чтобы пригласить его в игру:\n</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">invite_link</span><span class="token token string-interpolation interpolation punctuation">.</span><span class="token token string-interpolation interpolation">invite_link</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных и другие подготовительные операции</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'level'</span><span class="token token punctuation">,</span><span> show_level</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'minigames'</span><span class="token token punctuation">,</span><span> minigames_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'hints'</span><span class="token token punctuation">,</span><span> show_hints</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'social'</span><span class="token token punctuation">,</span><span> social_menu</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Другие состояния из предыдущих частей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            LEVELS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_level</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MINIGAMES</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>play_guess_number</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^game_guess$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>play_rock_paper_scissors</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^game_rps$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>regex</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">r'^\d+$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> handle_guess</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>handle_rps</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^rps_'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            HINTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>use_hint</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^use_hint$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>buy_hints</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^buy_hints$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>process_hint_purchase</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^buy_\d+_hints$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            SOCIAL</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>share_result</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^share_result$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>invite_friend</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^invite_friend$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта седьмая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система уровней и опыта, которая позволяет игрокам повышать свой уровень и получать опыт за различные действия.</span></li>
<li index="1"><span>Мини-игры "Угадай число" и "Камень, ножницы, бумага", которые позволяют игрокам заработать дополнительный опыт.</span></li>
<li index="2"><span>Система подсказок, которую игроки могут использовать во время игры в "Крестики-нолики".</span></li>
<li index="3"><span>Возможность покупки дополнительных подсказок.</span></li>
<li index="4"><span>Интеграция с социальными сетями для шеринга результатов и приглашения друзей.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте новые поля в таблицу </span><span><code>players</code></span><span> вашей базы данных SQLite:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>level</code></span><span> (INTEGER)</span></li>
<li index="1"><span><code>experience</code></span><span> (INTEGER)</span></li>
<li index="2"><span><code>hints</code></span><span> (INTEGER)</span></li>
</ul></span><span>
</span></li>
<li index="1"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="2"><span>Интегрируйте этот код с предыдущими частями, обновив существующие функции и добавив новые обработчики в </span><span><code>ConversationHandler</code></span><span>.</span></li>
<li index="3"><span>Реализуйте логику для предоставления подсказок в игре "Крестики-нолики".</span></li>
<li index="4"><span>Добавьте интеграцию с платежной системой для покупки подсказок.</span></li>
<li index="5"><span>Реализуйте полноценную интеграцию с социальными сетями для шеринга результатов.</span></li>
</ol>
<span>Эти дополнения сделают вашего бота для игры в "Крестики-нолики" еще более увлекательным и интеракт</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напиши восьмую  часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим восьмую часть, которая добавит еще больше глубины и интерактивности к нашему боту для игры в "Крестики-нолики". В этой части мы реализуем систему достижений, еженедельные турниры, кастомизацию игрового поля и систему кланов.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> datetime </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> datetime</span><span class="token token punctuation">,</span><span> timedelta
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>ACHIEVEMENTS</span><span class="token token punctuation">,</span><span> TOURNAMENTS</span><span class="token token punctuation">,</span><span> CUSTOMIZATION</span><span class="token token punctuation">,</span><span> CLANS </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">24</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT achievement FROM achievements WHERE player_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>row</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> row </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> achievements
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">add_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO achievements (player_id, achievement, date) VALUES (?, ?, ?)"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">,</span><span> datetime</span><span class="token token punctuation">.</span><span>now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT board_theme, x_symbol, o_symbol FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"default"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"X"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"O"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> board_theme</span><span class="token token punctuation">,</span><span> x_symbol</span><span class="token token punctuation">,</span><span> o_symbol</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET board_theme=?, x_symbol=?, o_symbol=? WHERE id=?"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>board_theme</span><span class="token token punctuation">,</span><span> x_symbol</span><span class="token token punctuation">,</span><span> o_symbol</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_clan</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT clan_id FROM clan_members WHERE player_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token boolean">None</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">create_clan</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> clan_name</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO clans (name, leader_id) VALUES (?, ?)"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>clan_name</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    clan_id </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>lastrowid
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO clan_members (clan_id, player_id) VALUES (?, ?)"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>clan_id</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> clan_id
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_achievements</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievement_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши достижения:\n\n"</span><span> </span><span class="token token operator">+</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"\n"</span><span class="token token punctuation">.</span><span>join</span><span class="token token punctuation">(</span><span>achievements</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievement_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"У вас пока нет достижений. Продолжайте играть, чтобы получить их!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>achievement_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">check_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь можно добавить логику проверки различных достижений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Например:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    games_played </span><span class="token token operator">=</span><span> get_games_played</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> games_played </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"100 игр сыграно"</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        add_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"100 игр сыграно"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Поздравляем! Вы получили достижение '100 игр сыграно'!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token boolean">None</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">tournaments_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    current_tournament </span><span class="token token operator">=</span><span> get_current_tournament</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> current_tournament</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Присоединиться к турниру"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'join_tournament'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Таблица лидеров"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'tournament_leaderboard'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Следующий турнир"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'next_tournament'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Меню турниров:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> TOURNAMENTS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_current_tournament</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика получения информации о текущем турнире</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Например, проверка в базе данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token boolean">None</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Заглушка</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">join_tournament</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    tournament </span><span class="token token operator">=</span><span> get_current_tournament</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> tournament</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Логика присоединения к турниру</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Вы успешно присоединились к турниру!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"В данный момент нет активных турниров."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">tournament_leaderboard</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика получения и отображения таблицы лидеров турнира</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    leaderboard_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Таблица лидеров текущего турнира:\n\n1. Игрок1 - 100 очков\n2. Игрок2 - 90 очков\n3. Игрок3 - 85 очков"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span>leaderboard_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">customization_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    board_theme</span><span class="token token punctuation">,</span><span> x_symbol</span><span class="token token punctuation">,</span><span> o_symbol </span><span class="token token operator">=</span><span> get_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Изменить тему доски"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'change_board_theme'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Изменить символ X"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'change_x_symbol'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Изменить символ O"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'change_o_symbol'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Текущая настройка:\nТема доски: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">board_theme</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nСимвол X: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">x_symbol</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nСимвол O: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">o_symbol</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                              reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CUSTOMIZATION
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">change_board_theme</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    themes </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">"default"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"dark"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"light"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"colorful"</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span>theme</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'set_theme_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">theme</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> theme </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> themes</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите тему доски:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CUSTOMIZATION
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">change_symbol</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    symbol_type </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'changing_symbol'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> symbol_type
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Введите новый символ для </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">symbol_type</span><span class="token token string-interpolation interpolation punctuation">.</span><span class="token token string-interpolation interpolation">upper</span><span class="token token string-interpolation interpolation punctuation">(</span><span class="token token string-interpolation interpolation punctuation">)</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">:"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CUSTOMIZATION
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">set_customization</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'changing_symbol'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        symbol_type </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'changing_symbol'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_symbol </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        board_theme</span><span class="token token punctuation">,</span><span> x_symbol</span><span class="token token punctuation">,</span><span> o_symbol </span><span class="token token operator">=</span><span> get_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> symbol_type </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'x'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            x_symbol </span><span class="token token operator">=</span><span> new_symbol
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            o_symbol </span><span class="token token operator">=</span><span> new_symbol
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">del</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'changing_symbol'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        board_theme </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        x_symbol</span><span class="token token punctuation">,</span><span> o_symbol </span><span class="token token operator">=</span><span> get_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">:</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update_player_customization</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> board_theme</span><span class="token token punctuation">,</span><span> x_symbol</span><span class="token token punctuation">,</span><span> o_symbol</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> customization_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">clans_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    clan_id </span><span class="token token operator">=</span><span> get_player_clan</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> clan_id</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Информация о клане"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'clan_info'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Покинуть клан"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'leave_clan'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Создать клан"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'create_clan'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Присоединиться к клану"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'join_clan'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Меню кланов:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CLANS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">create_clan_request</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Введите название для вашего нового клана:"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CLANS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">process_create_clan</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    clan_name </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    clan_id </span><span class="token token operator">=</span><span> create_clan</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> clan_name</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Клан '</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">clan_name</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">' успешно создан! Ваш ID клана: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">clan_id</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> clans_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">join_clan_request</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Введите ID клана, к которому хотите присоединиться:"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> CLANS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">process_join_clan</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    clan_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>text
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика присоединения к клану</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Вы успешно присоединились к клану с ID </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">clan_id</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> clans_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных и другие подготовительные операции</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'achievements'</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'tournaments'</span><span class="token token punctuation">,</span><span> tournaments_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'customization'</span><span class="token token punctuation">,</span><span> customization_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'clans'</span><span class="token token punctuation">,</span><span> clans_menu</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Другие состояния из предыдущих частей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            ACHIEVEMENTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            TOURNAMENTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>join_tournament</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^join_tournament$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>tournament_leaderboard</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^tournament_leaderboard$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            CUSTOMIZATION</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>change_board_theme</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^change_board_theme$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>change_symbol</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^change_[xo]_symbol$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>set_customization</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^set_theme_'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> set_customization</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            CLANS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>create_clan_request</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^create_clan$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>join_clan_request</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^join_clan$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> process_create_clan</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта восьмая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система достижений, которая отслеживает прогресс игрока и награждает его за определенные достижения.</span></li>
<li index="1"><span>Еженедельные турниры, где игроки могут соревноваться друг с другом.</span></li>
<li index="2"><span>Кастомизация игрового поля, позволяющая игрокам выбирать тему доски и символы для X и O.</span></li>
<li index="3"><span>Система кланов, где игроки могут создавать свои кланы или присоединяться к существующим.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте новые таблицы в вашу базу данных SQLite:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>achievements</code></span><span> (player_id, achievement, date)</span></li>
<li index="1"><span><code>tournaments</code></span><span> (id, start_date, end_date, status)</span></li>
<li index="2"><span><code>tournament_participants</code></span><span> (tournament_id, player_id, score)</span></li>
<li index="3"><span><code>clans</code></span><span> (id, name, leader_id, created_at)</span></li>
<li index="4"><span><code>clan_members</code></span><span> (clan_id, player_id, joined_at)</span></li>
</ul></span><span>
</span></li>
<li index="1"><span>Добавьте новые поля в таблицу </span><span><code>players</code></span><span>:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>board_theme</code></span></li>
<li index="1"><span><code>x_symbol</code></span></li>
<li index="2"><span><code>o_symbol</code></span></li>
</ul></span><span>
</span></li>
<li index="2"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="3"><span>Интегрируйте этот код с предыдущими частями, обновив существующие функции и добавив новые обработчики в </span><span><code>ConversationHandler</code></span><span>.</span></li>
<li index="4"><span>Реализуйте недостающие функции, такие как </span><span><code>get_games_played</code></span><span>, </span><span><code>get_current_tournament</code></span><span>, и логику для турниров и кланов.</span></li>
</ol>
<span>Эти дополнения сделают вашего бота для игры в "Крестики-нолики" еще более увлекательным и социальным. Игроки теперь могут стремиться к достижениям, участвовать в турнирах, настраивать внешний вид игры под себя и объединяться в кланы. Это создает долгосрочную мотивацию для игроков и поощряет социальное взаимод</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-b border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напиши девятую часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим девятую часть, которая добавит еще больше функциональности и глубины к нашему боту для игры в "Крестики-нолики". В этой части мы реализуем систему квестов, ежедневные награды, режим игры с несколькими досками одновременно и интеграцию с внешними API для дополнительных функций.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> datetime </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> datetime</span><span class="token token punctuation">,</span><span> timedelta
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> requests
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>QUESTS</span><span class="token token punctuation">,</span><span> DAILY_REWARDS</span><span class="token token punctuation">,</span><span> MULTI_BOARD</span><span class="token token punctuation">,</span><span> API_INTEGRATION </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">24</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">28</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_quests</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT quest_id, description, progress, goal FROM quests WHERE player_id=? AND completed=0"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    quests </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> quests
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_quest_progress</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> quest_id</span><span class="token token punctuation">,</span><span> progress</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE quests SET progress=? WHERE player_id=? AND quest_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>progress</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">,</span><span> quest_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_daily_reward_status</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT last_reward_date FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        last_reward_date </span><span class="token token operator">=</span><span> datetime</span><span class="token token punctuation">.</span><span>strptime</span><span class="token token punctuation">(</span><span>result</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"%Y-%m-%d"</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span>date</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> datetime</span><span class="token token punctuation">.</span><span>now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span>date</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">&gt;</span><span> last_reward_date
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> </span><span class="token token boolean">True</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_daily_reward_status</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET last_reward_date=? WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>datetime</span><span class="token token punctuation">.</span><span>now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span>date</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">quests_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    quests </span><span class="token token operator">=</span><span> get_player_quests</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> quests</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        quest_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши текущие задания:\n\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> quest_id</span><span class="token token punctuation">,</span><span> description</span><span class="token token punctuation">,</span><span> progress</span><span class="token token punctuation">,</span><span> goal </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> quests</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            quest_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">description</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">progress</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">/</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">goal</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        quest_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"У вас нет активных заданий. Возьмите новое задание!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Взять новое задание"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'new_quest'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>quest_text</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> QUESTS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">new_quest</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика генерации нового случайного задания</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    quest_types </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выиграйте {} игр"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Сыграйте {} игр"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Наберите {} очков"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выиграйте {} игр подряд"</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    quest_type</span><span class="token token punctuation">,</span><span> goal </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>choice</span><span class="token token punctuation">(</span><span>quest_types</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    description </span><span class="token token operator">=</span><span> quest_type</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">format</span><span class="token token punctuation">(</span><span>goal</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO quests (player_id, description, progress, goal) VALUES (?, ?, 0, ?)"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> description</span><span class="token token punctuation">,</span><span> goal</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Новое задание получено: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">description</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> QUESTS
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">daily_rewards</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> get_daily_reward_status</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Генерация случайной награды</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rewards </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"монет"</span><span class="token token punctuation">,</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">50</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">200</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"опыта"</span><span class="token token punctuation">,</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">500</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"подсказок"</span><span class="token token punctuation">,</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        reward_type</span><span class="token token punctuation">,</span><span> amount </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>choice</span><span class="token token punctuation">(</span><span>rewards</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Обновление данных игрока с полученной наградой</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update_player_reward</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> reward_type</span><span class="token token punctuation">,</span><span> amount</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update_daily_reward_status</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Вы получили ежедневную награду: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">amount</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">reward_type</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Вы уже получили сегодняшнюю награду. Приходите завтра!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_reward</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> reward_type</span><span class="token token punctuation">,</span><span> amount</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> reward_type </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"монет"</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET coins = coins + ? WHERE id = ?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>amount</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> reward_type </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"опыта"</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET experience = experience + ? WHERE id = ?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>amount</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> reward_type </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"подсказок"</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET hints = hints + ? WHERE id = ?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>amount</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">multi_board_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"2 доски"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_2'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"3 доски"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_3'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"4 доски"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_4'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите количество досок для игры:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MULTI_BOARD
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_multi_board_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    num_boards </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token operator">-</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_game'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> _ </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span>num_boards</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    show_multi_board_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MULTI_BOARD
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_multi_board_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    boards </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_game'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> board_index</span><span class="token token punctuation">,</span><span> board </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>boards</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">9</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            row </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'mb_move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">board_index</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token operator">+</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'mb_move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">board_index</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">1</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                InlineKeyboardButton</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">[</span><span>i</span><span class="token token operator">+</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f'mb_move_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">board_index</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">_</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i</span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">2</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            keyboard</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span>row</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> board_index </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">len</span><span class="token token punctuation">(</span><span>boards</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            keyboard</span><span class="token token punctuation">.</span><span>append</span><span class="token token punctuation">(</span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"---"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'separator'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Игра на нескольких досках:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">handle_multi_board_move</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    board_index</span><span class="token token punctuation">,</span><span> move </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">map</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">,</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">:</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    boards </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board_game'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> boards</span><span class="token token punctuation">[</span><span>board_index</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        boards</span><span class="token token punctuation">[</span><span>board_index</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        winner </span><span class="token token operator">=</span><span> check_winner</span><span class="token token punctuation">(</span><span>boards</span><span class="token token punctuation">[</span><span>board_index</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Вы выиграли на доске </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">board_index </span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation"> </span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">1</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Ход бота на всех досках</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> board </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>boards</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> board</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                bot_move </span><span class="token token operator">=</span><span> get_bot_move</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                boards</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span>bot_move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> check_winner</span><span class="token token punctuation">(</span><span>boards</span><span class="token token punctuation">[</span><span>i</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                    query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Бот выиграл на доске </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">i </span><span class="token token string-interpolation interpolation operator">+</span><span class="token token string-interpolation interpolation"> </span><span class="token token string-interpolation interpolation" style="color: rgb(222, 147, 95);">1</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">!"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        show_multi_board_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Эта клетка уже занята. Выберите другую."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MULTI_BOARD
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">api_integration_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Погода"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'weather_api'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Случайный факт"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'fact_api'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите дополнительную функцию:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> API_INTEGRATION
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_weather</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должен быть ваш API ключ для сервиса погоды</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    API_KEY </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_WEATHER_API_KEY"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    city </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Moscow"</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Можно запрашивать у пользователя</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    url </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"http://api.openweathermap.org/data/2.5/weather?q=</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">city</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">&amp;appid=</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">API_KEY</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">&amp;units=metric"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    response </span><span class="token token operator">=</span><span> requests</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span>url</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    data </span><span class="token token operator">=</span><span> response</span><span class="token token punctuation">.</span><span>json</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> response</span><span class="token token punctuation">.</span><span>status_code </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">200</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        temp </span><span class="token token operator">=</span><span> data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'main'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'temp'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        description </span><span class="token token operator">=</span><span> data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'weather'</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'description'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Погода в </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">city</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">temp</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">°C, </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">description</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Не удалось получить информацию о погоде."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_random_fact</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    url </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"https://uselessfacts.jsph.pl/random.json?language=en"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    response </span><span class="token token operator">=</span><span> requests</span><span class="token token punctuation">.</span><span>get</span><span class="token token punctuation">(</span><span>url</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    data </span><span class="token token operator">=</span><span> response</span><span class="token token punctuation">.</span><span>json</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> response</span><span class="token token punctuation">.</span><span>status_code </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">200</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fact </span><span class="token token operator">=</span><span> data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'text'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Случайный факт: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">fact</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Не удалось получить случайный факт."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных и другие подготовительные операции</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'quests'</span><span class="token token punctuation">,</span><span> quests_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'daily_rewards'</span><span class="token token punctuation">,</span><span> daily_rewards</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'multi_board'</span><span class="token token punctuation">,</span><span> multi_board_game</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'api_integration'</span><span class="token token punctuation">,</span><span> api_integration_menu</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Другие состояния из предыдущих частей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            QUESTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>new_quest</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^new_quest$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^back_to_menu$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MULTI_BOARD</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>start_multi_board_game</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^multi_board_'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>handle_multi_board_move</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^mb_move_'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            API_INTEGRATION</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>get_weather</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^weather_api$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>get_random_fact</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^fact_api$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^back_to_menu$'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта девятая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система квестов, которая дает игрокам дополнительные задания для выполнения.</span></li>
<li index="1"><span>Ежедневные награды, мотивирующие игроков возвращаться в игру каждый день.</span></li>
<li index="2"><span>Режим игры с несколькими досками одновременно, что добавляет сложности и разнообразия в геймплей.</span></li>
<li index="3"><span>Интеграция с внешними API для предоставления дополнительной информации (погода, случайные факты).</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте новые таблицы в вашу базу данных SQLite:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>quests</code></span><span> (quest_id, player_id, description, progress, goal, completed)</span></li>
</ul></span><span>
</span></li>
<li index="1"><span>Добавьте новое поле в таблицу </span><span><code>players</code></span><span>:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>last_reward_date</code></span></li>
</ul></span><span>
</span></li>
<li index="2"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="3"><span>Замените </span><span><code>"YOUR_WEATHER_API_KEY"</code></span><span> на ваш API ключ для сервиса погоды (например, OpenWeatherMap).</span></li>
<li index="4"><span>Установите библиотеку </span><span><code>requests</code></span><span>, если она еще не установлена: </span><span><code>pip install requests</code></span><span>.</span></li>
<li index="5"><span>Интегрируйте этот код с предыдущими частями, обновив существующие функции и добавив новые обработчики в </span><span><code>ConversationHandler</code></span><span>.</span></li>
</ol>
<span>Эти дополнения сделают вашего бота для игры в "Крестики-нолики" еще более разнообразным и интересным. Игроки теперь могут выполнять квесты, получать ежедневные награды, играть в более сложные версии игры и получать дополнительную информацию через интеграцию с API. Это создает больше причин для игроков регулярно возвращаться в игру и проводить в ней больше времени.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"></div></div></div></div></div></div></div></div><div><div><div></div><div></div><div class="pb-lg border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="md:grid grid-cols-12 gap-xl"><div class="col-span-8"><div class="my-md md:my-lg"><div class="whitespace-pre-line break-words [word-break:break-word] default font-display text-3xl font-regular text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">напиши заключительную десятую  часть</div></div><div><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center"><div class="text-textMain dark:text-textMainDark flex aspect-[60/74] items-center justify-start overflow-hidden" style="height: 24px;"><svg width="60" height="74" viewBox="0 0 60 74" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto shrink-0 transform-gpu"><path d="M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839" stroke="currentColor" stroke-width="4.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Answer</div></div></div></div></div><div class="relative default font-sans text-base text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto"><div><div class="prose dark:prose-invert inline leading-normal break-words min-w-0 [word-break:break-word]"><span>Конечно! Давайте создадим заключительную, десятую часть нашего бота для игры в "Крестики-нолики". В этой части мы добавим систему рейтинговых игр, интеграцию с искусственным интеллектом для улучшенного бота, систему достижений и наград, а также улучшенную аналитику для игроков.</span>
<div class="w-full max-w-[90vw]"><pre class="not-prose w-full overflow-hidden rounded font-mono text-sm font-extralight"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div><div class="text-textOff dark:text-textOffDark bg-offsetPlus dark:bg-offsetPlusDark py-xs px-sm z-10 inline-block rounded-br rounded-tl-[3px] font-thin">python</div></div><div class="sc-gEvDqW bMrXuF"><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre;"><code style="font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px; white-space: pre-wrap;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> Update</span><span class="token token punctuation">,</span><span> InlineKeyboardButton</span><span class="token token punctuation">,</span><span> InlineKeyboardMarkup
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> telegram</span><span class="token token punctuation">.</span><span>ext </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> CommandHandler</span><span class="token token punctuation">,</span><span> CallbackQueryHandler</span><span class="token token punctuation">,</span><span> ConversationHandler</span><span class="token token punctuation">,</span><span> MessageHandler</span><span class="token token punctuation">,</span><span> Filters
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> game_data_init </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> get_game_data</span><span class="token token punctuation">,</span><span> initialize_game_data</span><span class="token token punctuation">,</span><span> update_game_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> sqlite3
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> random
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> datetime </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> datetime</span><span class="token token punctuation">,</span><span> timedelta
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> requests
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> tensorflow </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> tf  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Предполагается, что мы используем TensorFlow для ИИ</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Добавим новые состояния</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>RANKED_GAME</span><span class="token token punctuation">,</span><span> AI_GAME</span><span class="token token punctuation">,</span><span> ACHIEVEMENTS</span><span class="token token punctuation">,</span><span> ANALYTICS </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">range</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">28</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">32</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для работы с базой данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_rating</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT rating FROM players WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    result </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> result</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">]</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> result </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">update_player_rating</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> new_rating</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"UPDATE players SET rating=? WHERE id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>new_rating</span><span class="token token punctuation">,</span><span> player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"SELECT achievement, date FROM achievements WHERE player_id=?"</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchall</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> achievements
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">add_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"INSERT INTO achievements (player_id, achievement, date) VALUES (?, ?, ?)"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>              </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">,</span><span> datetime</span><span class="token token punctuation">.</span><span>now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>commit</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Функции для бота</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">ranked_game_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    rating </span><span class="token token operator">=</span><span> get_player_rating</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Начать рейтинговую игру"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'start_ranked_game'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Таблица лидеров"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'rating_leaderboard'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ваш текущий рейтинг: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">rating</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nЧто вы хотите сделать?"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> RANKED_GAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_ranked_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть логика поиска соперника с похожим рейтингом</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Для простоты, сейчас мы просто начнем игру с ботом</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    show_board</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> RANKED_GAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">handle_ranked_move</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    move </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">int</span><span class="token token punctuation">(</span><span>query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    board </span><span class="token token operator">=</span><span> context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game'</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> board</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        board</span><span class="token token punctuation">[</span><span>move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        winner </span><span class="token token operator">=</span><span> check_winner</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> end_ranked_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">,</span><span> winner</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Ход ИИ</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        ai_move </span><span class="token token operator">=</span><span> get_ai_move</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        board</span><span class="token token punctuation">[</span><span>ai_move</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        winner </span><span class="token token operator">=</span><span> check_winner</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> end_ranked_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">,</span><span> winner</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        show_board</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Эта клетка уже занята. Выберите другую."</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> RANKED_GAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">end_ranked_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">,</span><span> winner</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    old_rating </span><span class="token token operator">=</span><span> get_player_rating</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> winner </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'X'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating_change </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">30</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_rating </span><span class="token token operator">=</span><span> old_rating </span><span class="token token operator">+</span><span> rating_change
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Вы выиграли! Ваш рейтинг увеличился на </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">rating_change</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> очков."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">elif</span><span> winner </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'O'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating_change </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">15</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">25</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_rating </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">max</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> old_rating </span><span class="token token operator">-</span><span> rating_change</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Вы проиграли. Ваш рейтинг уменьшился на </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">rating_change</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> очков."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        rating_change </span><span class="token token operator">=</span><span> random</span><span class="token token punctuation">.</span><span>randint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        new_rating </span><span class="token token operator">=</span><span> old_rating </span><span class="token token operator">+</span><span> rating_change
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        message </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"Ничья! Ваш рейтинг увеличился на </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">rating_change</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> очков."</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update_player_rating</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> new_rating</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>callback_query</span><span class="token token punctuation">.</span><span>edit_message_text</span><span class="token token punctuation">(</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">message</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\nНовый рейтинг: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">new_rating</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    check_rating_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> new_rating</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">check_rating_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> rating</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1200</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Восходящая звезда"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1500</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Опытный игрок"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">2000</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Мастер"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">2500</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Гроссмейстер"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> threshold</span><span class="token token punctuation">,</span><span> achievement </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> rating </span><span class="token token operator">&gt;=</span><span> threshold </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">and</span><span> achievement </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">not</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            add_achievement</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span> achievement</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">ai_game_menu</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    keyboard </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Легкий ИИ"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'ai_easy'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Средний ИИ"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'ai_medium'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Сложный ИИ"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'ai_hard'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">[</span><span>InlineKeyboardButton</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Назад"</span><span class="token token punctuation">,</span><span> callback_data</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'back_to_menu'</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    reply_markup </span><span class="token token operator">=</span><span> InlineKeyboardMarkup</span><span class="token token punctuation">(</span><span>keyboard</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"Выберите уровень сложности ИИ:"</span><span class="token token punctuation">,</span><span> reply_markup</span><span class="token token operator">=</span><span>reply_markup</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> AI_GAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">start_ai_game</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>callback_query
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    query</span><span class="token token punctuation">.</span><span>answer</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    difficulty </span><span class="token token operator">=</span><span> query</span><span class="token token punctuation">.</span><span>data</span><span class="token token punctuation">.</span><span>split</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'_'</span><span class="token token punctuation">)</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'ai_difficulty'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> difficulty
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    context</span><span class="token token punctuation">.</span><span>user_data</span><span class="token token punctuation">[</span><span class="token token" style="color: rgb(181, 189, 104);">'game'</span><span class="token token punctuation">]</span><span> </span><span class="token token operator">=</span><span> create_board</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    show_board</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> AI_GAME
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">get_ai_move</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">,</span><span> difficulty</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'medium'</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Здесь должна быть реализация ИИ с использованием TensorFlow</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Для простоты, сейчас мы используем случайный ход</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    empty_cells </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">[</span><span>i </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> i</span><span class="token token punctuation">,</span><span> cell </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">enumerate</span><span class="token token punctuation">(</span><span>board</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> cell </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> random</span><span class="token token punctuation">.</span><span>choice</span><span class="token token punctuation">(</span><span>empty_cells</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_achievements</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    achievements </span><span class="token token operator">=</span><span> get_player_achievements</span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievement_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"Ваши достижения:\n\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">for</span><span> achievement</span><span class="token token punctuation">,</span><span> date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">in</span><span> achievements</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            achievement_text </span><span class="token token operator">+=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"</span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">achievement</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);"> - получено </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">date</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">\n"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        achievement_text </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"У вас пока нет достижений. Продолжайте играть, чтобы получить их!"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>achievement_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">show_analytics</span><span class="token token punctuation">(</span><span>update</span><span class="token token punctuation">:</span><span> Update</span><span class="token token punctuation">,</span><span> context</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    player_id </span><span class="token token operator">=</span><span> update</span><span class="token token punctuation">.</span><span>effective_user</span><span class="token token punctuation">.</span><span class="token token" style="color: rgb(222, 147, 95);">id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Получаем статистику игрока</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn </span><span class="token token operator">=</span><span> sqlite3</span><span class="token token punctuation">.</span><span>connect</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'game_data.db'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c </span><span class="token token operator">=</span><span> conn</span><span class="token token punctuation">.</span><span>cursor</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    c</span><span class="token token punctuation">.</span><span>execute</span><span class="token token punctuation">(</span><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">"""
</span></span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        SELECT 
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">            COUNT(*) as total_games,
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">            SUM(CASE WHEN result = 'win' THEN 1 ELSE 0 END) as wins,
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">            SUM(CASE WHEN result = 'loss' THEN 1 ELSE 0 END) as losses,
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">            SUM(CASE WHEN result = 'draw' THEN 1 ELSE 0 END) as draws,
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">            AVG(CASE WHEN result = 'win' THEN 1 WHEN result = 'loss' THEN 0 ELSE 0.5 END) as win_rate
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        FROM games
</span><span class="token token triple-quoted-string" style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">        WHERE player_id = ?
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">    """</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span>player_id</span><span class="token token punctuation">,</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    stats </span><span class="token token operator">=</span><span> c</span><span class="token token punctuation">.</span><span>fetchone</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conn</span><span class="token token punctuation">.</span><span>close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_games</span><span class="token token punctuation">,</span><span> wins</span><span class="token token punctuation">,</span><span> losses</span><span class="token token punctuation">,</span><span> draws</span><span class="token token punctuation">,</span><span> win_rate </span><span class="token token operator">=</span><span> stats
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    win_rate </span><span class="token token operator">=</span><span> win_rate </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> win_rate </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">else</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    analytics_text </span><span class="token token operator">=</span><span> </span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">f"""Ваша статистика:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    Всего игр: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">total_games</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    Победы: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">wins</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    Поражения: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">losses</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    Ничьи: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">draws</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    Процент побед: </span><span class="token token string-interpolation interpolation punctuation">{</span><span class="token token string-interpolation interpolation">win_rate</span><span class="token token string-interpolation interpolation punctuation">:</span><span class="token token string-interpolation interpolation format-spec">.2f</span><span class="token token string-interpolation interpolation punctuation">}</span><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">%
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token string-interpolation" style="color: rgb(181, 189, 104);">    """</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    update</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">.</span><span>reply_text</span><span class="token token punctuation">(</span><span>analytics_text</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">return</span><span> MENU
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">def</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализация базы данных и другие подготовительные операции</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater </span><span class="token token operator">=</span><span> Updater</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"YOUR_BOT_TOKEN"</span><span class="token token punctuation">,</span><span> use_context</span><span class="token token operator">=</span><span class="token token boolean">True</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp </span><span class="token token operator">=</span><span> updater</span><span class="token token punctuation">.</span><span>dispatcher
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    conv_handler </span><span class="token token operator">=</span><span> ConversationHandler</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        entry_points</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        states</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            MENU</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>button</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'ranked'</span><span class="token token punctuation">,</span><span> ranked_game_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'ai_game'</span><span class="token token punctuation">,</span><span> ai_game_menu</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'achievements'</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'analytics'</span><span class="token token punctuation">,</span><span> show_analytics</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Другие состояния из предыдущих частей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            RANKED_GAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>start_ranked_game</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^start_ranked_game$'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>handle_ranked_move</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^move_'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            AI_GAME</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>start_ai_game</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^ai_'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                CallbackQueryHandler</span><span class="token token punctuation">(</span><span>handle_ranked_move</span><span class="token token punctuation">,</span><span> pattern</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">'^move_'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            </span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            ACHIEVEMENTS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_achievements</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>            ANALYTICS</span><span class="token token punctuation">:</span><span> </span><span class="token token punctuation">[</span><span>MessageHandler</span><span class="token token punctuation">(</span><span>Filters</span><span class="token token punctuation">.</span><span>text </span><span class="token token operator">&amp;</span><span> </span><span class="token token operator">~</span><span>Filters</span><span class="token token punctuation">.</span><span>command</span><span class="token token punctuation">,</span><span> show_analytics</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        fallbacks</span><span class="token token operator">=</span><span class="token token punctuation">[</span><span>CommandHandler</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'start'</span><span class="token token punctuation">,</span><span> start</span><span class="token token punctuation">)</span><span class="token token punctuation">]</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    dp</span><span class="token token punctuation">.</span><span>add_handler</span><span class="token token punctuation">(</span><span>conv_handler</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>start_polling</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updater</span><span class="token token punctuation">.</span><span>idle</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">if</span><span> __name__ </span><span class="token token operator">==</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'__main__'</span><span class="token token punctuation">:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    main</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span><button aria-label="Copy Code" type="button" class="sc-aYaIB gLXZEA"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="#c5c8c6"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div></pre></div>
<span>Эта заключительная, десятая часть добавляет следующие улучшения:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Система рейтинговых игр, где игроки могут соревноваться друг с другом и повышать свой рейтинг.</span></li>
<li index="1"><span>Интеграция с искусственным интеллектом (заготовка) для создания более сложного и интересного противника.</span></li>
<li index="2"><span>Расширенная система достижений, связанная с рейтингом игрока.</span></li>
<li index="3"><span>Улучшенная аналитика, предоставляющая игрокам подробную статистику их игр.</span></li>
</ol>
<span>Чтобы использовать этот код:</span>
<ol class="list-decimal marker:font-mono marker:text-sm pl-11">
<li index="0"><span>Добавьте новые поля в таблицу </span><span><code>players</code></span><span>:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>rating</code></span><span> (INTEGER)</span></li>
</ul></span><span>
</span></li>
<li index="1"><span>Создайте новую таблицу </span><span><code>games</code></span><span> для хранения истории игр:</span><span>
</span><span><ul class="list-disc">
<li index="0"><span><code>id</code></span><span> (INTEGER PRIMARY KEY)</span></li>
<li index="1"><span><code>player_id</code></span><span> (INTEGER)</span></li>
<li index="2"><span><code>result</code></span><span> (TEXT)</span></li>
<li index="3"><span><code>date</code></span><span> (DATETIME)</span></li>
</ul></span><span>
</span></li>
<li index="2"><span>Замените </span><span><code>"YOUR_BOT_TOKEN"</code></span><span> на токен вашего Telegram бота.</span></li>
<li index="3"><span>Установите TensorFlow, если планируете реализовать ИИ: </span><span><code>pip install tensorflow</code></span><span>.</span></li>
<li index="4"><span>Интегрируйте этот код с предыдущими частями, обновив существующие функции и добавив новые обработчики в </span><span><code>ConversationHandler</code></span><span>.</span></li>
<li index="5"><span>Реализуйте более сложную логику ИИ в функции </span><span><code>get_ai_move</code></span><span>, используя TensorFlow или другую библиотеку машинного обучения.</span></li>
</ol>
<span>Эти дополнения завершают создание полноценного и многофункционального бота для игры в "Крестики-нолики". Теперь у игроков есть возможность участвовать в рейтинговых играх, соревноваться с продвинутым ИИ, получать уникальные достижения и анализировать свою игровую статистику. Все эти функции создают глубокий и увлекательный игровой опыт, который может надолго удержать интерес игроков.</span><span class="mt-md block"></span>
<span>Поздравляю с завершением разработки этого сложного и многофункционального бота! Теперь у вас есть отличная основа, которую можно дальше улучшать и расширять по мере необходимости.</span></div></div></div></div></div><div class="mt-sm flex items-center justify-between"><div class="-ml-sm flex items-center gap-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="share" class="svg-inline--fa fa-share fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 240H192c-66.2 0-122 44.7-138.8 105.5C49.9 333.1 48 319.3 48 304c0-70.7 57.3-128 128-128H288h24c13.3 0 24-10.7 24-24V128 99.9L456.1 208 336 316.1V288 264c0-13.3-10.7-24-24-24H288zm0 48v48 16c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4s-19 16.6-19 29.2V80v48H240 176C78.8 128 0 206.8 0 304c0 78 38.6 126.2 68.7 152.1c4.1 3.5 8.1 6.6 11.7 9.3c3.2 2.4 6.2 4.4 8.9 6.2c4.5 3 8.3 5.1 10.8 6.5c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-6.8-3.6-13.2-8.3-18.1c-.5-.5-.9-.9-1.4-1.4c-2.4-2.3-5.1-5.1-7.7-8.6c-1.7-2.3-3.4-5-5-7.9c-5.3-9.7-9.5-22.9-9.5-40.2c0-53 43-96 96-96h48 48z"></path></svg><div class="text-align-center relative truncate leading-loose">Share</div></div></button><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm px-sm font-medium h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="repeat" class="svg-inline--fa fa-repeat fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M22.8 280C9.6 279.3-.6 268 0 254.8l.4-8C5.3 148.9 86.2 72 184.2 72H304l0-36.4C304 15.9 319.9 0 339.6 0c8.8 0 17.3 3.3 23.8 9.1l76.7 69c5.1 4.6 7.9 11 7.9 17.8s-2.9 13.3-7.9 17.8l-76.7 69c-6.5 5.9-15 9.1-23.8 9.1c-19.6 0-35.6-15.9-35.6-35.6V120H184.2C111.7 120 52 176.8 48.4 249.2l-.4 8C47.3 270.4 36 280.6 22.8 280zM352 128.5L388.1 96 352 63.5l0 65zM489.2 232c13.2 .7 23.4 11.9 22.8 25.2l-.4 8C506.7 363.1 425.8 440 327.8 440L208 440v36.4c0 19.6-15.9 35.6-35.6 35.6c-8.8 0-17.3-3.3-23.8-9.1l-76.7-69c-5.1-4.6-7.9-11-7.9-17.8s2.9-13.3 7.9-17.8l76.7-69c6.5-5.9 15-9.1 23.8-9.1c19.6 0 35.6 15.9 35.6 35.6V392l119.8 0c72.5 0 132.2-56.8 135.8-129.2l.4-8c.7-13.2 11.9-23.4 25.2-22.8zM160 383.5L123.9 416 160 448.5v-65z"></path></svg><div class="text-align-center relative truncate leading-loose">Rewrite</div></div></button></span></div><div class="flex items-center gap-x-xs"><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div></button><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div></button><div class=""><span><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-sm aspect-square h-8"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></span></div></div></div></div></div><div class=""><div class="mt-lg border-t pt-lg duration-1000 ease-out animate-in fade-in border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center justify-between border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark"><div class="mb-sm flex w-full items-center justify-between"><div class=""><div color="super" class="flex items-center space-x-sm"><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><div class="w-[24px]"><svg aria-hidden="true" focusable="false" data-prefix="fak" data-icon="new-thread" class="svg-inline--fa fa-new-thread fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M467.2 115.2H313.6v51.2H467.2V115.2zm25.6 153.6H262.4V320H492.8V268.8zM262.4 115.2H32v51.2H262.4V115.2zm0 102.4H32v51.2H262.4V217.6zm0 102.4H32v51.2H262.4V320zm230.4 51.2H262.4v51.2H492.8V371.2zM416 64H364.8V217.6H416V64z"></path></svg></div></div><div class="default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Related</div></div></div></div></div><div class="divide-y border-t border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="group flex cursor-pointer items-center justify-between py-sm"><div class="transition-all duration-300 md:group-hover:text-super md:dark:group-hover:text-superDark default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Каким образом может закончиться история в десятой части</div><div class="ml-sm flex-none transition-all duration-300 super font-sans text-base font-medium text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div><div class="group flex cursor-pointer items-center justify-between py-sm"><div class="transition-all duration-300 md:group-hover:text-super md:dark:group-hover:text-superDark default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Какие сюжетные повороты могут ожидать в десятой части</div><div class="ml-sm flex-none transition-all duration-300 super font-sans text-base font-medium text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div><div class="group flex cursor-pointer items-center justify-between py-sm"><div class="transition-all duration-300 md:group-hover:text-super md:dark:group-hover:text-superDark default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Как изменится финал для основных персонажей в десятой части</div><div class="ml-sm flex-none transition-all duration-300 super font-sans text-base font-medium text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div><div class="group flex cursor-pointer items-center justify-between py-sm"><div class="transition-all duration-300 md:group-hover:text-super md:dark:group-hover:text-superDark default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Какие новые открытия могут быть сделаны в десятой части</div><div class="ml-sm flex-none transition-all duration-300 super font-sans text-base font-medium text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div><div class="group flex cursor-pointer items-center justify-between py-sm"><div class="transition-all duration-300 md:group-hover:text-super md:dark:group-hover:text-superDark default font-sans text-base font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark">Какие испытания будут предстать перед героями в десятой части</div><div class="ml-sm flex-none transition-all duration-300 super font-sans text-base font-medium text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div></div></div></div></div></div><div class="col-span-4"><div class="sticky top-headerHeight mt-md flex max-h-[calc(100vh_-_74px)] flex-col pt-md"><div class="-mx-md -mt-md min-h-0 flex-1 overflow-y-auto px-md pt-md scrollbar-thin scrollbar-track-transparent scrollbar-thumb-idle dark:scrollbar-thumb-idleDark"><div class="border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div><div class="mb-sm w-full select-none rounded-md border border-dashed px-md py-sm cursor-pointer border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 transition duration-300 bg-transparent md:hover:bg-offset md:dark:hover:bg-offsetDark"><div class="flex items-center justify-between gap-sm"><div class="flex items-center gap-x-sm default font-sans text-sm font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="images" class="svg-inline--fa fa-images fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M160 80H512c8.8 0 16 7.2 16 16V320c0 8.8-7.2 16-16 16H490.8L388.1 178.9c-4.4-6.8-12-10.9-20.1-10.9s-15.7 4.1-20.1 10.9l-52.2 79.8-12.4-16.9c-4.5-6.2-11.7-9.8-19.4-9.8s-14.8 3.6-19.4 9.8L175.6 336H160c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM96 96V320c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H160c-35.3 0-64 28.7-64 64zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120V344c0 75.1 60.9 136 136 136H456c13.3 0 24-10.7 24-24s-10.7-24-24-24H136c-48.6 0-88-39.4-88-88V120zm208 24a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></svg><div><div>Search Images</div></div></div><div class="super font-sans text-base text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div></div><div class="mb-sm w-full select-none rounded-md border border-dashed px-md py-sm cursor-pointer border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 transition duration-300 bg-transparent md:hover:bg-offset md:dark:hover:bg-offsetDark"><div class="flex items-center justify-between gap-sm"><div class="flex items-center gap-x-sm default font-sans text-sm font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="film" class="svg-inline--fa fa-film fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M352 432H160V320 280H352v40V432zm0-200H160V192 80H352V192v40zM64 80h48v88H48V96c0-8.8 7.2-16 16-16zM48 216h64v80H48V216zm64 216H64c-8.8 0-16-7.2-16-16V344h64v88zM400 168V80h48c8.8 0 16 7.2 16 16v72H400zm0 48h64v80H400V216zm0 128h64v72c0 8.8-7.2 16-16 16H400V344zM448 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64z"></path></svg><div><div>Search Videos</div></div></div><div class="super font-sans text-base text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div></div><span><div class="mb-sm w-full select-none rounded-md border border-dashed px-md py-sm cursor-pointer border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 transition duration-300 bg-transparent md:hover:bg-offset md:dark:hover:bg-offsetDark"><div class="flex items-center justify-between gap-sm"><div class="flex items-center gap-x-sm default font-sans text-sm font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rectangle-pro" class="svg-inline--fa fa-rectangle-pro fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H576c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm40 128h56c35.3 0 64 28.7 64 64s-28.7 64-64 64H128v40c0 13.3-10.7 24-24 24s-24-10.7-24-24V264 184c0-13.3 10.7-24 24-24zm56 80c8.8 0 16-7.2 16-16s-7.2-16-16-16H128v32h32zm80-56c0-13.3 10.7-24 24-24h56c35.3 0 64 28.7 64 64c0 21.9-11 41.2-27.7 52.7l24.1 38.5c7 11.2 3.6 26-7.6 33.1s-26 3.6-33.1-7.6l-33-52.7H288v40c0 13.3-10.7 24-24 24s-24-10.7-24-24V264 184zm48 56h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H288v32zm200-80c48.6 0 88 39.4 88 88v16c0 48.6-39.4 88-88 88s-88-39.4-88-88V248c0-48.6 39.4-88 88-88zm-40 88v16c0 22.1 17.9 40 40 40s40-17.9 40-40V248c0-22.1-17.9-40-40-40s-40 17.9-40 40z"></path></svg><div><div>Generate Image</div></div></div><div class="super font-sans text-base text-super dark:text-superDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" class="svg-inline--fa fa-plus fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"></path></svg></div></div></div></span></div></div></div></div></div></div></div></div></div></div><div class="pointer-events-none fixed z-10 grid-cols-12 gap-xl px-sm py-sm md:bottom-lg md:grid md:px-0 bottom-mobileNavHeight border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent" style="left: 284.2px; width: 1036px;"><div class="pointer-events-auto md:col-span-8"><div class="w-full border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-transparent"><div class="flex items-center gap-x-xs" style="transform: none; transform-origin: 50% 50% 0px;"><div class="grow" style="transform: none; transform-origin: 50% 50% 0px;"><div><span class="grow block"><div class="rounded-full md:p-sm bg-offset dark:bg-offsetDark"><div class="items-center flex w-full outline-none focus:outline-none focus:ring-borderMain font-sans flex items-center dark:bg-offsetDark dark:text-textMainDark dark:placeholder-textOffDark dark:border-borderMainDark dark:focus:ring-borderMainDark selection:bg-superDuper selection:text-textMain duration-200 transition-all ring-borderMain ring-1 dark:ring-borderMainDark bg-background border text-textMain border-borderMain focus:ring-1 placeholder-textOff shadow-sm rounded-t-[32px] rounded-b-[32px] py-sm px-sm"><div class="flex-grow flex-shrink p-sm rounded-full order-1 overflow-hidden relative flex h-full w-full"><textarea placeholder="Ask follow-up" class="overflow-auto max-h-[45vh] outline-none w-full font-sans caret-superDuper resize-none selection:bg-superDuper selection:text-textMain dark:bg-offsetDark dark:text-textMainDark dark:placeholder-textOffDark bg-background text-textMain placeholder-textOff" autocomplete="off" data-1p-ignore="true" style="height: 24px !important;"></textarea></div><div class="bg-background dark:bg-offsetDark flex rounded-l-lg order-0"><div><button type="button" class="md:hover:bg-offsetPlus text-textOff dark:text-textOffDark md:hover:text-textMain dark:md:hover:bg-offsetPlusDark  dark:md:hover:text-textMainDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-point active:scale-95 origin-center whitespace-nowrap inline-flex text-base aspect-square h-10" data-state="closed"><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="circle-plus" class="svg-inline--fa fa-circle-plus fa-fw fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"></path></svg></div></button><input multiple="" accept=".pdf,.txt,.py,.ipynb,.js,.jsx,.html,.css,.java,.cs,.php,.c,.cpp,.cxx,.h,.hpp,.rs,.R,.Rmd,.swift,.go,.rb,.kt,.kts,.ts,.tsx,.m,.scala,.rs,.dart,.lua,.pl,.pm,.t,.sh,.bash,.zsh,.csv,.log,.ini,.config,.json,.yaml,.yml,.toml,.lua,.sql,.bat,.md,.coffee,.tex,.latex,.less" type="file" style="display: none;"></div></div><div class="bg-background dark:bg-offsetDark flex items-center space-x-2 justify-self-end rounded-full order-2"><span class="inline-flex"><div class="gap-sm group/switch flex cursor-default items-center cursor-pointer" data-testid="copilot-toggle"><button class="gap-sm group/switch flex items-center w-10 flex p-three bg-transparent rounded-full border border-borderMain duration-150 data-[state=checked]:justify-end" type="button" role="switch" aria-checked="false" data-state="unchecked" value="on" id="copilot-toggle" data-testid="copilot-toggle" style="-webkit-tap-highlight-color: transparent; transform: none; transform-origin: 50% 50% 0px;"><div class="rounded-full relative size-4 shadow-sm before:content-[&#39;&#39;] before:duration-150 before:shadow-sm before:absolute before:inset-0 before:rounded-full before:bg-textOff before:dark:bg-textOffDark data-[state=checked]:before:!bg-super md:group-hover/switch:before:scale-90" data-state="unchecked" style="transform: none; transform-origin: 50% 50% 0px;"></div></button><label class="mr-sm whitespace-nowrap duration-150 cursor-pointer group-hover/switch:text-textMain dark:group-hover/switch:text-textMainDark light font-sans text-sm font-medium text-textOff dark:text-textOffDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark" for="copilot-toggle">Pro</label></div></span><button aria-label="Submit" type="button" class="bg-idle text-textOff dark:bg-idleDark dark:text-textOffDark font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-in-out font-sans  select-none items-center relative group/button  justify-center text-center items-center rounded-full cursor-default opacity-50 whitespace-nowrap inline-flex text-sm aspect-square h-8" disabled=""><div class="flex items-center min-w-0 justify-center gap-xs"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="arrow-up" class="svg-inline--fa fa-arrow-up fa-fw fa-1x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M209.4 39.4C204.8 34.7 198.6 32 192 32s-12.8 2.7-17.4 7.4l-168 176c-9.2 9.6-8.8 24.8 .8 33.9s24.8 8.8 33.9-.8L168 115.9V456c0 13.3 10.7 24 24 24s24-10.7 24-24V115.9L342.6 248.6c9.2 9.6 24.3 9.9 33.9 .8s9.9-24.3 .8-33.9l-168-176z"></path></svg></div></button></div></div></div></span></div></div></div></div></div></div></div><div class="md:hidden"></div></div><!--/$--></div></div></div></div></div></main><script src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/webpack-7ac8193a35af3645.js.Без названия" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/media/3c0a20a48548ae37-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/media/80d90e1e722a80dc-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/media/b06d54d0a237533a-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n4:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/css/4c976595efe68bc1.css\",\"style\"]\n5:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/css/ca3f283922472465.css\",\"style\"]\n0:\"$L6\"\n"])</script><script>self.__next_f.push([1,"7:HL[\"https://pplx-next-static-public.perplexity.ai/_next/static/css/ff88f718b078cf59.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"8:I[26618,[],\"\"]\na:I[98622,[],\"\"]\nb:I[62519,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"3927\",\"static/chunks/3927-4f72029dde858cb0.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"9156\",\"static/chunks/9156-cb1b068f937266cd.js\",\"9098\",\"static/chunks/9098-4b3c861a58e52faa.js\",\"815\",\"static/chunks/815-e93062421d1da81f.js\",\"3483\",\"static/chunks/app/(with-sidebar)/(search)/search/%5B%5B...uuid%5D%5D/page-13bdd05bb9b9eed4.js\"],\"\"]\nd:I[4235,[],\"\"]\ne:I[33159,[],\"\"]\n13:I[73974,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b"])</script><script>self.__next_f.push([1,"9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"1137\",\"static/chunks/1137-8a4db939057d8a85.js\",\"6470\",\"static/chunks/app/global-error-11a8c5eb09c12084.js\"],\"\"]\n14:[]\n6:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://pplx-next-static-public.perplexity.ai/_next/static/css/4c976595efe68bc1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"https://pplx-next-static-public.perplexity.ai/_next/static/css/ca3f283922472465.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L8\",null,{\"buildId\":\"UA_CHbJktcMotay6kQ34d\",\"assetPrefix\":\"https://pplx-next-static-public.perplexity.ai\",\"initialCanonicalUrl\":\"/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"initialTree\":[\"\",{\"children\":[\"(with-sidebar)\",{\"children\":[\"(search)\",{\"children\":[\"search\",{\"children\":[[\"uuid\",\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"(with-sidebar)\",{\"children\":[\"(search)\",{\"children\":[\"search\",{\"children\":[[\"uuid\",\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"oc\"],{\"children\":[\"__PAGE__\",{},[\"$L9\",[\"$\",\"$La\",null,{\"propsForComponent\":{\"params\":{\"uuid\":[\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\"]},\"searchParams\":{}},\"Component\":\"$b\",\"isStaticGeneration\":false}],null]]},[null,\"$Lc\",null]]},[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(with-sidebar)\",\"children\",\"(search)\",\"children\",\"search\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,\"$Lf\",null]]},[null,\"$L10\",null]]},[null,\"$L11\",null]],\"initialHead\":[false,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[67610,[\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"666\",\"static/chunks/app/(with-sidebar)/(search)/layout-74a8c3f8ae01faa7.js\"],\"\"]\n17:I[50183,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"1506\",\"static/chunks/1506-4062c3084cc3a78f.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"1137\",\"static/chunks/1137-8a4db939057d8a85.js\",\"7818\",\"static/chunks/app/(with-sidebar)/layout-0b13fe2938fadc78.js\"],\"Wrapper\"]\n18:I[8702,[\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"4243\",\"static/chunks/app/(with-sidebar)/(search)/search/%5B%5B...uuid%5D%5D/layout-fb0ea51a3f6fff3c.js\"],\"HydrationBoundary\"]\n19:I[50183,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5f"])</script><script>self.__next_f.push([1,"f1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"1506\",\"static/chunks/1506-4062c3084cc3a78f.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"1137\",\"static/chunks/1137-8a4db939057d8a85.js\",\"7818\",\"static/chunks/app/(with-sidebar)/layout-0b13fe2938fadc78.js\"],\"Sidebar\"]\n1a:I[24229,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"1506\",\"static/chunks/1506-4062c3084cc3a78f.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"1137\",\"static/chunks/1137-8a4db939057d8a85.js\",\"7818\",\"static/chunks/app/(with-sidebar)/layout-0b13fe2938fadc78.js\"],\"\"]\n1b:I[50183,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44"])</script><script>self.__next_f.push([1,"ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"1506\",\"static/chunks/1506-4062c3084cc3a78f.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"1137\",\"static/chunks/1137-8a4db939057d8a85.js\",\"7818\",\"static/chunks/app/(with-sidebar)/layout-0b13fe2938fadc78.js\"],\"ContentWrapper\"]\n16:T6bc,pplx.visitor-id=abf6ede4-b8f3-4264-8ff7-592997c6b67e; SL_G_WPT_TO=ru; SL_GWPT_Show_Hide_tmp=1; SL_wptGlobTipTmp=1; next-auth.csrf-token=885bd5c606db3febc0067c363eee1fe5534014d27662fd9b499e1dbdb750b51f%7Cea01f50a0578318fc8da44650bcbe8096494d3901352688d801c473b2372ec91; next-auth.callback-url=https%3A%2F%2Fwww.perplexity.ai%2Fapi%2Fauth%2Fsignin-callback%3Fredirect%3Dhttps%253A%252F%252Fwww.perplexity.ai%252F%253Flogin-source%253DoneTapHome; __cflb=02DiuDyvFMmK5p9jVbVnMNSKYZhUL9aGmBa88Ego4iAd2; isCollapsed=true; pplx.is-incognito=true; __Secure-next-auth.session-token=eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..AuwBPI9MbTQbhKZx.h8L3i0828kV3qijNhIQg0kaE5kxo4KiaP8ZgvJ_3umPBsCf116Aj5avo1LrZacKYy2VSm_bYlh0d6JPviTRjGO7NU9tYWOTmVTbyWddlFBrMg8C7OesqMOnCyfQAiZfHYkc4mTpEwGdpDjOVmG2tb7uw_uXZyUi_jSnaUm31LfAKBzfJTYWOBnFqach1o1FD1OG_WqRxO4uzm0WgFKGuXu9WEhLspsnjHhzLQRqzaDnrGzxQw0oF4m8njFdMtWWWtIzLVN8W6e9fYRdAbf9zzNPrrQhAMy9LtnnZksorWzETO1n2dTriTe2csKDy21F7c3TTxpFFf89e-WONA8fuxcednIhLEyH7mACbcVKvt8NObSnqwVIj.DNp5_u456LiTF3Zj5uCf4w; AWSALB=pCYIrJ5hMiqdmhyYtuOdNNRKQKn0GOH8m%2B698J49BNSPYzNmN0W6RkoXaRmHpuMulENCo8Ud0ggbb9%2BCm1Q8Lx7hcHqreNafdDI8nSiEkTOhuREZoiD8L%2Ff3eGaQkU%2BfJYzVFUgOFVyTYYfs38qgdC4exF91ZJ6l1dfzxUpK1fKJNT56bannHNBgO0RB3YtQ8tbUsh0gdIsWjZdI3s1wgpL4AtaBc4IpKfFtzFblx"])</script><script>self.__next_f.push([1,"h5xQ1hoCwhQ17%2BJk5bq%2FV%2BkIUP24ITQ%2BH3FBv3TE8kgvghdKHIX55vUKX7%2BiU4KmivohRhiUcLgvVunRPqKqnSs; AWSALBCORS=pCYIrJ5hMiqdmhyYtuOdNNRKQKn0GOH8m%2B698J49BNSPYzNmN0W6RkoXaRmHpuMulENCo8Ud0ggbb9%2BCm1Q8Lx7hcHqreNafdDI8nSiEkTOhuREZoiD8L%2Ff3eGaQkU%2BfJYzVFUgOFVyTYYfs38qgdC4exF91ZJ6l1dfzxUpK1fKJNT56bannHNBgO0RB3YtQ8tbUsh0gdIsWjZdI3s1wgpL4AtaBc4IpKfFtzFblxh5xQ1hoCwhQ17%2BJk5bq%2FV%2BkIUP24ITQ%2BH3FBv3TE8kgvghdKHIX55vUKX7%2BiU4KmivohRhiUcLgvVunRPqKqnSsf:[\"$\",\"$L15\",null,{\"headers\":[[\"x-forwarded-for\",\"85.65.172.27, 172.70.238.139\"],[\"x-forwarded-proto\",\"https\"],[\"x-forwarded-port\",\"443\"],[\"host\",\"www.perplexity.ai\"],[\"x-amzn-trace-id\",\"Root=1-66bcd12b-2cc4db3e5a8c9dc056b58ebc\"],[\"cf-region-code\",\"TA\"],[\"cf-timezone\",\"Asia/Jerusalem\"],[\"accept-encoding\",\"gzip, br\"],[\"cf-ray\",\"8b3212ed88738e4a-TLV\"],[\"cf-visitor\",\"{\\\"scheme\\\":\\\"https\\\"}\"],[\"cache-control\",\"max-age=0\"],[\"sec-ch-ua\",\"\\\"Not)A;Brand\\\";v=\\\"99\\\", \\\"Google Chrome\\\";v=\\\"127\\\", \\\"Chromium\\\";v=\\\"127\\\"\"],[\"sec-ch-ua-mobile\",\"?0\"],[\"sec-ch-ua-platform\",\"\\\"Windows\\\"\"],[\"upgrade-insecure-requests\",\"1\"],[\"user-agent\",\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\"],[\"accept\",\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\"],[\"sec-fetch-site\",\"same-origin\"],[\"sec-fetch-mode\",\"navigate\"],[\"sec-fetch-user\",\"?1\"],[\"sec-fetch-dest\",\"document\"],[\"accept-language\",\"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\"],[\"priority\",\"u=0, i\"],[\"cf-connecting-ip\",\"85.65.172.27\"],[\"cdn-loop\",\"cloudflare\"],[\"cf-ipcity\",\"Givâatayim\"],[\"cf-ipcontinent\",\"AS\"],[\"cf-ipcountry\",\"IL\"],[\"cf-iplatitude\",\"32.07170\"],[\"cf-iplongitude\",\"34.81530\"],[\"cf-region\",\"Tel Aviv\"],[\"cookie\",\"$16\"],[\"x-forwarded-host\",\"www.perplexity.ai\"]],\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(with-sidebar)\",\"children\",\"(search)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoadin"])</script><script>self.__next_f.push([1,"g\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}]\n10:[\"$\",\"$L17\",null,{\"children\":[\"$\",\"$L18\",null,{\"state\":{\"mutations\":[],\"queries\":[]},\"children\":[[\"$\",\"$L19\",null,{\"children\":[\"$\",\"$L1a\",null,{}]}],[\"$\",\"$L1b\",null,{\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(with-sidebar)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"head\",null,{\"children\":[\"$\",\"script\",null,{\"src\":\"https://accounts.google.com/gsi/client\",\"data-client_id\":\"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com\",\"data-use_fedcm_for_prompt\":\"true\",\"async\":true,\"defer\":true}]}],[\"$\",\"html\",null,{\"lang\":\"en\",\"data-color-scheme\":\"$undefined\",\"children\":[\"$\",\"body\",null,{\"id\":\"__next\",\"className\":\"__variable_598ab8 __variable_8a67e8 __variable_1826c3 bg-transparent md:bg-offset dark:md:bg-offsetDark\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"main\",null,{\"children\":\"$L1c\"}]}]}]]\n"])</script><script>self.__next_f.push([1,"1d:I[42602,[\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"659\",\"static/chunks/app/(with-sidebar)/(search)/search/%5B%5B...uuid%5D%5D/loading-389ab4b4d909584a.js\"],\"\"]\n1e:I[19612,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"AppRouterSessionProvider\"]\n1f:I[19588,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\""])</script><script>self.__next_f.push([1,"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"EnvProvider\"]\n20:I[34785,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"DeviceProvider\"]\n21:I[54194,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/"])</script><script>self.__next_f.push([1,"8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"LocalUserSettingsProvider\"]\n22:I[71789,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"ExperimentPropsProvider\"]\n23:I[85320,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/c"])</script><script>self.__next_f.push([1,"hunks/app/layout-a5e3c06dc2d99a24.js\"],\"ClientProviders\"]\n24:I[77586,[\"6299\",\"static/chunks/9ffa21ba-61e6e43bf78462cb.js\",\"7544\",\"static/chunks/7544-fd0e9f9ca634d885.js\",\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"1096\",\"static/chunks/1096-837f99dc338154f4.js\",\"6026\",\"static/chunks/6026-9e878f5970b75206.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"9657\",\"static/chunks/9657-5174e30d6b5ce00e.js\",\"3407\",\"static/chunks/3407-91132a729c892a15.js\",\"9383\",\"static/chunks/9383-dce5ca5ff1115de8.js\",\"6735\",\"static/chunks/6735-3addadc777cacd07.js\",\"2616\",\"static/chunks/2616-c75ba3400ef46af1.js\",\"1273\",\"static/chunks/1273-e20dc5fafada3b99.js\",\"5138\",\"static/chunks/5138-d531d432a4072eff.js\",\"3895\",\"static/chunks/3895-36ded8bfe18be7e4.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"6763\",\"static/chunks/6763-ceebaf33ea540b1f.js\",\"42\",\"static/chunks/42-3ffda6b8b9e53e67.js\",\"8510\",\"static/chunks/8510-4f0b055f1addeb03.js\",\"3185\",\"static/chunks/app/layout-a5e3c06dc2d99a24.js\"],\"\"]\n25:I[80775,[\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"359\",\"static/chunks/359-c1e0018367b44ef9.js\",\"3005\",\"static/chunks/3005-5a19d40504c45b9e.js\",\"9160\",\"static/chunks/app/not-found-192486e5ae0c09f3.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"$L1d\",null,{\"locale\":\"en-US\",\"now\":\"$D2024-08-14T15:45:47.238Z\",\"timeZone\":\"UTC\",\"messages\":{\"shared\":{\"learnMore\":\"Learn More\",\"getStarted\":\"Get Started\",\"create\":\"Create\",\"cancel\":\"Cancel\",\"nevermind\":\"Nevermind\",\"confirm\":\"Confirm\",\"share\":\"Share\",\"accept\":\"Accept\",\"decline\":\"Decline\",\"discard\":\"Discard\",\"view\":\"View\",\"signin\":\"Sign in\",\"signup\":\"Sign up\",\"clickToSignIn\":\"Click to sign in\",\"checkEmail\":\"Check your email\",\"checkEmailDescription\":\"A temporary sign-in link has been sent to your email address.\",\"continue\":\"Continue\",\"continueAs\":\"Continue as {user}\",\"save\":\"Save\",\"useApp\":\"Use App\",\"getApp\":\"Get App\",\"setDefaultSearch\":\"Set as default search\",\"setDefaultEngine\":\"Set as default search engine\",\"getIos\":\"Get the iPhone App\",\"getAndroid\":\"Get the Android App\",\"mobileDownloadTitle\":\"Faster and more powerful\",\"mobileDownloadQR\":\"Scan with your phone for a quick download\",\"appTagline\":\"Search and discovery with AI\",\"amountRatings\":\"{amount} reviews\",\"addToCollection\":\"Add to Collection\",\"bookmark\":\"Bookmark\",\"bookmarks\":\"Bookmarks\",\"saveToBookmarks\":\"Save to Bookmarks\",\"savedToBookmarks\":\"Saved to Bookmarks\",\"swapCollections\":\"Swap Collections\",\"removeFromCollection\":\"Remove from Collection\",\"download\":\"Download\",\"discover\":\"Discover\",\"threads\":\"Threads\",\"thread\":\"Thread\",\"collections\":\"Collections\",\"articles\":\"Pages\",\"article\":\"Page\",\"collection\":\"Collection\",\"suggestions\":\"Suggestions\",\"description\":\"Description\",\"delete\":\"Delete\",\"yearly\":\"Yearly\",\"year\":\"Year\",\"month\":\"Month\",\"monthly\":\"Monthly\",\"enterprise\":\"Enterprise\",\"viewMore\":\"View More\",\"viewLess\":\"View Less\",\"invite\":\"Invite\",\"untitled\":\"Untitled\",\"perMonth\":\"per month\",\"perMemberPerMonth\":\"per member per month\",\"perYear\":\"per year\",\"perMemberPerYear\":\"per member per year\",\"freePeriodMessage\":\"First {period} free, ${price}/{period} after. Cancel anytime.\",\"welcome\":\"Welcome\",\"noThreads\":\"No threads\",\"noArticles\":\"No pages\",\"new\":\"New\",\"trySearching\":\"Try searching\",\"scrollToBottom\":\"Scroll to bottom\",\"justNow\":\"Just now\",\"yearsAgo\":\"years ago\",\"yearAgo\":\"year ago\",\"monthsAgo\":\"months ago\",\"monthAgo\":\"month ago\",\"daysAgo\":\"days ago\",\"dayAgo\":\"day ago\",\"hourAgo\":\"hour ago\",\"hoursAgo\":\"hours ago\",\"minutesAgo\":\"minutes ago\",\"minuteAgo\":\"minute ago\",\"justNowShort\":\"Now\",\"iosApp\":\"iOS App\",\"androidApp\":\"Android App\",\"chromeDefault\":\"{chrome} Default Search\",\"chromeAiCompanion\":\"{chrome} {ai} Companion\",\"skip\":\"Skip\",\"done\":\"Done\",\"change\":\"Change\",\"sourcesPostfix\":\"{count, plural, =1 {# source} other {# sources}}\",\"limitReached\":\"Limit reached. Come back soon.\",\"send\":\"Send\",\"activate\":\"Activate\",\"error\":\"Something went wrong.\",\"errorRetry\":\"Something went wrong. Please try again.\",\"email\":\"Email\",\"returnHome\":\"Return home\",\"retry\":\"Retry\",\"answer\":\"Answer\",\"forkMetricLabel\":\"Follow-ups asked\",\"viewMetricLabel\":\"Views\",\"report\":\"Report\",\"rewrite\":\"Rewrite\",\"collapse\":\"Collapse\",\"expand\":\"Expand\",\"openingAppStore\":\"Opening App Store...\",\"openingPlayStore\":\"Opening Play Store...\",\"siteDescription\":\"{pplx} is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.\",\"subscribe\":\"Subscribe\",\"subscribed\":\"Subscribed\",\"signUpLogIn\":\"Sign up or log in\",\"enterCode\":\"Enter code manually\",\"invalidCode\":\"Invalid code, please try again\",\"lostConnection\":\"Refresh: Lost Connection\",\"maintenanceWarningBanner\":\"We will performing system maintenance at {start} for {duration}. The site may be unavailable during this time.\",\"notFound\":\"{httpCode} Page Not Found\"},\"auth\":{\"emailRateLimitedTitle\":\"Error\",\"emailRateLimitedLine1\":\"We've received too many requests for email login from your IP address.\",\"emailRateLimitedLine2\":\"Please try again in a minute.\"},\"weather\":{\"saturdayShort\":\"Sat\",\"sundayShort\":\"Sun\",\"mondayShort\":\"Mon\",\"tuesdayShort\":\"Tue\",\"wednesdayShort\":\"Wed\",\"thursdayShort\":\"Thu\",\"fridayShort\":\"Fri\"},\"incognito\":{\"incognito\":\"Incognito\",\"exit\":\"Exit incognito\",\"unsupported\":\"This feature is disabled while incognito\",\"libraryUnsupported\":\"Library disabled while incognito\",\"modeActiveTooltip\":\"Incognito mode active\",\"infoTooltip\":\"Create anonymous threads that don't appear in your library and expire after 24 hours.\"},\"shop\":{\"quantity\":\"Quantity\",\"whatPeopleSay\":\"What People Say\",\"pros\":\"Pros\",\"cons\":\"Cons\",\"keyFeatures\":\"Key Features\",\"buyThisIf\":\"Buy this if\",\"viewDetails\":\"View Details\",\"view\":\"View\",\"buyNow\":\"Buy Now\",\"buyWith\":\"Buy with\",\"sale\":\"Sale\",\"viewProduct\":\"View Product\",\"overview\":\"Overview\",\"purchaseModalTitle\":\"Configure and Buy\",\"percentOff\":\"{amount} off\",\"visitSite\":\"Visit Site\",\"shippingNote\":\"Shipping calculated at checkout\"},\"sidebar\":{\"signup\":\"Sign Up\",\"library\":\"Library\",\"home\":\"Home\",\"newThreadPlaceholder\":\"New Thread\",\"libraryLogin\":\"Sign in to save your threads\",\"proBannerTitle\":\"Try {pro}\",\"proBannerDesc\":\"Upgrade for image upload, smarter AI, and more {proSearch}.\",\"OrgBannerTitle\":\"Invite your teammates\",\"OrgBannerDesc\":\"Add more members to your organization to get the most out of Perplexity.\",\"OrgBannerButton\":\"Invite\",\"enterpriseBannerTitle\":\"Invite your teammates\",\"enterpriseBannerDesc\":\"Want to use Perplexity with your team or business?\",\"enterpriseBannerButton\":\"Learn More\",\"clear\":\"Clear\",\"search\":\"Search\",\"discover\":\"Discover\"},\"mobileDownload\":{\"title\":\"Open on the Perplexity mobile app\",\"qrCode\":\"Scan now to install\"},\"main\":{\"enterpriseAnnouncment\":{\"title\":\"Announcing Perplexity for Enterprise\",\"description\":\"SOC 2 certification, user management, single sign-on, and more.\",\"cta\":\"Learn More\"},\"bigTitle\":\"Where knowledge begins\",\"bigTitleKnowItAlls\":\"Welcome, know-it-all\",\"bigTitleVariationA\":\"Ask questions, get answers\",\"bigTitleVariationB\":\"Search like never before\",\"bigTitleVariationC\":\"Ask questions, trust the answers\",\"askInput\":{\"focus\":\"Focus\",\"attach\":\"Attach\",\"uploading\":\"Uploading...\",\"toolTip\":\"Set a focus for your sources\",\"stopGenerating\":\"Stop generating response\",\"dataRetentionTooltip\":\"Ensure file uploads comply with your Organization policies\",\"discardQuestion\":\"Discard the current question?\",\"sourcesTooltip\":\"Set source for search\",\"model\":\"Model\",\"modelAuto\":\"Auto\"},\"fileUpload\":{\"title\":\"Want file uploads?\",\"descPre\":\"Sign in to ask questions about\",\"descImg\":\"images\",\"descAll\":\"images, text, or PDFs\",\"attach\":\"Attach\",\"descPdf\":\"text or PDF files\",\"loggedOut\":\" Sign in to attach files.\",\"leftToday\":\"{remaining} left today\",\"wantImages\":\"Want to upload images?\",\"wantMore\":\"Want more uploads?\",\"upgradeForGPT\":\"Upgrade to Pro to see the world with GPT-4V\",\"upgradeForUnlim\":\"Upgrade to Pro for unlimited uploads\",\"fileTypeNotSupported\":\"The file type you uploaded is not supported\",\"fileTooLarge\":\"File too large: 25MB maximum\",\"fileTooSmall\":\"File too small\"},\"footerLinks\":{\"pro\":\"{pro}\",\"Enterprise\":\"Enterprise\",\"careers\":\"Careers\",\"playground\":\"Playground\",\"encyclopedia\":\"Encyclopedia\",\"blog\":\"Blog\"}},\"login\":{\"emailPlaceholder\":\"Your email\",\"ssoEmailPlaceholder\":\"Your work email\",\"continueWithEmail\":\"Continue with email\",\"continueWithGoogle\":\"Continue with {google}\",\"continueWithApple\":\"Continue with {apple}\",\"tryCopilot\":\"Try {copilot} for free\",\"modalSubtitle\":\"Sign in or sign up to continue\",\"emailError\":\"Please enter a valid email address\",\"continueWithSSO\":\"Continue with SAML SSO\",\"ssoTitle\":\"Single Sign-on (SAML SSO)\",\"enterWorkEmail\":\"Enter your work email\",\"enterEmail\":\"Enter your email\",\"seeAllOptions\":\"See all options (Apple, SSO)\",\"magicLinkEmail\":{\"subject\":\"Sign in to Perplexity\",\"title\":\"Sign in to your account\",\"cta\":\"Sign in\",\"explainer\":\"This link and code will only be valid for the next 5 minutes. If the link does not work, you can use the login verification code directly:\",\"disclaimer\":\"If you did not request this, you can safely ignore it. For any issues, please contact support@perplexity.ai\"},\"ssoFailTitle\":\"SSO sign in failed\",\"ssoFailDescription\":\"Confirm you are a member or invitee of your organization on Perplexity and try again\"},\"signup\":{\"floatingSignupTitle\":\"Sign in or create an account\",\"floatingSignupTitleAlt\":\"You're signed out\",\"floatingSignupSubtitle\":\"Unlock {proSearch} and Thread History\"},\"visitorGate\":{\"visitorGateTitle\":\"Sign up for free\",\"visitorGateTitleVariation\":\"You are logged out\",\"visitorGateSubtitle\":\"Keep your search history, upload files, and unlock access to {proSearch}.\",\"visitorGateSubtitleVariation\":\"Sign up or log in to access your search history and unlock {proSearch}.\"},\"onboarding\":{\"title\":\"Welcome\",\"createAccountTitle\":\"Create your account\",\"avatarLabel\":\"Avatar\",\"usernameLabel\":\"Username\",\"continueButtonText\":\"Continue\",\"skipButtonText\":\"Skip\",\"finishButtonText\":\"Finish\",\"proTitle\":\"Try Pro\",\"proFeatures\":\"Pro Features\",\"enterpriseFeatures\":\"Enterprise Features\",\"proSubtitle\":\"Unlock the most powerful AI research assistant.\",\"mobileTitle\":\"Perplexity for your phone\",\"mobileSubtitle\":\"Available for iPhone and Android\",\"getAppTitle\":\"Get the app now\",\"getAppSubtitle\":\"Visit the App Store, Google Play, or scan with your phone to download instantly\",\"valueProp\":{\"title\":\"Answers you can trust\",\"titleSub\":\"Here's what makes Perplexity different\",\"subtitle\":\"Answers that are accurate and always cited\",\"description\":\"We continuously search the internet and identify the best sources, from academic research to Reddit threads, to provide the perfect answer to any question.\",\"subtitle2\":\"Get the conversation going with related questions\",\"description2\":\"We'll help you get the conversation going with related questions, so you can focus on the answer you want.\",\"subtitle3\":\"Citations in every response\",\"description3\":\"Every answer uses cited sources to provide a more accurate and comprehensive answer. If you want to dig deeper, just click the link to the source.\"},\"starterQuery\":{\"title\":\"Ask your first question\",\"subtitle\":\"Here are some suggested questions, select one to see how Perplexity works\"},\"contactSales\":{\"title\":\"Let's connect\",\"salesMessage\":\"Based on your organization needs, we want to work with you directly. Please answer a few more questions to so we can get in touch.\",\"getStarted\":\"Get Started\"},\"org\":{\"tos\":\"Terms of Service\",\"aboveTac\":\"above Terms and Conditions\",\"acceptCheckboxPrefix\":\"I have read and accept the \",\"privacy\":\"Privacy Policy\",\"create\":\"Create your Organization\",\"trustCenterDescription\":\"Security documentation\",\"joinOrg\":\"Join the organization {org}\",\"joinOrgDetails\":\"Accept your invite to get all the benefits of {pplx} {pro}.\",\"joinedOrg\":\"You have joined the organization {org}.\",\"joinedOrgDetails\":\"You now have all the benefits of {pplx} {pro}.\",\"joinedOrgNoProDetails\":\"Once your organization adds a billing method, you'll receive access to {pplx} {pro}.\",\"loginRequired\":\"Please sign in to accept this invite.\",\"loginRequiredDetails\":\"Sign in with the email {email} to join {org}.\",\"emailMismatch\":\"Please sign in with the correct email.\",\"emailMismatchDetails\":\"You must sign in with the email {email} to join the organization {org}. You are currently signed in as {currentEmail}.\",\"emailMismatchDetailsAnon\":\"You must sign in with the email {email} to join the organization {org}.\",\"inviteNotFound\":\"The invitation was already accepted or does not exist.\",\"alreadyInOrg\":\"You are already a member of an organization.\",\"alreadyInOrgDetails\":\"To join this organization, you must first leave the organization {org}.\",\"inviteUsersTitle\":\"Invite your teammates\",\"inviteUsersDesc\":\"Add more members to your organization to get the most out of Perplexity. You will not be billed until they accept.\"}},\"threads\":{\"main\":{\"searchPlaceholder\":\"Search your threads...\",\"mainTitle\":\"Library\",\"threadsSubtitle\":\"Threads\",\"collectionsSubtitle\":\"Collections\",\"tooltipDeleteThreads\":\"Delete all Threads\",\"tooltipCreateCollectionTitle\":\"Create\",\"tooltipCreateThread\":\"Thread\",\"tooltipCreateCollection\":\"Collection\",\"deleteAllThreadsModalTitle\":\"Are you sure you want to delete all your threads?\",\"emptyStateMessage\":\"Organize your threads or collaborate with others\",\"threadsPlaceholder\":\"Threads in this collection will show up here\",\"noThreads\":\"No threads yet\",\"noArticles\":\"No pages yet\",\"getStarted\":\"Get Started\"},\"entry\":{\"feedback\":{\"title\":\"Was this answer helpful?\",\"subtitle\":\"Help us improve by giving some quick feedback.\",\"button\":{\"yes\":\"Helpful\",\"no\":\"Not helpful\"},\"thanks\":\"Thanks for your feedback\"},\"generateImage\":{\"style\":\"Style\",\"subject\":\"Subject\",\"submit\":\"Submit\",\"customPrompt\":\"Custom prompt\",\"chooseStyle\":\"Choose a style\",\"stylePlaceholder\":\"Use detailed brush strokes.\",\"title\":\"Generate images with {pro}\",\"pitch\":\"Visualize your answers with images\",\"painting\":\"Painting\",\"photograph\":\"Photograph\",\"illustration\":\"Illustration\",\"diagram\":\"Diagram\",\"tooltip\":\"{remaining} left today\",\"limitReached\":\"Limit reached. Come back soon.\"},\"generateImageStyles\":{\"painting\":\"Painting\",\"photograph\":\"Photograph\",\"illustration\":\"Illustration\",\"diagram\":\"Diagram\"},\"entryRetry\":{\"rewrite\":\"Rewrite\",\"rewriteDescription\":\"Rewrite this answer\",\"copilotDescription\":\"Our most powerful search\",\"experimental\":\"Experimental\",\"title\":\"Generate images with {pro}\",\"pitch\":\"Visualize your answers with images\",\"tooltip\":\"{remaining} left today\"},\"expiration\":{\"expiresInDays\":\"Expires in {days, plural, =1 {1 day} other {# days}}\",\"expiresInHours\":\"Expires in {hours, plural, =1 {1 hour} other {# hours}}\",\"expiresInMinutes\":\"Expires in {minutes, plural, =1 {1 minute} other {# minutes}}\"},\"lossAversion\":{\"loseAnswerTitle\":\"Lose your answer?\",\"loseAnswerSubtitle\":\"To save this answer, sign up or log in.\"}},\"statusUpdater\":{\"readingResponse\":\"Reading response\",\"understandingQuestion\":\"Understanding question\",\"sources\":\"Found {count, plural, =0 {# source} =1 {# source} other {# sources}}\",\"searching\":\"Searching\",\"reading\":\"Reading {count, plural, =0 {# files} =1 {# file} other {# files}}\",\"files\":\"files\",\"rewriting\":\"Rewriting\",\"rewritingProfile\":\"Reviewing your profile\",\"stepsCompleted\":\"{count, plural, =0 {# steps} =1 {# step} other {# steps}} completed\",\"searchingWeb\":\"Searching the web\",\"searchingWolfram\":\"Searching Wolfram|Alpha\",\"news\":\"Searching the news\",\"youtube\":\"Searching for videos\",\"image\":\"Searching for images\",\"shopping\":\"Searching for products\",\"map\":\"Searching for places\"},\"statusUpdaterV2\":{\"searchTitle\":\"Pro Search\",\"researching\":\"Researching\",\"searching\":\"Searching\",\"reading\":\"Reading\",\"programming\":\"Programming\",\"conclusion\":\"Wrapping up\",\"maxStepsExceededError\":\"The query has exceeded the maximum number of steps that can be processed. Not every step may be executed.\",\"output\":\"Output\",\"noOutput\":\"This code did not produce an output\"}},\"collection\":{\"main\":{\"newCollection\":\"New Collection\",\"newThreadPlaceholder\":\"Create new thread in this collection...\",\"chooseCollection\":\"Choose Collection\",\"aiPrompt\":\"AI Prompt applied\",\"collectionIncognitoNote\":\"Collections disabled while incognito\"},\"contributor\":{\"invitePlaceholder\":\"hello@example.com\",\"invited\":\"Invited\",\"invitedSuccess\":\"You've been invited to contribute\",\"inviteContributor\":\"Invite Contributor\",\"modalTitle\":\"Contributors\",\"modalSubtitle\":\"Collaborate with others on your collection by inviting contributors to add their own threads.\",\"contributor\":\"Contributor\",\"editor\":\"Editor\",\"owner\":\"Owner\",\"leave\":\"Leave\",\"remove\":\"Remove\"},\"create\":{\"titlePlaceholder\":\"Vacation Planning\",\"descriptionPlaceholder\":\"Planning a trip to Europe\",\"emoji\":\"Emoji\",\"promptPlaceholder\":\"You are a travel agent. Help me plan my trip around boutique hotels, local food, and museums.\",\"modalTitleCreate\":\"Create Collection\",\"modalTitleEdit\":\"Edit Collection\",\"modalSubtitle\":\"Organize and group your threads\",\"modalButtonUpdate\":\"Update\",\"modalButtonCreate\":\"Create\",\"modalTitleLabel\":\"Title\",\"modalDescriptionLabel\":\"Description\",\"modalInputOptionalLabel\":\"(optional)\",\"modalLabelAiPrompt\":\"AI Prompt\",\"modalLabelAiPromptSubtitle\":\"Give instructions to the AI that affect every thread in the collection.\"}},\"library\":{\"loginPrompt\":\"Sign in to save and collect {threads}\",\"contentSubtitle\":\"Threads\",\"sidebarSubtitle\":\"Collections\",\"editCollection\":\"Edit Collection\",\"deleteCollection\":\"Delete Collection\",\"deleteCollectionConfirmation\":\"Are you sure you want to delete this collection?\"},\"article\":{\"askFollowUpPlaceholder\":\"Ask follow-up\",\"titleFallback\":\"Page Title\",\"titlePlaceholder\":\"What's your Page about?\",\"titleEditTitle\":\"Edit Page Title\",\"sectionEditTitle\":\"Edit Section Title\",\"titleEditConfirmLabel\":\"Save\",\"introductionLabel\":\"Introduction\",\"suggestionsTitle\":\"Create a Page about...\",\"layoutActionLabel\":\"Layout\",\"layoutNoImageLabel\":\"No Header Image\",\"layoutSmallImageLabel\":\"Small Header Image\",\"layoutLargeImageLabel\":\"Large Header Image\",\"keepReading\":\"Keep Reading\",\"draftLabel\":\"Draft Page\",\"draftLabelShort\":\"Draft\",\"writingLabel\":\"Writing...\",\"publishedLabel\":\"Published\",\"editingLabel\":\"Editing\",\"stop\":\"Stop\",\"stopping\":\"Stopping...\",\"addSection\":\"Add Section\",\"stopGenerating\":\"Stop writing response\",\"dragToReposition\":\"Drag to reposition\",\"missingImage\":\"Missing Image\",\"editInstructions\":\"Custom Instructions...\",\"rewriting\":\"Rewriting...\",\"rewriteIntro\":\"Rewrite Intro\",\"emphasizeSources\":\"Emphasize Sources\",\"emphasizeSourcesDescription\":\"Prominently display sources within the introduction\",\"rewriteIntroDescription\":\"Rewrite the introduction considering the entire content of the page\",\"creationProRequiredTitle\":\"Come back soon\",\"upgradeToPro\":\"Upgrade to Pro\",\"pageRateLimitNote\":\"{count} left today\",\"pageRateLimitReached\":\"Page creation limit reached\",\"pageRateLimitDescription\":\"You've reached your daily page creation limit. Please come back tomorrow!\",\"pageRateLimitDescriptionAlmost\":\"You've almost reached your daily page creation limit.\",\"upgradeToProDescription\":\"Upgrade to Pro to create unlimited pages.\",\"creationProRequiredDescription\":\"While in beta, Page creation is available only to Pro and Enterprise users.\",\"creationDesktopOnlyTitle\":\"Try again on with a larger screen\",\"creationDesktopOnlyDescription\":\"Page creation is currently not available on mobile.\",\"regenerateOnSave\":\"Rewrite section on save\",\"bookmarkLoginTitle\":\"Sign in to save and collect {pages}\",\"editOptions\":{\"paragraph\":\"Paragraph\",\"list\":\"List\",\"table\":\"Table\",\"expand\":\"Write More\",\"condense\":\"Write Less\",\"delete\":\"Delete\"},\"section\":{\"create\":{\"actionLabel\":\"Add Section\",\"fromSelectionLabel\":\"Create section from text\",\"insertLabel\":\"Insert Section\",\"promptPlaceholder\":\"What is this section about?\",\"suggestionsLabel\":\"Suggested\",\"layoutMediaTextLabel\":\"Media + Text\",\"layoutTextLabel\":\"Text\",\"layoutMediaLabel\":\"Media Only\",\"layoutShopLabel\":\"Shop\",\"formatParagraphLabel\":\"Paragraph\",\"formatTableLabel\":\"Table\",\"formatListLabel\":\"List\",\"audienceLabel\":\"Audience\",\"audienceAnyoneLabel\":\"Anyone\",\"audienceAnyoneDetail\":\"Intended for anyone to understand\",\"audienceEli5Label\":\"ELI5\",\"audienceEli5Detail\":\"Basic, easy-to-understand explanations\",\"audienceBeginnerLabel\":\"Beginners\",\"audienceBeginnerDetail\":\"Optimized for beginners to understand without previous knowledge\",\"audienceExpertLabel\":\"Experts\",\"audienceExpertDetail\":\"Uses more technical terms and references advanced concepts\",\"audienceExpertUserLabel\":\"Advanced\",\"audienceBeginnerUserLabel\":\"Beginner\",\"audienceAnyoneUserLabel\":\"Anyone\",\"audienceEli5UserLabel\":\"Simple\",\"lengthConciseLabel\":\"Concise\",\"lengthConciseDetail\":\"Succinct and to-the-point, delivers information efficiently\",\"lengthVerboseLabel\":\"Detailed\",\"lengthVerboseDetail\":\"Thorough and in-depth, provides complete explanations\",\"sectionsRemaining\":\"{count, plural, =1 {# section remaining} other {# sections remaining}}\",\"sectionLimitReached\":\"Section limit reached\",\"sectionLimitDescription\":\"Pages are limited to 20 sections to improve readability\"},\"copyContentLabel\":\"Copy section content\",\"copyLinkLabel\":\"Copy link to section\",\"reportLabel\":\"Report\",\"addMediaLabel\":\"Add Media\",\"findingMediaLabel\":\"Finding Media...\",\"editLabel\":\"Edit\",\"moveUpLabel\":\"Move Up\",\"moveDownLabel\":\"Move Down\",\"deleteLabel\":\"Delete Section\",\"moreLabel\":\"More\",\"remove\":\"Remove\",\"sources\":\"sources\",\"source\":\"source\"},\"deleteActionLabel\":\"Delete Page\",\"reportActionLabel\":\"Report Page\",\"unpublishActionLabel\":\"Unpublish Page\",\"deleteConfirmTitle\":\"Confirm Page Deletion\",\"deleteConfirmDetail\":\"Are you sure you want to delete this Page? This can't be undone.\",\"deleteConfirmActionLabel\":\"Confirm\",\"deleteCancelLabel\":\"Cancel\",\"editActionLabel\":\"Edit Page\",\"continueEditingLabel\":\"Continue Editing\",\"previewLabel\":\"Preview\",\"publishActionLabel\":\"Publish\",\"createdByPrefix\":\"Curated by\",\"titleEditedByCurator\":\"Title edited by\",\"numMinRead\":\"{num} min read\",\"generateImage\":\"Generate Image\",\"uploadImage\":\"Upload Image\",\"publishModalTitle\":\"Your page is published!\",\"publishModalDetailPostfix\":\"is live on Perplexity.\",\"mediaSheet\":{\"uploadImage\":\"Upload Image\",\"generateImage\":\"Generate Image\",\"uploadingImage\":\"Uploading Image\",\"title\":\"Set Section Media\",\"itemAddedLabel\":\"Added\",\"searchForMedia\":\"Search for media\"},\"productSheet\":{\"title\":\"Add Product\",\"searchPlaceholder\":\"Search for products...\"},\"loginPrompt\":\"Sign in to create a {page}\"},\"search\":{\"report\":{\"skip\":\"Skip\",\"cancel\":\"Cancel\",\"feedbackPlaceholder\":\"Your feedback...\",\"report\":\"Report\",\"reported\":\"Reported\",\"howToImprove\":\"How can the response be improved?\",\"tooLong\":\"Too long\",\"tooShort\":\"Too short\",\"harmful\":\"Harmful or offensive\",\"outOfDate\":\"Out of date\",\"inaccurate\":\"Inaccurate\",\"notHelpful\":\"Not helpful\",\"helpUs\":\"Help us improve\",\"lowQuality\":\"Low quality content\",\"modalSubtitle\":\"Provide additional feedback on this {item}. Select all that apply.\"},\"thread\":{\"shareLogin\":\"Sign in to save private {threads}\",\"shareDescription\":\"Save answers in {threads} and {collections}\",\"headerLogin\":\"Sign in to save and collect {threads}\",\"viewSources\":\"View Sources\",\"viewAccess\":\"View Access\",\"viewAccessInheritance\":\"View access inherited from collection {collection}\",\"sources\":\"{sources, plural, =0 {No sources} =1 {One source} other {# sources}}\",\"removeSources\":\"{sources, plural, =0 {No sources} =1 {Remove source} other {Remove # sources}}\",\"error\":\"Sorry, something went wrong\",\"errorDescription\":\"Please try again later.\"},\"threadEntry\":{\"sources\":\"Sources\",\"answer\":\"Answer\",\"recentlyUpdated\":\"just now\",\"relatedQueries\":\"Related\",\"relatedQueriesMoreOnThis\":\"More on this\",\"relatedQueriesKeepExploring\":\"Keep exploring\",\"viewMore\":\"View {count} more\",\"skipText\":\"Skip questions and proceed\",\"skip\":\"Skip\",\"tellMeMore\":\"tell me more\",\"updated\":\"Updated\"}},\"subscription\":{\"pricingTable\":{\"free\":\"Standard\",\"pro\":\"Professional\",\"enterprise\":\"Enterprise\",\"freePlanButton\":\"Continue with Free\",\"proPlanButton\":\"Continue with Pro\",\"enterprisePlanButton\":\"Continue with Enterprise Pro\",\"freePrice\":\"Free\",\"proPrice\":\"$$20\",\"enterprisePrice\":\"$$40\",\"studentPrice\":\"$$4.99\",\"perFree\":\"Forever\",\"perMonth\":\"Monthly\",\"perMember\":\"Per member per month\",\"freeDescription\":\"Start for free, no credit card needed.\",\"freePerks\":{\"perk1\":\"Unlimited Quick searches\",\"perk2\":\"5 Pro Searches per day\",\"perk3\":\"Standard Perplexity AI Model optimized for speed and quality\",\"perk4\":\"Create a profile to personalize your answers\"},\"proPerks\":{\"perk1\":\"Unlimited Quick searches\",\"perk2\":\"300+ Pro searches per day\",\"perk3\":\"Select your preferred AI Model. Choose from GPT-4o, Claude-3, Sonar Large (LLama 3.1), and more\",\"perk4\":\"Upload and analyze unlimited files\",\"perk5\":\"Visualize answers using Playground AI, DALL-E, SDXL, and more\",\"perk6\":\"Get $5/month in API credits\"},\"enterprisePerks\":{\"perk1\":\"Increased Data Privacy\",\"perk2\":\"Enhanced Security\",\"perk3\":\"User Management\",\"perk4\":\"SOC 2 Certification\",\"perk5\":\"Data Retention\",\"perk6\":\"Single Sign-On (SSO)\",\"perk7\":\"Perplexity Pro for All Members\"},\"enterpriseFeatures\":{\"increasedDataPrivacy\":\"Increased Data Privacy\",\"increasedDataPrivacyDescription\":\"Your data stays yours, period. We never train our LLMs on our enterprise customers' data. Your files are deleted after 7 days.\",\"enhancedSecurity\":\"Enhanced Security\",\"proForAllUsersDescription\":\"Unlock the full capabilities of {pplx} for all members.\",\"enhancedSecurityDescription\":\"Manage threats and prevent data loss with real-time notifications of suspicious behavior or risky activities.\",\"userManagement\":\"User Management\",\"userManagementDescription\":\"Add, remove, and manage team members easily.\",\"SOC2\":\"SOC 2 Certification\",\"SOC2Description\":\"Our security policies and controls continuously meet the highest industry standards so that you can run your business with peace of mind.\",\"proForAllUsers\":\"Perplexity Pro for All Members\",\"SSO\":\"Single Sign-On (SSO)\",\"SSODescription\":\"Securely integrate with your identity provider and enable users to log in with SSO.\"},\"proForStudentsDescription\":\"Unlock the full capabilities of {pplx} at a discount when using a valid educational email.\",\"proDescription\":\"Unlock the full capabilities of {pplx} and enjoy new perks as they are added.\",\"enterpriseDescription\":\"Perplexity for your company.\",\"enterpriseQuestion\":\"Want Perplexity for your team or business?\",\"unlimitedCopilot\":\"Unlimited {copilot}\",\"unlimitedCopilotDescription\":\"{copilot} is our most powerful search, ideal for longer answers to complex questions. (300+/day)\",\"unlimitedFileUpload\":\"Unlimited File Uploads\",\"unlimitedFileUploadDescription\":\"Ask about images, documents, and more, powered by models like {claude} and {gpt4o}.\",\"modelSelection\":\"Upgraded AI Models\",\"modelSelectionDescription\":\"Choose from the latest AI models like {gpt4}, {claude}, {perplexity}, and {llama} for improved answers and longer context.\",\"apiCredits\":\"API Credits\",\"apiCreditsDescription\":\"Enjoy $5 monthly credit for our text generation API. {perplexity}'s online LLM offers up-to-date information at low latency.\",\"monthly\":\"Monthly\",\"yearly\":\"Yearly\",\"proLogin\":\"Sign in to unlock {pro}\",\"subActive\":\"Subscription Active\",\"thanks\":\"Thank you for your support\",\"referFriend\":\"Refer a Friend\",\"switchToYearly\":\"Switch to Yearly\",\"saveXDollars\":\"Save ${x}\",\"xDayTrial\":\"{x} day free trial\"},\"refer\":{\"emailPlaceholder\":\"henry@example.com\",\"whoDoYouKnow\":\"Who do you know that would love\",\"referDetails\":\"Refer a friend and you both get a discount. Give $10, get $10.\",\"yourReferralLink\":\"Your Referral Link\",\"emailYourLink\":\"Email your link\",\"referralDetailedDescription\":\"For every subscriber you refer, you get $10 off your next billing cycle and they get $10 off. You can refer as many people as you want, and discounts are automatically applied once per billing cycle.\"},\"resubscribe\":\"Resubscribe\",\"mobileSubscription\":\"Mobile Subscription\",\"manageSubscription\":\"Manage Subscription\",\"tryProPitch\":\"Sign in to unlock {pro}\"},\"helperQueries\":{\"cooking1\":\"Greatest chocolate chip cookie recipe\",\"cooking2\":\"Latest cooking trends on Tiktok\",\"cooking3\":\"Top cookbooks in 2024\",\"cooking4\":\"Healthiest cooking oils \",\"cooking5\":\"Vegetables currently in season\",\"data1\":\"Most expensive city in 2024\",\"data2\":\"Will US interest rates go down this year?\",\"data3\":\"Country with highest tax rate\",\"data4\":\"Market size of the creator economy\",\"data5\":\"Market size of pharmaceutical industry\",\"data6\":\"Market size of longevity technology \",\"data7\":\"Latest findings on global fertility rates\",\"data8\":\"US housing market analysis by city 2024\",\"data9\":\"Price of bitcoin\",\"data10\":\"Apple stock forecast\",\"data11\":\"Analyze the global economy in 2024\",\"data12\":\"The rise of racquet sports\",\"data13\":\"Gas prices in 2024\",\"data14\":\"Trends in global population\",\"data15\":\"Fastest growing exercise trend in 2024\",\"data16\":\"Success rate of Lasik surgery\",\"data17\":\"Costco stock price analysis\",\"data18\":\"Interest rates vs Biden approval from 2021\",\"data19\":\"What is Adobe’s revenue for 2023?\",\"data20\":\"What is Samsung's market cap?\",\"data21\":\"How big is the Grok-1 model?\",\"data22\":\"Number of Waymo self driving rides per day\",\"data23\":\"Why is Japan's GDP declining?\",\"data24\":\"Size of the Meta GPU cluster\",\"entertainment1\":\"Highest-paid actor in Hollywood this year\",\"entertainment2\":\"Most anticipated movies releases this year\",\"entertainment3\":\"Upcoming video game releases this year\",\"entertainment4\":\"Best TV shows May 2024\",\"entertainment5\":\"Most popular Youtube creators in 2024\",\"entertainment6\":\"Upcoming music festivals\",\"entertainment7\":\"The next James Bond\",\"entertainment8\":\"Summer Olympics 2024\",\"entertainment9\":\"Latest news about the Tiktok ban\",\"health1\":\"Meditation techniques in 2024\",\"health2\":\"Health benefits of dark chocolate\",\"health3\":\"Most common nutrient deficiency\",\"health4\":\"What is somatic healing? \",\"health5\":\"Recent research on cold plunge therapy\",\"health6\":\"What is red light therapy?\",\"health7\":\"Recent research on longevity\",\"health8\":\"Breathwork benefits and techniques\",\"health9\":\"Why is magnesium glycinate trending?\",\"health10\":\"Summarize the research on brain breaks\",\"perplexity1\":\"What is Perplexity AI?\",\"perplexity2\":\"How is Perplexity AI different?\",\"recommendations1\":\"Best gaming consoles of 2024\",\"recommendations2\":\"Highest rated electric toothbrushes\",\"recommendations3\":\"Top road bikes in 2024\",\"recommendations4\":\"New AI design tools\",\"recommendations5\":\"Best digital marketing online classes\",\"recommendations6\":\"Best noise cancelling headphones\",\"recommendations7\":\"ETFs to invest in AI\",\"recommendations8\":\"Highest rated e-bikes\",\"recommendations9\":\"Are air fryers worth it?\",\"recommendations10\":\"Best running shoes 2024\",\"recommendations11\":\"Latest men's fashion trends summer 2024\",\"recommendations12\":\"Latest women's fashion trends summer 2024\",\"recommendations13\":\"Brands similar to Lululemon\",\"recommendations14\":\"Global university rankings 2024\",\"recommendations15\":\"Bestselling books released in 2024\",\"recommendations16\":\"Bestselling cookbooks this year\",\"recommendations17\":\"Table of car brands by cost to maintain\",\"recommendations18\":\"Mental health apps 2024\",\"support1\":\"Can I fly with my pet?\",\"support2\":\"How do I file a tax extension?\",\"support3\":\"Registration deadlines for the US election\",\"support4\":\"Refund on delayed flight\",\"support5\":\"What is a high-yield savings account?\",\"support6\":\"What is a ROTH IRA?\",\"support7\":\"Home buying tips in 2024\",\"support8\":\"Tax savings ideas\",\"support9\":\"Top travel credit cards in 2024\",\"support10\":\"Penalty for late tax filing\",\"technology1\":\"Upcoming tech conferences\",\"technology2\":\"Upcoming AI events\",\"technology3\":\"Preventing spam phone calls\",\"technology4\":\"When will the next iPhone be released?\",\"technology5\":\"Rumours about the new iPhone\",\"technology6\":\"The future of SEO\",\"travel1\":\"Most popular travel destinations 2024\",\"travel2\":\"Best coffee shops to work from in Paris\",\"travel3\":\"World's greatest hikes\",\"travel4\":\"City with the most bike lanes\",\"travel5\":\"City with the most Michelin Stars\",\"travel6\":\"Ski resort with most snow this season\",\"knowitalls1\":\"Most iconic movie inventions\",\"knowitalls2\":\"NBA off-season free agent rumors\",\"knowitalls3\":\"Biggest X factor in the NBA Finals\",\"japan1\":\"Photogenic spots in Japan\",\"japan2\":\"The most popular tourist spots in Japan\",\"japan3\":\"What to do when an earthquake occurs\",\"japan4\":\"History of Kinkaku-ji (Golden Pavilion)\",\"japan5\":\"History of Ginkaku-ji (Silver Pavilion)\",\"japan6\":\"How was Tokyo Skytree built?\",\"japan7\":\"History of sushi\",\"japan8\":\"How to store sushi\",\"japan9\":\"Recommended beach spots in Japan\",\"japan10\":\"Why is Tokyo Tower red?\",\"japan11\":\"How do tsunamis occur\",\"japan12\":\"Who was the best-selling Japanese artist this year\",\"japan13\":\"Effects of drinking matcha tea\",\"japan14\":\"Tourist spots around Mount Fuji\",\"japan15\":\"Difference between ryokan and hotel\",\"japan16\":\"Popular sports in Japan\",\"japan17\":\"History of Tanabata (Star Festival)\",\"japan18\":\"Popular hot spring spots in Japan\",\"japan19\":\"Why is Japanese food considered healthy?\",\"japan20\":\"Famous cherry blossom viewing spots\",\"japan21\":\"Why did Shohei Ohtani win MVP?\"},\"promotions\":{\"signupToActivate\":\"You'll need to sign up before activating your free subscription.\",\"promoDisclaimer\":\"By continuing you agree to Perplexity's \u003ctos\u003eTerms of Service\u003c/tos\u003e and acknowledge you've read our \u003cprivacy\u003ePrivacy Policy\u003c/privacy\u003e.\",\"invalidCode\":\"Promo code invalid\",\"promoCode\":\"Promo Code\",\"changeCode\":\"Change Code\",\"activateSub\":\"Activate Subscription\",\"welcome\":\"Welcome to {pplx} {pro}\",\"explore\":\"Explore\",\"exploreProduct\":\"Explore product\",\"errors\":{\"firstTimeOnly\":\"You've previously subscribed to {pplx} {pro}. This promotion is only valid for first-time subscribers.\",\"loginRequired\":\"Please sign in to redeem this promotion.\",\"alreadySubscribed\":\"You are already subscribed to {pplx} {pro} and cannot redeem this promotion.\",\"previouslySubscribed\":\"You have previously subscribed to {pplx} {pro} and cannot redeem this promotion.\",\"errorRetry\":\"An error occurred. It's likely your promotion code is invalid.\"},\"normalPrice\":\"Normal Price\",\"yourPrice\":\"You Pay\",\"partners\":{\"magenta\":{\"bannerMessage\":\"Activate your free 1-year subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 1-year subscription to Perplexity Pro thanks to Magenta Moments.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"},\"softbank\":{\"bannerMessage\":\"Activate your free 1-year subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 1-year subscription to Perplexity Pro thanks to Softbank.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"},\"zoom\":{\"bannerMessage\":\"Activate your free 1-year subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 1-year subscription to Perplexity Pro thanks to Zoom.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"},\"linkedin\":{\"bannerMessage\":\"Activate your free 1-year subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 1-year subscription to Perplexity Pro thanks to LinkedIn Premium.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"},\"uber\":{\"bannerMessage\":\"Activate your free 1-year subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 1-year subscription to Perplexity Pro for being an Uber One member.\",\"enterCodeToContinue\":\"Enter the promo code sent to your email from Uber to activate your free Perplexity Pro subscription.\"},\"logitech\":{\"bannerMessage\":\"Activate your free 6-month subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 6-month subscription to Perplexity Pro thanks to Logitech.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"},\"sktelecom\":{\"bannerMessage\":\"Activate your free 12-month subscription.\",\"title\":\"Welcome!\",\"description\":\"You are receiving a free 12-month subscription to Perplexity Pro thanks to SK Telecom.\",\"enterCodeToContinue\":\"Enter your promo code to activate your free subscription.\"}}},\"settings\":{\"settingsTitle\":\"Settings\",\"accountTitle\":\"Account\",\"profileTitle\":\"Profile\",\"organizationTitle\":\"Your Organization\",\"enterpriseTitle\":\"Enterprise\",\"dataTitle\":\"Data\",\"account\":{\"account\":\"Account\",\"general\":\"General\",\"appearance\":\"Appearance\",\"appearanceDescription\":\"Set your preferred theme for {pplx}\",\"dark\":\"Dark\",\"systemDark\":\"System (Dark)\",\"light\":\"Light\",\"systemLight\":\"System (Light)\",\"system\":\"System\",\"language\":\"Language\",\"languageDescription\":\"Set your preferred language for {pplx}'s interface\",\"cookies\":\"Cookies\",\"all\":\"All\",\"necessary\":\"Necessary\",\"avatar\":\"Avatar\",\"username\":\"Username\",\"save\":\"Save\",\"cancel\":\"Cancel\",\"aiDataRetention\":\"AI Data Retention\",\"aiDataRetentionDescription\":\"AI Data Retention allows Perplexity to use your searches to improve AI models. Turn this setting off if you wish to exclude your data from this process.\",\"enterpriseAIDataRetentionDescription\":\"All enterprise customers are automatically excluded from AI Data Retention. No model providers use Perplexity Enterprise data for training models.\",\"enterpriseSubscription\":\"Enterprise Subscription\",\"subscription\":\"Subscription\",\"aiModel\":\"AI Model\",\"aiModelDescription\":\"Now includes {claude}, {gpt4}, and {pplx}\",\"imageGenerationModel\":\"Image Generation Model\",\"default\":\"Default\",\"defaultModelDescription\":\"Optimized for fast search by {pplx}\",\"sdxlImageModelDescription\":\"Optimized for fast image generation\",\"experimental\":\"Experimental\",\"experimentalModelDescription\":\"Advanced model trained by {pplx} based on Llama 3.1 70B\",\"openaiDescription\":\"Advanced model by {openai}\",\"openaiNewDescription\":\"Latest advanced model by {openai}\",\"dalle3Description\":\"Latest image generation model by {openai}\",\"playgroundDescription\":\"Latest image generation model by {playground}\",\"claude2Description\":\"Latest fast model by {anthropic}\",\"claude3Description\":\"Latest advanced model by {anthropic}\",\"llamaXLargeDescription\":\"Advanced model trained by {pplx} based on Llama 3.1 405B\",\"claude3RateLimit\":\"Remaining daily usages: {remaining}\",\"proDiscord\":\"{pro} {discord}\",\"mistralDescription\":\"Latest model by {mistral}\",\"join\":\"Join\",\"proSupport\":\"{pro} Support\",\"contact\":\"Contact\",\"referrals\":\"Referrals\",\"successful\":\"Successful\",\"referAFriend\":\"Refer a Friend\",\"helpFaq\":\"Help \u0026 FAQ\",\"giveUsFeedback\":\"Give us feedback\",\"activeAccount\":\"Active account\",\"sessionStatus\":\"You are signed in as {username}\",\"sessions\":\"Sessions\",\"whereSignedIn\":\"Devices or browsers where you are signed in\",\"signOut\":\"Sign out\",\"signOutConfirmation\":\"Are you sure you want to sign out?\",\"signOutAll\":\"Sign out of all sessions\",\"signOutAllConfirmation\":\"Are you sure you want to sign out of all sessions? This will also sign you out of your current device or browser.\",\"deleteAccount\":\"Delete account\",\"deleteAccountDescription\":\"Permanently delete your account and data\",\"deleteAccountWarnings\":{\"confirmDeletion\":\"Confirm Account Deletion\",\"cta\":\"Before you delete your account, please take a moment to understand what will happen to your data:\",\"profileWarning\":\"Your profile details, preferences, and settings will be removed.\",\"historyWarning\":\"Your search history, threads, and any other content you've shared will be deleted.\",\"timeWarning\":\"All data will be permanently deleted 30 days after account deletion.\",\"subscriptionWarning\":\"If you have an active Pro subscription, please click \\\"Manage Pro\\\" to cancel your subscription before deleting your account.\",\"permanencyWarning\":\"Keep in mind that deleting your account can't be undone.\"}},\"profile\":{\"profileTitle\":\"Profile\",\"activate\":\"Activate\",\"pause\":\"Pause\",\"autodetectLanguage\":\"Automatic (detect input)\",\"introTitle\":\"Introduce yourself for personalized answers. Share any information or instructions that the AI should know.\",\"introSubtitle\":\"Your profile is private and only used to instruct the AI to be more useful to you. Pause or clear your profile at any time.\",\"introductionPlaceholder\":\"I'm a software engineer who likes to play guitar and go hiking\",\"intro\":\"Introduce yourself, share as much as you'd like\",\"location\":\"Location\",\"locationPlaceholder\":\"Boulder, CO\",\"preferredLanguage\":\"Preferred response language\",\"save\":\"Save\",\"clear\":\"Clear\",\"getStarted\":\"Get Started\",\"questionsForYou\":\"Questions for you\"},\"api\":{\"signInApiPitch\":\"Sign in to access pplx-api\",\"learnMore\":\"Learn More\",\"announcement\":\"Announcement\",\"docs\":\"Docs\",\"supportedModels\":\"Supported Models\",\"termsOfService\":\"Terms of Service\",\"availableCredits\":\"Available Credits\",\"pendingCredits\":\"(${amount} pending)\",\"autoTopUp\":\"Auto Top Up\",\"automaticTopUp\":\"Automatic Top Up\",\"autoTopUpDescription\":\"How much would you like to automatically top up when your balance drops below $2?\",\"buyCredits\":\"Buy Credits\",\"auto\":\"Auto\",\"buy\":\"Buy\",\"active\":\"Active\",\"inactive\":\"Inactive\",\"currently\":\"Currently: \",\"amount\":\"Amount\",\"howManyCredits\":\"How many credits would you like to buy?\",\"buyNow\":\"Buy Now\",\"areYouSure\":\"Are you sure you want to buy this many pplx-api credits?\",\"yes\":\"Yes\",\"no\":\"No\",\"proBonus\":\"$$5 {pro} Bonus\",\"currentUsage\":\"Current Usage\",\"apiKeys\":\"API Keys\",\"generate\":\"Generate\",\"editPayment\":\"Edit Payment\",\"viewDashboard\":\"View Dashboard\",\"successToast\":\"Updated Successfully!\",\"errorToast\":\"Error. Please try again.\",\"pendingToast\":\"Purchase pending...\",\"bannerSetup\":\"Setup Payment\",\"bannerSetupDescription\":\"Connect a credit card to start using the API\",\"bannerExisting\":\"Use Existing Payment Method\",\"bannerExistingDescription\":\"Use the same payment method that you are using for {pplxPro} for API billing.\",\"bannerVercel\":\"{vercel} Integration\",\"bannerVercelDescription\":\"In order to connect to {vercel}, you must add a payment method, purchase some credits, and create an API key.\",\"bannerNoCredits\":\"No Credits\",\"bannerNoCreditsDescription\":\"Please add credits before you can access the API and use your API keys. It may take up to 10 minutes for free Pro credits to be added to your available balance.\",\"setup\":\"Setup\",\"confirm\":\"Confirm\",\"review\":\"Review\",\"save\":\"Save\"},\"data\":{\"signInMessage\":\"Sign in to manage your data\",\"data\":\"Data\",\"yourFiles\":\"Your Files\",\"organizationFiles\":\"Organization Files\",\"nameTableHeader\":\"Name\",\"uploadedByTableHeader\":\"Uploaded by\",\"dateTableHeader\":\"Date\",\"uploadButtonText\":\"Upload\",\"searchFiles\":\"Search files\"},\"orgPanel\":{\"headerTitle\":\"Organization\",\"orgName\":\"Name\",\"orgNameDescription\":\"The name of your Organization\",\"admin\":\"Admin\",\"admins\":\"Admins\",\"adminsDescription\":\"The emails for your company admins\",\"billingAdmin\":\"Billing admin\",\"billingAdmins\":\"Billing admins\",\"billingAdminsDescription\":\"The emails for billing inquiries\",\"trustCenterDescription\":\"Security documentation\",\"support\":\"Support\",\"supportDescription\":\"The email address to contact for support\",\"orgLogo\":\"Logo\",\"orgSize\":\"Member Amount\",\"contacts\":\"Contacts\",\"member\":\"Member\",\"memberList\":\"Members\",\"membersCount\":\"{members, plural, =1 {# Member} other {# Members}}\",\"domainList\":\"Domain List\",\"leaveOrg\":\"Leave Organization\",\"leaveOrgDescription\":\"Permanently leave {org}\",\"confirmLeaveOrgMessage\":\"Leaving this organization means you might lose access to {pplx} {pro}. It may also change the way your data is managed. This action cannot be undone.\",\"invite\":\"Invite\",\"invited\":\"Invited\",\"invitedCount\":\"{invites} Invited\",\"inviteNewMembers\":\"Invite new members\",\"alreadyInvited\":\"User already invited to this organization.\",\"memberOfAnotherOrg\":\"User is already part of another organization.\",\"noInvitePermission\":\"You do not have permission to invite new members.\",\"deleteOrganization\":\"Delete organization\",\"confirmDeleteOrgMessage\":\"Deleting this organization cannot be undone. It may also change the way your data is managed.\",\"contactSupportToDeleteOrg\":\"Contact support to delete this organization\",\"removeMembersToDeleteOrg\":\"Remove all members and invites to enable delete\",\"unexpectedError\":\"An unexpected error occurred. Try again.\",\"inviteMoreUsers\":\"Invite more members to your organization to get the most out of Perplexity.\",\"add\":\"Add\",\"edit\":\"Edit\",\"imageTooLarge\":\"Image too large\",\"failedToUpdate\":\"Failed to update image\",\"base64Error\":\"Image must be a base64 encoded string\",\"dataRetentionWarning\":\"Ensure that any data shared complies with your Organization's security policies and confidentiality guidelines.\",\"dataRetentionLimit\":\"Your provider {provider} is limiting your file retention to 7 days.\",\"companyDataPrivacyTitle\":\"Company Data Privacy Policy\",\"manageBilling\":\"Manage Billing\",\"upgrade\":\"Upgrade\",\"billing\":\"Billing\",\"shareableInviteSectionName\":\"Shareable Invite\",\"inviteLinkName\":\"Invite link\",\"inviteLinkDescription\":\"A secret link for inviting new members\",\"regenerateInviteLink\":\"Regenerate\",\"enableInviteLink\":\"Enable\",\"orgBillingBanner\":\"Please complete the payment process to use Enterprise Pro features\",\"disableInviteLink\":\"Disable\",\"requestSAML\":\"Request SAML SSO\",\"samlDescription\":\"If you have a SAML SSO provider, you can use it to authenticate your members\",\"contactSales\":\"Contact Sales\",\"ssoEnableRowName\":\"Enable SSO\",\"ssoEnableRowDescription\":\"Seamless access for your entire organization\",\"ssoEnableRowActionLabel\":\"Enable\",\"ssoEnableRowPayActionLabel\":\"Complete payment to enable SSO\",\"ssoEnableModalTitle\":\"Enable SSO\",\"ssoEnableModalCTA\":\"Before you enable SSO for your organization, please take a moment to review the following information:\",\"ssoEnableModalBulletOne\":\"Users in your organization will be able sign into Perplexity using your corporate identity provider.\",\"ssoEnableModalBulletTwo\":\"You will need integrate your corporate identity provider and verify ownership of your domains by following the provided walkthroughs.\",\"ssoEnableModalBulletThree\":\"Enabling SSO requires a minimum organization size of 5 paid seats.\",\"ssoEnableModalFooter\":\"If you agree with these terms, click \\\"Enable SSO\\\" to integrate your identity provider and verify your domain ownership.\",\"ssoEnableModalAction\":\"Enable SSO\",\"ssoHeaderTitle\":\"Single Sign-on\",\"ssoIPDRowName\":\"Identitity Provider\",\"ssoIDPRowDescription\":\"Status: {status}\",\"ssoIDPRowActionLabel\":\"Connect\",\"ssoDomainRowName\":\"Domains\",\"ssoDomainRowActionLabel\":\"Add\",\"ssoForceSSOToggleLabel\":\"Require SSO\",\"makeAdminAction\":\"Make admin\",\"removeAdminAction\":\"Remove admin\",\"makeAdminModalTitle\":\"Make admin\",\"makeAdminModalBody\":\"Make {email} an admin?\",\"removeAdminModalTitle\":\"Remove admin\",\"removeAdminModalBody\":\"Remove {email} from admins?\"},\"connectors\":{\"title\":\"Integrations\",\"connect\":\"Connect\",\"disconnect\":\"Disconnect\",\"reconnect\":\"Reconnect\",\"error\":\"An error occured when connecting to {connector}. Please try again.\",\"factset\":{\"name\":\"FactSet\",\"disconnected\":\"Connect your account to include FactSet financial data in search results.\",\"connected\":\"Your search results include data from FactSet.\"}}},\"panel\":{\"less\":\"Less\",\"more\":\"More\",\"overview\":\"Overview\",\"source\":\"Source: {source}\"},\"accessLevel\":{\"onlyOwner\":\"Owner Only\",\"ownerAndContributors\":\"Only owner and contributors can view\",\"onlyAuthor\":\"Only the author can view\",\"secret\":\"Secret\",\"anyoneWithLink\":\"Anyone with the link can view\",\"shareable\":\"Shareable\",\"share\":\"Share\",\"viewers\":\"Viewers\",\"contributors\":\"Contributors\"},\"threadItem\":{\"deleteThread\":\"Delete Thread\",\"deleteThreadConfirmation\":\"Are you sure you want to delete this thread?\",\"followupTo\":\"Follow up to\",\"convertThreadtoArticle\":\"Convert to Page\"},\"socialShare\":{\"linkCopied\":\"Link copied\",\"copyLink\":\"Copy Link\",\"editQuery\":\"Edit Query\",\"shareLink\":\"Share Link\"},\"threadAccessory\":{\"searchImages\":\"Search Images\",\"searchVideos\":\"Search Videos\",\"generateImage\":\"Generate Image\",\"noImagesFound\":\"No Images Found\",\"noVideosFound\":\"No Videos Found\"},\"askInput\":{\"placeholder\":\"Ask anything...\",\"placeholderFollowUp\":\"Ask follow-up\",\"skipText\":\"Skip questions and read the answer\",\"loginModal\":{\"title\":\"Try {copilot} for free\",\"description\":\"Our most powerful search, ideal for complex questions.\"},\"pricingModal\":{\"title\":\"Want more {copilot}?\",\"description\":\"With {pplx} {pro}, get as many as you want\"},\"copilotToggle\":{\"copilotTagline\":\"Our most powerful search, ideal for longer answers to complex questions.\",\"copilotUsagePro\":\"searches left today.\",\"copilotUsageDefault\":\"searches left. Reloads every 4 hours.\",\"learnMore\":\"Learn More\",\"copilotModalDesc\":\"Our most powerful search, ideal for longer answers to complex questions\",\"title\":\"Want more {copilot} uses?\",\"description\":\"With Perplexity Pro, get as many as you want\",\"searchesLeft\":\"searches left today\",\"reloadsEvery\":\"Reloads every 4 hours\"},\"assistants\":{\"internetTitle\":\"All\",\"internetDescription\":\"Search across the entire internet\",\"scholarTitle\":\"Academic\",\"scholarDescription\":\"Search for published academic papers\",\"writingTitle\":\"Writing\",\"writingDescription\":\"Generate text or chat without searching the web\",\"videoTitle\":\"Video\",\"videoDescription\":\"Discover and watch videos\",\"redditTitle\":\"Social\",\"redditDescription\":\"Search for discussions and opinions\",\"wolframTitle\":\"Math\",\"wolframDescription\":\"Solve equations and find numerical answers\",\"newsTitle\":\"News\",\"newsDescription\":\"Search for articles\",\"yelpDescription\":\"Discover local businesses\",\"shoppingTitle\":\"Shopping\",\"shoppingDescription\":\"Search for products\",\"shopifyDescription\":\"Search for products on {shopify}\",\"klarnaDescription\":\"Search for products on {klarna}\",\"takoDescription\":\"Search for insights on {tako}\",\"financeTitle\":\"Finance\",\"financeDescription\":\"Search financial data\",\"personalTitle\":\"My Files\",\"personalDescription\":\"Your personal file library that you can use as source.\",\"teamTitle\":\"Team Files\",\"teamDescription\":\"This is your teams file library that you can use as source.\"}},\"pro\":{\"pplx-pro\":\"{pplx} {pro}\",\"catchword\":\"{pplx} {pro} is the most powerful way to search the internet with unlimited {proSearch}, upgraded AI models, unlimited file upload, image generation, and API credits.\"},\"helper\":{\"copilot\":\"What is {copilot}?\",\"help\":\"Help \u0026 FAQ\",\"pro\":\"{pplx} {pro}\",\"tos\":\"Terms of Service\",\"privacy\":\"Privacy Policy\",\"shortcuts\":\"Keyboard Shortcuts\"},\"maps\":{\"searchHere\":\"Search here\",\"searching\":\"Searching...\",\"viewOnYelp\":\"View on Yelp\"},\"keyboardShortcuts\":{\"newThread\":\"New thread\",\"toggleCopilot\":\"Toggle {copilot}\",\"toggleIncognito\":\"Toggle incognito\",\"stopGenerating\":\"Stop generating\",\"showShortcuts\":\"Show shortcuts\"},\"redirectReasons\":{\"threadAccessNotAllowed\":\"Cannot view this thread.\",\"threadExpired\":\"This thread is expired and cannot be viewed.\",\"invalidThread\":\"This thread does not exist.\",\"pageAccessNotAllowed\":\"Cannot view this page.\",\"collectionAccessNotAllowed\":\"Cannot view this collection.\",\"invalidCollection\":\"This collection does not exist.\",\"subscriptionAlreadyActive\":\"Unable to apply discount code to an active subscription.\"},\"gdpr\":{\"cookiePolicy\":\"Cookie Policy\",\"acceptAllCookies\":\"Accept All Cookies\",\"acceptNecessaryCookies\":\"Necessary Cookies\",\"cookieConsent\":\"We use cookies to enhance your experience. By clicking \\\"Accept All Cookies\\\" or selecting \\\"Necessary Cookies\\\", you agree to our \u003clink\u003eprivacy policy\u003c/link\u003e.\"},\"discover\":{\"personalizeLabel\":\"Personalize Discover\",\"personalizeTitle\":\"Make it yours\",\"personalizeDescription\":\"Select topics and interests to customize your Discover experience\",\"savePersonalizationLabel\":\"Save Interests\",\"signInToPersonalize\":\"Sign in to customize your discover experience\",\"topics\":{\"forYou\":{\"title\":\"For You\",\"description\":\"Stories curated for you\"},\"top\":{\"title\":\"Top\"},\"arts\":{\"title\":\"Arts \u0026 Culture\"},\"science\":{\"title\":\"Science\"},\"entertainment\":{\"title\":\"Entertainment\"},\"tech\":{\"title\":\"Tech\"},\"business\":{\"title\":\"Economics\"},\"sports\":{\"title\":\"Sports\"},\"lifestyle\":{\"title\":\"Lifestyle\"},\"design\":{\"title\":\"Design\"}}}},\"children\":[\"$\",\"$L1e\",null,{\"session\":{\"user\":{\"name\":\"М М\",\"email\":\"igoshcenko@gmail.com\",\"image\":\"https://imagedelivery.net/MPdwyYSWT8IY7lxgN3x3Uw/90516b57-5a3e-4bb9-c16a-64567abd2200/thumbnail\",\"id\":\"859b2fa1-e3e9-4f83-951e-beb6973b2f3c\",\"username\":\"igoshcenko368\",\"subscription_status\":null,\"subscription_source\":null},\"preventUsernameRedirect\":false},\"children\":[\"$\",\"$L1f\",null,{\"hostname\":\"www.perplexity.ai\",\"children\":[\"$\",\"$L20\",null,{\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\",\"children\":[\"$\",\"$L21\",null,{\"localUserSettings\":{\"colorScheme\":null,\"isCollapsed\":true,\"isIncognito\":true,\"isDiscoverInterestBoxDismissed\":false,\"isEnterpriseAdDismissed\":false,\"isDefaultSearchExtensionInstallClicked\":false},\"children\":[\"$\",\"$L22\",null,{\"autosuggestType\":\"legacy-dropdown\",\"isFileSearchEnabled\":false,\"helperQueriesLoggedOutVariation\":null,\"focusedExperienceVariant\":\"control\",\"floatingSignupProps\":{\"showFloatingSignup\":true,\"floatingSignupSize\":\"compact\",\"floatingSignupShowLogo\":true,\"floatingSignupVariant\":\"boldGoogle\"},\"getAppVariant\":\"top-left\",\"getDefaultSearchVariant\":null,\"children\":[\"$\",\"$L23\",null,{\"isMobileUserAgent\":false,\"hostname\":\"www.perplexity.ai\",\"children\":[\"$\",\"$L24\",null,{\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L25\",null,{}],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://pplx-next-static-public.perplexity.ai/_next/static/css/ff88f718b078cf59.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}]}]}]}]}]}]}]}]}]\n"])</script><script>self.__next_f.push([1,"26:T3682,"])</script><script>self.__next_f.push([1,"{\"answer\": \"\\u0412\\u043e\\u0442 \\u043f\\u0440\\u0438\\u043c\\u0435\\u0440 \\u043a\\u043e\\u0434\\u0430 \\u043d\\u0430 Python, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0443 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438 \\u043e 9 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430\\u0445, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u0432\\u044b \\u043e\\u043f\\u0438\\u0441\\u0430\\u043b\\u0438, \\u0434\\u043e \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u043a Telegram \\u0431\\u043e\\u0442\\u0443. \\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u0443\\u0435\\u0442 \\u0431\\u0438\\u0431\\u043b\\u0438\\u043e\\u0442\\u0435\\u043a\\u0443 `shelve` \\u0434\\u043b\\u044f \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445, \\u0447\\u0442\\u043e \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u044e \\u0434\\u0430\\u0436\\u0435 \\u043f\\u0440\\u0438 \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435 \\u0431\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0443\\u0434\\u0430\\u043b\\u0435\\u043d\\u0438\\u0438 \\u043f\\u0435\\u0440\\u0435\\u043f\\u0438\\u0441\\u043a\\u0438.\\n\\n```python\\nimport shelve\\n\\ndef initialize_game_data():\\n    with shelve.open('game_data', writeback=True) as db:\\n        if 'initialized' not in db:\\n            db['menu'] = \\\"\\u0413\\u043b\\u0430\\u0432\\u043d\\u043e\\u0435 \\u043c\\u0435\\u043d\\u044e \\u0438\\u0433\\u0440\\u044b\\\"\\n            db['how_to_play'] = \\\"\\u0418\\u043d\\u0441\\u0442\\u0440\\u0443\\u043a\\u0446\\u0438\\u044f \\u043f\\u043e \\u0438\\u0433\\u0440\\u0435: ...\\\"\\n            db['bot_invitation'] = \\\"\\u041f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0448\\u0430\\u0435\\u043c \\u0432\\u0430\\u0441 \\u0441\\u044b\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c!\\\"\\n            db['how_to_play_ira'] = \\\"\\u041a\\u0430\\u043a \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0432 \\u0418\\u0440\\u0443: ...\\\"\\n            db['game_name'] = \\\"\\u041d\\u0430\\u0437\\u0432\\u0430\\u043d\\u0438\\u0435 \\u0438\\u0433\\u0440\\u044b: ...\\\"\\n            db['player_names'] = []\\n            db['invite_friend'] = True\\n            db['game_modes'] = [\\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c\\\", \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c\\\"]\\n            db['initialized'] = True\\n\\n    print(\\\"\\u0418\\u0433\\u0440\\u043e\\u0432\\u044b\\u0435 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d\\u044b \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u044b.\\\")\\n\\ndef get_game_data(key):\\n    with shelve.open('game_data') as db:\\n        return db.get(key)\\n\\n# \\u0418\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0438 \\u043f\\u0435\\u0440\\u0432\\u043e\\u043c \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435\\ninitialize_game_data()\\n\\n# \\u041f\\u0440\\u0438\\u043c\\u0435\\u0440 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f:\\nprint(get_game_data('menu'))\\nprint(get_game_data('how_to_play'))\\n# \\u0438 \\u0442.\\u0434.\\n```\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0434\\u0435\\u043b\\u0430\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0435\\u0435:\\n\\n1. \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f `initialize_game_data()` \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u0442 \\u0432\\u0441\\u0435 9 \\u043f\\u0443\\u043d\\u043a\\u0442\\u043e\\u0432 \\u0432 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u043e\\u0435 \\u0445\\u0440\\u0430\\u043d\\u0438\\u043b\\u0438\\u0449\\u0435.\\n2. \\u0414\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u044e\\u0442\\u0441\\u044f \\u0441 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\\u043c `shelve`, \\u0447\\u0442\\u043e \\u043e\\u0431\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0438\\u0445 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u043d\\u043e\\u0441\\u0442\\u044c \\u043c\\u0435\\u0436\\u0434\\u0443 \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0430\\u043c\\u0438 \\u043f\\u0440\\u043e\\u0433\\u0440\\u0430\\u043c\\u043c\\u044b.\\n3. \\u0424\\u043b\\u0430\\u0433 `initialized` \\u0433\\u0430\\u0440\\u0430\\u043d\\u0442\\u0438\\u0440\\u0443\\u0435\\u0442, \\u0447\\u0442\\u043e \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u0443\\u044e\\u0442\\u0441\\u044f \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u043e\\u0434\\u0438\\u043d \\u0440\\u0430\\u0437.\\n4. \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f `get_game_data(key)` \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f \\u043a \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u043d\\u044b\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c.\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u0438 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u0432\\u0430\\u0448\\u0435\\u043c Telegram \\u0431\\u043e\\u0442\\u0435, \\u0432\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0432\\u044b\\u0437\\u044b\\u0432\\u0430\\u0442\\u044c `get_game_data()` \\u0434\\u043b\\u044f \\u043f\\u043e\\u043b\\u0443\\u0447\\u0435\\u043d\\u0438\\u044f \\u043d\\u0443\\u0436\\u043d\\u043e\\u0439 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438. \\u041d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440:\\n\\n```python\\nfrom telegram.ext import Updater, CommandHandler\\n\\ndef start(update, context):\\n    menu = get_game_data('menu')\\n    update.message.reply_text(menu)\\n\\ndef main():\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context=True)\\n    dp = updater.dispatcher\\n\\n    dp.add_handler(CommandHandler(\\\"start\\\", start))\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434 \\u043e\\u0431\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u043d\\u043e\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0438 \\u0438\\u0445 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u043e\\u0441\\u0442\\u044c \\u0434\\u0430\\u0436\\u0435 \\u043f\\u0440\\u0438 \\u0443\\u0434\\u0430\\u043b\\u0435\\u043d\\u0438\\u0438 \\u043f\\u0435\\u0440\\u0435\\u043f\\u0438\\u0441\\u043a\\u0438 \\u0431\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0435\\u0433\\u043e \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435.\", \"web_results\": [], \"chunks\": [\"\\u0412\\u043e\\u0442 \\u043f\\u0440\\u0438\\u043c\\u0435\\u0440 \\u043a\\u043e\\u0434\\u0430 \\u043d\\u0430\", \" Python, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\", \"\\u0443\\u0440\\u0443 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0445\", \"\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438 \\u043e\", \" 9 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430\\u0445, \\u043a\\u043e\\u0442\\u043e\\u0440\", \"\\u044b\\u0435 \\u0432\\u044b \\u043e\\u043f\\u0438\\u0441\\u0430\\u043b\\u0438, \\u0434\\u043e\", \" \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432\", \" \\u043a Telegram \\u0431\\u043e\", \"\\u0442\\u0443. \\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\", \"\\u0443\\u0435\\u0442 \\u0431\\u0438\\u0431\\u043b\\u0438\\u043e\\u0442\\u0435\\u043a\\u0443\", \" `shelve` \\u0434\\u043b\\u044f \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f\", \" \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445, \\u0447\\u0442\\u043e \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043e\\u0445\", \"\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u044e \\u0434\\u0430\\u0436\\u0435 \\u043f\\u0440\\u0438\", \" \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435 \\u0431\", \"\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0443\\u0434\\u0430\\u043b\\u0435\\u043d\\u0438\\u0438 \\u043f\\u0435\\u0440\\u0435\\u043f\\u0438\\u0441\\u043a\\u0438\", \".\\n\\n```python\\nimport shelve\\n\\ndef initialize\", \"_game_data():\\n    with shelve.open('game_data',\", \" writeback=True) as db:\\n        if 'initialize\", \"d' not in db:\", \"\\n            db['menu'] = \\\"\\u0413\\u043b\\u0430\\u0432\", \"\\u043d\\u043e\\u0435 \\u043c\\u0435\\u043d\\u044e \\u0438\\u0433\\u0440\\u044b\\\"\\n            db['how\", \"_to_play'] = \\\"\\u0418\\u043d\", \"\\u0441\\u0442\\u0440\\u0443\\u043a\\u0446\\u0438\\u044f \\u043f\\u043e \\u0438\\u0433\\u0440\\u0435\", \": ...\\\"\\n            db['bot_invitation\", \"'] = \\\"\\u041f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0448\\u0430\\u0435\\u043c \\u0432\", \"\\u0430\\u0441 \\u0441\\u044b\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c!\\\"\\n            db['how_to_play_\", \"ira'] = \\\"\\u041a\\u0430\\u043a \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0432\", \" \\u0418\\u0440\\u0443: ...\\\"\\n            db['game_name'] = \\\"\\u041d\\u0430\\u0437\\u0432\\u0430\\u043d\\u0438\\u0435 \\u0438\\u0433\\u0440\\u044b:\", \" ...\\\"\\n            db['player_names'] = []\\n            db['invite_friend'] = True\\n            db['game_modes\", \"'] = [\\\"\\u0418\\u0433\\u0440\\u0430 \\u0441\", \" \\u0431\\u043e\\u0442\\u043e\\u043c\\\", \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c\\\"]\\n            db['initialized'] = True\\n\\n    print\", \"(\\\"\\u0418\\u0433\\u0440\\u043e\\u0432\\u044b\\u0435 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0438\\u043d\\u0438\\u0446\\u0438\", \"\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d\\u044b \\u0438\", \" \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u044b.\\\")\\n\\ndef get\", \"_game_data(key):\\n    with shelve.open('game_data') as db:\\n        return db.\", \"get(key)\\n\\n# \\u0418\\u043d\", \"\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u044f \\u0434\\u0430\\u043d\", \"\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0438 \\u043f\\u0435\\u0440\\u0432\\u043e\\u043c \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435\\ninitialize_game_data()\\n\\n# \\u041f\\u0440\\u0438\\u043c\\u0435\\u0440 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f:\", \"\\nprint(get_game_data('menu'))\\nprint(get_game_data('how_to_play'))\\n# \\u0438 \\u0442\", \".\\u0434.\\n```\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0434\\u0435\\u043b\\u0430\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0435\\u0435:\", \"\\n\\n1. \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f `initialize_game_data()` \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0438 \\u0441\", \"\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u0442 \\u0432\\u0441\\u0435\", \" 9 \\u043f\\u0443\\u043d\\u043a\\u0442\\u043e\\u0432 \\u0432 \\u043f\\u043e\\u0441\\u0442\", \"\\u043e\\u044f\\u043d\\u043d\\u043e\\u0435 \\u0445\\u0440\\u0430\\u043d\\u0438\\u043b\", \"\\u0438\\u0449\\u0435.\\n2. \\u0414\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441\", \"\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u044e\\u0442\\u0441\\u044f \\u0441 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\", \"\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\\u043c `shelve`, \\u0447\\u0442\\u043e\", \" \\u043e\\u0431\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0438\\u0445\", \" \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u043d\\u043e\\u0441\\u0442\\u044c \\u043c\\u0435\\u0436\\u0434\\u0443\", \" \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0430\\u043c\\u0438 \\u043f\\u0440\\u043e\\u0433\\u0440\\u0430\\u043c\\u043c\", \"\\u044b.\\n3. \\u0424\\u043b\\u0430\\u0433 `initialized` \\u0433\\u0430\\u0440\\u0430\\u043d\\u0442\\u0438\\u0440\\u0443\\u0435\\u0442, \\u0447\\u0442\\u043e\", \" \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u0443\\u044e\\u0442\\u0441\\u044f \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u043e\\u0434\\u0438\\u043d \\u0440\\u0430\\u0437.\", \"\\n4. \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f `get_game_data(key)` \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0434\\u043e\", \"\\u0441\\u0442\\u0443\\u043f \\u043a \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u043d\\u044b\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\", \".\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c\", \" \\u044d\\u0442\\u0438 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432\", \" \\u0432\\u0430\\u0448\\u0435\\u043c Telegram \\u0431\\u043e\", \"\\u0442\\u0435, \\u0432\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0432\", \"\\u044b\\u0437\\u044b\\u0432\\u0430\\u0442\\u044c `get_game_data()` \\u0434\\u043b\\u044f \\u043f\\u043e\\u043b\\u0443\\u0447\\u0435\\u043d\\u0438\\u044f \\u043d\\u0443\\u0436\\u043d\\u043e\\u0439 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438.\", \" \\u041d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440:\\n\\n```python\\nfrom telegram.ext import Up\", \"dater, CommandHandler\\n\\ndef start(update, context):\\n    menu = get_game_data\", \"('menu')\\n    update.message.reply_text\", \"(menu)\\n\\ndef main():\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\", \"\\\", use_context=True\", \")\\n    dp = updater.dispatcher\", \"\\n\\n    dp.add_handler(CommandHandler(\\\"start\\\", start))\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043f\\u043e\\u0434\", \"\\u0445\\u043e\\u0434 \\u043e\\u0431\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\", \"\\u043e\\u0445\\u0440\\u0430\\u043d\\u043d\\u043e\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0438\", \" \\u0438\\u0445 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u043e\\u0441\\u0442\\u044c \\u0434\\u0430\", \"\\u0436\\u0435 \\u043f\\u0440\\u0438 \\u0443\\u0434\\u0430\\u043b\\u0435\\u043d\\u0438\\u0438 \\u043f\\u0435\\u0440\\u0435\\u043f\\u0438\\u0441\\u043a\\u0438 \\u0431\", \"\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0435\\u0433\\u043e \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435.\"], \"extra_web_results\": []}"])</script><script>self.__next_f.push([1,"27:T4f80,"])</script><script>self.__next_f.push([1,"{\"answer\": \"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0432\\u043e\\u0442 \\u0432\\u0442\\u043e\\u0440\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a\\u043e\\u0434\\u0430, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0440\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c Telegram \\u0431\\u043e\\u0442\\u0430 \\u0441 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\\u043c \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u043d\\u044b\\u0445 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445:\\n\\n```python\\nfrom telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup\\nfrom telegram.ext import Updater, CommandHandler, CallbackQueryHandler, ConversationHandler, MessageHandler, Filters\\n\\n# \\u0418\\u043c\\u043f\\u043e\\u0440\\u0442\\u0438\\u0440\\u0443\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438\\nfrom game_data_init import get_game_data, initialize_game_data\\n\\n# \\u041e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u044f\\u0435\\u043c \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f \\u0440\\u0430\\u0437\\u0433\\u043e\\u0432\\u043e\\u0440\\u0430\\nMENU, GAME_MODE, PLAYER_NAME, INVITE_FRIEND = range(4)\\n\\ndef start(update: Update, context):\\n    menu = get_game_data('menu')\\n    keyboard = [\\n        [InlineKeyboardButton(\\\"\\u041a\\u0430\\u043a \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\\\", callback_data='how_to_play')],\\n        [InlineKeyboardButton(\\\"\\u041d\\u0430\\u0447\\u0430\\u0442\\u044c \\u0438\\u0433\\u0440\\u0443\\\", callback_data='start_game')],\\n        [InlineKeyboardButton(\\\"\\u041e\\u0431 \\u0438\\u0433\\u0440\\u0435\\\", callback_data='about_game')]\\n    ]\\n    reply_markup = InlineKeyboardMarkup(keyboard)\\n    update.message.reply_text(menu, reply_markup=reply_markup)\\n    return MENU\\n\\ndef button(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n\\n    if query.data == 'how_to_play':\\n        how_to_play = get_game_data('how_to_play')\\n        query.edit_message_text(text=how_to_play)\\n    elif query.data == 'start_game':\\n        game_modes = get_game_data('game_modes')\\n        keyboard = [[InlineKeyboardButton(mode, callback_data=f'mode_{i}')] for i, mode in enumerate(game_modes)]\\n        reply_markup = InlineKeyboardMarkup(keyboard)\\n        query.edit_message_text(text=\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438\\u0433\\u0440\\u044b:\\\", reply_markup=reply_markup)\\n        return GAME_MODE\\n    elif query.data == 'about_game':\\n        game_name = get_game_data('game_name')\\n        query.edit_message_text(text=f\\\"\\u041e\\u0431 \\u0438\\u0433\\u0440\\u0435: {game_name}\\\")\\n    elif query.data.startswith('mode_'):\\n        mode_index = int(query.data.split('_')[1])\\n        context.user_data['game_mode'] = get_game_data('game_modes')[mode_index]\\n        query.edit_message_text(text=\\\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043c\\u044f:\\\")\\n        return PLAYER_NAME\\n\\ndef player_name(update: Update, context):\\n    player_name = update.message.text\\n    context.user_data['player_name'] = player_name\\n    player_names = get_game_data('player_names')\\n    player_names.append(player_name)\\n    \\n    if context.user_data['game_mode'] == \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c\\\" and get_game_data('invite_friend'):\\n        update.message.reply_text(\\\"\\u0425\\u043e\\u0442\\u0438\\u0442\\u0435 \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0441\\u0438\\u0442\\u044c \\u0434\\u0440\\u0443\\u0433\\u0430? (\\u0434\\u0430/\\u043d\\u0435\\u0442)\\\")\\n        return INVITE_FRIEND\\n    else:\\n        return start_game(update, context)\\n\\ndef invite_friend(update: Update, context):\\n    if update.message.text.lower() == '\\u0434\\u0430':\\n        # \\u0417\\u0434\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0448\\u0435\\u043d\\u0438\\u044f \\u0434\\u0440\\u0443\\u0433\\u0430\\n        update.message.reply_text(\\\"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u043e \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0448\\u0435\\u043d\\u0438\\u0435 \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0434\\u0440\\u0443\\u0433\\u0443: [\\u0441\\u0441\\u044b\\u043b\\u043a\\u0430 \\u043d\\u0430 \\u0438\\u0433\\u0440\\u0443]\\\")\\n    return start_game(update, context)\\n\\ndef start_game(update: Update, context):\\n    game_mode = context.user_data['game_mode']\\n    player_name = context.user_data['player_name']\\n    \\n    if game_mode == \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c\\\":\\n        bot_invitation = get_game_data('bot_invitation')\\n        update.message.reply_text(f\\\"{bot_invitation}\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a: {player_name}\\\")\\n    else:\\n        update.message.reply_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c \\u043d\\u0430\\u0447\\u0438\\u043d\\u0430\\u0435\\u0442\\u0441\\u044f!\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a 1: {player_name}\\\")\\n    \\n    # \\u0417\\u0434\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u043d\\u0430\\u0447\\u0430\\u043b\\u0430 \\u0438\\u0433\\u0440\\u044b\\n    return ConversationHandler.END\\n\\ndef main():\\n    initialize_game_data()  # \\u0418\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u0443\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0440\\u0438 \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context=True)\\n    dp = updater.dispatcher\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [CallbackQueryHandler(button)],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command, player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~Filters.command, invite_friend)],\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a\\u043e\\u0434\\u0430 \\u0440\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0435\\u0435:\\n\\n1. \\u0421\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u043c\\u0435\\u043d\\u044e \\u0441 \\u043a\\u043d\\u043e\\u043f\\u043a\\u0430\\u043c\\u0438 \\u0434\\u043b\\u044f \\u043d\\u0430\\u0447\\u0430\\u043b\\u0430 \\u0438\\u0433\\u0440\\u044b, \\u043f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0430 \\u043f\\u0440\\u0430\\u0432\\u0438\\u043b \\u0438 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431 \\u0438\\u0433\\u0440\\u0435.\\n2. \\u041f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u0432\\u044b\\u0431\\u0440\\u0430\\u0442\\u044c \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438\\u0433\\u0440\\u044b (\\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c \\u0438\\u043b\\u0438 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c).\\n3. \\u0417\\u0430\\u043f\\u0440\\u0430\\u0448\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0438\\u043c\\u044f \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u0442 \\u0435\\u0433\\u043e.\\n4. \\u041f\\u0440\\u0435\\u0434\\u043b\\u0430\\u0433\\u0430\\u0435\\u0442 \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0441\\u0438\\u0442\\u044c \\u0434\\u0440\\u0443\\u0433\\u0430, \\u0435\\u0441\\u043b\\u0438 \\u0432\\u044b\\u0431\\u0440\\u0430\\u043d \\u0441\\u043e\\u043e\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u044e\\u0449\\u0438\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c.\\n5. \\u041d\\u0430\\u0447\\u0438\\u043d\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u043e\\u0441\\u0442\\u0438 \\u043e\\u0442 \\u0432\\u044b\\u0431\\u0440\\u0430\\u043d\\u043d\\u043e\\u0433\\u043e \\u0440\\u0435\\u0436\\u0438\\u043c\\u0430.\\n\\n\\u0414\\u043b\\u044f \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f \\u044d\\u0442\\u043e\\u0433\\u043e \\u043a\\u043e\\u0434\\u0430:\\n\\n1. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e \\u0443 \\u0432\\u0430\\u0441 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0430 \\u0431\\u0438\\u0431\\u043b\\u0438\\u043e\\u0442\\u0435\\u043a\\u0430 `python-telegram-bot`.\\n2. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e Telegram \\u0431\\u043e\\u0442\\u0430.\\n3. \\u041e\\u0431\\u044a\\u0435\\u0434\\u0438\\u043d\\u0438\\u0442\\u0435 \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0441 \\u043a\\u043e\\u0434\\u043e\\u043c \\u0438\\u0437 \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438 (\\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 `initialize_game_data` \\u0438 `get_game_data` \\u0432 \\u0444\\u0430\\u0439\\u043b\\u0435 `game_data_init.py`).\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u0431\\u043e\\u0442 \\u043f\\u0440\\u0435\\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0431\\u0430\\u0437\\u043e\\u0432\\u0443\\u044e \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0443 \\u0434\\u043b\\u044f \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0438\\u0433\\u0440\\u044b. \\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0438\\u0442\\u044c \\u0435\\u0433\\u043e \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c, \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0432 \\u043a\\u043e\\u043d\\u043a\\u0440\\u0435\\u0442\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\\u044b, \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0443 \\u0445\\u043e\\u0434\\u043e\\u0432, \\u043f\\u043e\\u0434\\u0441\\u0447\\u0435\\u0442 \\u043e\\u0447\\u043a\\u043e\\u0432 \\u0438 \\u0442.\\u0434.\", \"web_results\": [], \"chunks\": [\"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0432\\u043e\\u0442 \\u0432\", \"\\u0442\\u043e\\u0440\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a\\u043e\\u0434\\u0430\", \", \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0440\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\", \"\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c Telegram \\u0431\\u043e\\u0442\\u0430 \\u0441\", \" \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\\u043c \\u0441\", \"\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u043d\\u044b\\u0445 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\", \":\\n\\n```python\\nfrom telegram import\", \" Update, InlineKeyboardButton, In\", \"lineKeyboardMarkup\\nfrom telegram.ext import Updater, CommandHandler,\", \" CallbackQueryHandler,\", \" ConversationHandler, MessageHandler, Filters\", \"\\n\\n# \\u0418\\u043c\\u043f\\u043e\\u0440\\u0442\\u0438\\u0440\\u0443\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\", \"\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438\\nfrom game_data_\", \"init import get_game_data\", \", initialize_game_data\", \"\\n\\n# \\u041e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u044f\\u0435\\u043c \\u0441\\u043e\\u0441\\u0442\", \"\\u043e\\u044f\\u043d\\u0438\\u044f \\u0440\\u0430\\u0437\\u0433\\u043e\\u0432\\u043e\\u0440\\u0430\", \"\\nMENU, GAME_MODE,\", \" PLAYER_NAME, INVITE_FRIEND =\", \" range(4)\\n\\ndef start(update: Update, context):\\n    menu = get_game_data\", \"('menu')\\n    keyboard = [\\n        [InlineKeyboardButton(\\\"\\u041a\\u0430\\u043a\", \" \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\\\", callback_data='\", \"how_to_play')],\\n        [InlineKeyboardButton(\\\"\\u041d\\u0430\\u0447\\u0430\\u0442\\u044c \\u0438\\u0433\\u0440\\u0443\\\", callback_\", \"data='start_game')],\\n        [InlineKeyboardButton(\\\"\\u041e\\u0431 \\u0438\\u0433\\u0440\\u0435\\\", callback_data\", \"='about_game')]\\n    ]\\n    reply_markup = InlineKeyboar\", \"dMarkup(keyboard)\\n    update.message.reply_text(menu, reply_markup=reply_markup\", \")\\n    return MENU\\n\\ndef button\", \"(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n\\n    if query.data == 'how_to_\", \"play':\\n        how_to_play = get_\", \"game_data('how_to_play')\\n        query.edit\", \"_message_text(text=how_to_play\", \")\\n    elif query.data ==\", \" 'start_game':\\n        game_modes\", \" = get_game_data\", \"('game_modes')\\n        keyboard = [[InlineKeyboardButton(mode, callback_data=f\", \"'mode_{i}')] for i, mode in enumerate(game_modes)]\\n        reply_markup = InlineKeyboardMarkup\", \"(keyboard)\\n        query.edit_message_text\", \"(text=\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438\\u0433\\u0440\\u044b:\\\",\", \" reply_markup=reply_\", \"markup)\\n        return GAME_MODE\\n    elif query.data == '\", \"about_game':\\n        game\", \"_name = get_game\", \"_data('game_name')\\n        query.edit_message_text\", \"(text=f\\\"\\u041e\\u0431 \\u0438\\u0433\\u0440\\u0435: {game_name}\\\")\\n    elif\", \" query.data.startswith\", \"('mode_'):\\n        mode_index = int(query.data.split('_')[1])\\n        context.user_data['game_mode'] = get_game_data('game_modes')[mode_index]\\n        query.edit_message_text(text=\\\"\\u0412\\u0432\\u0435\\u0434\", \"\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043c\\u044f:\\\")\\n        return PLAYER_NAME\\n\\ndef player_name(update: Update, context):\\n    player_name = update.message\", \".text\\n    context.user_data['player_name'] = player_name\\n    player_names = get_game\", \"_data('player_names')\\n    player_names.append(player_name)\\n    \\n    if context\", \".user_data['game_mode'] == \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\", \"\\u043e\\u043c\\\" and get_game_data('invite_friend'):\\n        update.message.reply_text\", \"(\\\"\\u0425\\u043e\\u0442\\u0438\\u0442\\u0435 \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0441\\u0438\\u0442\\u044c \\u0434\\u0440\\u0443\", \"\\u0433\\u0430? (\\u0434\\u0430/\\u043d\\u0435\\u0442)\\\")\\n        return INVITE_FRIEND\\n    else:\\n        return start\", \"_game(update, context)\\n\\ndef invite_friend(update: Update, context):\\n    if update.message.text.lower() == '\\u0434\\u0430':\\n        #\", \" \\u0417\\u0434\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\", \"\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u043f\\u0440\\u0438\\u0433\\u043b\", \"\\u0430\\u0448\\u0435\\u043d\\u0438\\u044f \\u0434\\u0440\\u0443\\u0433\\u0430\\n        update.message.reply_\", \"text(\\\"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u043e\", \" \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0448\\u0435\\u043d\\u0438\\u0435 \\u0432\", \"\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0434\\u0440\\u0443\\u0433\\u0443: [\\u0441\\u0441\\u044b\\u043b\\u043a\\u0430 \\u043d\\u0430\", \" \\u0438\\u0433\\u0440\\u0443]\\\")\\n    return start_game(update, context)\\n\\ndef start_game(update: Update, context):\\n    game_mode = context.user_\", \"data['game_mode']\\n    player_name = context.user_data['player_name']\\n    \\n    if game_mode == \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441\", \" \\u0431\\u043e\\u0442\\u043e\\u043c\\\":\\n        bot_invitation = get_game\", \"_data('bot_invitation')\\n        update.message.reply_text(f\\\"{bot_invitation}\\\\n\\u0418\", \"\\u0433\\u0440\\u043e\\u043a: {player_name}\\\")\\n    else:\\n        update.message.reply_text(f\\\"\\u0418\\u0433\", \"\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c \\u043d\\u0430\\u0447\", \"\\u0438\\u043d\\u0430\\u0435\\u0442\\u0441\\u044f!\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a\", \" 1: {player_name}\\\")\\n    \\n    # \\u0417\\u0434\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e\", \" \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u043d\\u0430\\u0447\", \"\\u0430\\u043b\\u0430 \\u0438\\u0433\\u0440\\u044b\\n    return ConversationHandler.END\", \"\\n\\ndef main():\\n    initialize\", \"_game_data()  # \\u0418\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0438\\u0440\\u0443\", \"\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0440\\u0438\", \" \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0435\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\", \"\\\", use_context=True\", \")\\n    dp = updater.dispatcher\\n\\n    conv_handler = Conversation\", \"Handler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [CallbackQueryHandler(button)],\\n            GAME_MODE: [Call\", \"backQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026\", \" ~Filters.command,\", \" player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~\", \"Filters.command, invite_\", \"friend)],\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a\\u043e\\u0434\\u0430 \\u0440\\u0435\", \"\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0435\\u0435\", \":\\n\\n1. \\u0421\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u043c\\u0435\", \"\\u043d\\u044e \\u0441 \\u043a\\u043d\\u043e\\u043f\\u043a\\u0430\\u043c\\u0438 \\u0434\\u043b\\u044f \\u043d\\u0430\\u0447\", \"\\u0430\\u043b\\u0430 \\u0438\\u0433\\u0440\\u044b, \\u043f\\u0440\\u043e\\u0441\\u043c\", \"\\u043e\\u0442\\u0440\\u0430 \\u043f\\u0440\\u0430\\u0432\\u0438\\u043b \\u0438 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431 \\u0438\\u0433\", \"\\u0440\\u0435.\\n2. \\u041f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u0435\\u0442 \\u0432\\u044b\", \"\\u0431\\u0440\\u0430\\u0442\\u044c \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438\\u0433\", \"\\u0440\\u044b (\\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c \\u0438\\u043b\\u0438 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c).\\n3. \\u0417\\u0430\\u043f\\u0440\\u0430\\u0448\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0438\\u043c\\u044f \\u0438\\u0433\\u0440\", \"\\u043e\\u043a\\u0430 \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\", \"\\u0435\\u0442 \\u0435\\u0433\\u043e.\\n4. \\u041f\\u0440\\u0435\\u0434\\u043b\\u0430\\u0433\\u0430\\u0435\\u0442 \\u043f\\u0440\\u0438\\u0433\\u043b\\u0430\\u0441\", \"\\u0438\\u0442\\u044c \\u0434\\u0440\\u0443\\u0433\\u0430, \\u0435\\u0441\\u043b\\u0438 \\u0432\\u044b\", \"\\u0431\\u0440\\u0430\\u043d \\u0441\\u043e\\u043e\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u044e\\u0449\\u0438\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c\", \".\\n5. \\u041d\\u0430\\u0447\\u0438\\u043d\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u0432 \\u0437\", \"\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u043e\\u0441\\u0442\\u0438 \\u043e\\u0442 \\u0432\\u044b\\u0431\", \"\\u0440\\u0430\\u043d\\u043d\\u043e\\u0433\\u043e \\u0440\\u0435\\u0436\\u0438\\u043c\\u0430.\", \"\\n\\n\\u0414\\u043b\\u044f \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f \\u044d\\u0442\\u043e\\u0433\\u043e \\u043a\\u043e\\u0434\\u0430\", \":\\n\\n1. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e\", \" \\u0443 \\u0432\\u0430\\u0441 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0430\", \" \\u0431\\u0438\\u0431\\u043b\\u0438\\u043e\\u0442\\u0435\\u043a\\u0430 `python-telegram-bot`.\\n2. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"\", \"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e\", \" Telegram \\u0431\\u043e\\u0442\\u0430.\\n3. \\u041e\\u0431\\u044a\", \"\\u0435\\u0434\\u0438\\u043d\\u0438\\u0442\\u0435 \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0441 \\u043a\", \"\\u043e\\u0434\\u043e\\u043c \\u0438\\u0437 \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438\", \" (\\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\", \"\\u0446\\u0438\\u0438 `initialize_game_data` \\u0438 `get_game_data` \\u0432 \\u0444\\u0430\\u0439\\u043b\\u0435 `game_data_init.py`).\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u0431\", \"\\u043e\\u0442 \\u043f\\u0440\\u0435\\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0431\\u0430\\u0437\", \"\\u043e\\u0432\\u0443\\u044e \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0443 \\u0434\\u043b\\u044f \\u0432\", \"\\u0430\\u0448\\u0435\\u0439 \\u0438\\u0433\\u0440\\u044b. \\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0440\\u0430\\u0441\", \"\\u0448\\u0438\\u0440\\u0438\\u0442\\u044c \\u0435\\u0433\\u043e \\u0444\\u0443\\u043d\\u043a\", \"\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c, \\u0434\\u043e\\u0431\\u0430\\u0432\", \"\\u0438\\u0432 \\u043a\\u043e\\u043d\\u043a\\u0440\\u0435\\u0442\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0438\\u0433\", \"\\u0440\\u044b, \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0443 \\u0445\\u043e\\u0434\", \"\\u043e\\u0432, \\u043f\\u043e\\u0434\\u0441\\u0447\\u0435\\u0442 \\u043e\\u0447\\u043a\\u043e\\u0432 \\u0438\", \" \\u0442.\\u0434.\"], \"extra_web_results\": []}"])</script><script>self.__next_f.push([1,"28:T61a2,"])</script><script>self.__next_f.push([1,"{\"answer\": \"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0434\\u0438\\u043c \\u0442\\u0440\\u0435\\u0442\\u044c\\u044e \\u0447\\u0430\\u0441\\u0442\\u044c, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0432\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u0432 \\u0441\\u0435\\u0431\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0441\\u0430\\u043c\\u043e\\u0439 \\u0438\\u0433\\u0440\\u044b. \\u041f\\u0440\\u0435\\u0434\\u043f\\u043e\\u043b\\u043e\\u0436\\u0438\\u043c, \\u0447\\u0442\\u043e \\u043c\\u044b \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u043c \\u043f\\u0440\\u043e\\u0441\\u0442\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0434\\u043b\\u044f \\u0434\\u0432\\u0443\\u0445 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432. \\u0412\\u043e\\u0442 \\u043a\\u043e\\u0434, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c:\\n\\n```python\\nfrom telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup\\nfrom telegram.ext import CommandHandler, CallbackQueryHandler, ConversationHandler, MessageHandler, Filters\\nfrom game_data_init import get_game_data, initialize_game_data\\n\\n# \\u0414\\u043e\\u0431\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b\\nGAME_PLAY, GAME_END = range(5, 7)\\n\\n# \\u0413\\u043b\\u043e\\u0431\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0441\\u043b\\u043e\\u0432\\u0430\\u0440\\u044c \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0445 \\u0438\\u0433\\u0440\\ngames = {}\\n\\ndef create_board():\\n    return [' ' for _ in range(9)]\\n\\ndef check_winner(board):\\n    winning_combinations = [\\n        [0, 1, 2], [3, 4, 5], [6, 7, 8],  # \\u0433\\u043e\\u0440\\u0438\\u0437\\u043e\\u043d\\u0442\\u0430\\u043b\\u0438\\n        [0, 3, 6], [1, 4, 7], [2, 5, 8],  # \\u0432\\u0435\\u0440\\u0442\\u0438\\u043a\\u0430\\u043b\\u0438\\n        [0, 4, 8], [2, 4, 6]  # \\u0434\\u0438\\u0430\\u0433\\u043e\\u043d\\u0430\\u043b\\u0438\\n    ]\\n    for combo in winning_combinations:\\n        if board[combo[0]] == board[combo[1]] == board[combo[2]] != ' ':\\n            return board[combo[0]]\\n    if ' ' not in board:\\n        return '\\u041d\\u0438\\u0447\\u044c\\u044f'\\n    return None\\n\\ndef create_board_markup(board):\\n    keyboard = []\\n    for i in range(0, 9, 3):\\n        row = [\\n            InlineKeyboardButton(board[i], callback_data=f'move_{i}'),\\n            InlineKeyboardButton(board[i+1], callback_data=f'move_{i+1}'),\\n            InlineKeyboardButton(board[i+2], callback_data=f'move_{i+2}')\\n        ]\\n        keyboard.append(row)\\n    return InlineKeyboardMarkup(keyboard)\\n\\ndef start_game(update: Update, context):\\n    game_mode = context.user_data['game_mode']\\n    player_name = context.user_data['player_name']\\n    \\n    if game_mode == \\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c\\\":\\n        bot_invitation = get_game_data('bot_invitation')\\n        update.message.reply_text(f\\\"{bot_invitation}\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a: {player_name}\\\")\\n        game_id = player_name\\n        games[game_id] = {\\n            'board': create_board(),\\n            'current_player': 'X',\\n            'players': {'X': player_name, 'O': '\\u0411\\u043e\\u0442'}\\n        }\\n    else:\\n        update.message.reply_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c \\u043d\\u0430\\u0447\\u0438\\u043d\\u0430\\u0435\\u0442\\u0441\\u044f!\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a 1 (X): {player_name}\\\")\\n        game_id = player_name\\n        games[game_id] = {\\n            'board': create_board(),\\n            'current_player': 'X',\\n            'players': {'X': player_name, 'O': '\\u0418\\u0433\\u0440\\u043e\\u043a 2'}\\n        }\\n    \\n    context.user_data['game_id'] = game_id\\n    show_board(update, context)\\n    return GAME_PLAY\\n\\ndef show_board(update: Update, context):\\n    game_id = context.user_data['game_id']\\n    game = games[game_id]\\n    board = game['board']\\n    current_player = game['current_player']\\n    player_name = game['players'][current_player]\\n    \\n    markup = create_board_markup(board)\\n    update.message.reply_text(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {player_name} ({current_player}):\\\", reply_markup=markup)\\n\\ndef make_move(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n    \\n    game_id = context.user_data['game_id']\\n    game = games[game_id]\\n    move = int(query.data.split('_')[1])\\n    \\n    if game['board'][move] == ' ':\\n        game['board'][move] = game['current_player']\\n        winner = check_winner(game['board'])\\n        \\n        if winner:\\n            if winner == '\\u041d\\u0438\\u0447\\u044c\\u044f':\\n                query.edit_message_text(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041d\\u0438\\u0447\\u044c\\u044f!\\\")\\n            else:\\n                query.edit_message_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044c: {game['players'][winner]}!\\\")\\n            del games[game_id]\\n            return GAME_END\\n        \\n        game['current_player'] = 'O' if game['current_player'] == 'X' else 'X'\\n        markup = create_board_markup(game['board'])\\n        query.edit_message_text(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {game['players'][game['current_player']]} ({game['current_player']}):\\\", reply_markup=markup)\\n        \\n        if game['players'][game['current_player']] == '\\u0411\\u043e\\u0442':\\n            # \\u041f\\u0440\\u043e\\u0441\\u0442\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430 \\u0431\\u043e\\u0442\\u0430: \\u0432\\u044b\\u0431\\u043e\\u0440 \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0441\\u0432\\u043e\\u0431\\u043e\\u0434\\u043d\\u043e\\u0439 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0438\\n            for i, cell in enumerate(game['board']):\\n                if cell == ' ':\\n                    return make_move(update, context)\\n    else:\\n        query.edit_message_text(\\\"\\u042d\\u0442\\u0430 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0430 \\u0443\\u0436\\u0435 \\u0437\\u0430\\u043d\\u044f\\u0442\\u0430. \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u0443\\u044e.\\\")\\n\\ndef end_game(update: Update, context):\\n    update.message.reply_text(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u0425\\u043e\\u0442\\u0438\\u0442\\u0435 \\u0441\\u044b\\u0433\\u0440\\u0430\\u0442\\u044c \\u0435\\u0449\\u0435 \\u0440\\u0430\\u0437? /start\\\")\\n    return ConversationHandler.END\\n\\ndef main():\\n    initialize_game_data()\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context=True)\\n    dp = updater.dispatcher\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [CallbackQueryHandler(button)],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command, player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~Filters.command, invite_friend)],\\n            GAME_PLAY: [CallbackQueryHandler(make_move)],\\n            GAME_END: [MessageHandler(Filters.text \u0026 ~Filters.command, end_game)]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0442\\u0440\\u0435\\u0442\\u044c\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0443\\u044e \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c:\\n\\n1. \\u0420\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\\u044b \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\".\\n2. \\u0421\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u043e\\u0432\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0438 \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0430\\u0435\\u0442 \\u0435\\u0433\\u043e \\u0432 \\u0432\\u0438\\u0434\\u0435 inline-\\u043a\\u043d\\u043e\\u043f\\u043e\\u043a.\\n3. \\u041e\\u0431\\u0440\\u0430\\u0431\\u0430\\u0442\\u044b\\u0432\\u0430\\u0435\\u0442 \\u0445\\u043e\\u0434\\u044b \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u0442 \\u043d\\u0430\\u043b\\u0438\\u0447\\u0438\\u0435 \\u043f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f.\\n4. \\u0420\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u043f\\u0440\\u043e\\u0441\\u0442\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c.\\n5. \\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u043f\\u0440\\u0438 \\u043f\\u043e\\u0431\\u0435\\u0434\\u0435 \\u043e\\u0434\\u043d\\u043e\\u0433\\u043e \\u0438\\u0437 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438\\u043b\\u0438 \\u043d\\u0438\\u0447\\u044c\\u0435\\u0439.\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434:\\n\\n1. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c \\u0434\\u0432\\u0443\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\\n2. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\\u043e\\u0440\\u0442\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u0445 \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b.\\n3. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e Telegram \\u0431\\u043e\\u0442\\u0430.\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u043f\\u043e\\u043b\\u043d\\u043e\\u0446\\u0435\\u043d\\u043d\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0432 Telegram \\u0431\\u043e\\u0442\\u0435. \\u0418\\u0433\\u0440\\u043e\\u043a\\u0438 \\u043c\\u043e\\u0433\\u0443\\u0442 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432 \\u0431\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0434\\u0440\\u0443\\u0433 \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432 \\u0434\\u0440\\u0443\\u0433\\u0430. \\u0411\\u043e\\u0442 \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u0435 \\u0438\\u0433\\u0440\\u044b, \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u0442 \\u043f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f \\u0438 \\u043f\\u0440\\u0435\\u0434\\u043b\\u0430\\u0433\\u0430\\u0435\\u0442 \\u043d\\u0430\\u0447\\u0430\\u0442\\u044c \\u043d\\u043e\\u0432\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\u043f\\u043e\\u0441\\u043b\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043d\\u0438\\u044f \\u0442\\u0435\\u043a\\u0443\\u0449\\u0435\\u0439.\\n\\n\\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0434\\u0430\\u043b\\u044c\\u0448\\u0435 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434, \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0441\\u043b\\u043e\\u0436\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u0431\\u043e\\u0442\\u0430, \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u043e\\u0447\\u043a\\u043e\\u0432, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u043f\\u043e \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0436\\u0435\\u043b\\u0430\\u043d\\u0438\\u044e.\", \"web_results\": [], \"chunks\": [\"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\", \"\\u0430\\u0434\\u0438\\u043c \\u0442\\u0440\\u0435\\u0442\\u044c\\u044e \\u0447\\u0430\\u0441\\u0442\\u044c\", \", \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0432\\u043a\\u043b\\u044e\\u0447\", \"\\u0430\\u0442\\u044c \\u0432 \\u0441\\u0435\\u0431\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443\", \" \\u0441\\u0430\\u043c\\u043e\\u0439 \\u0438\\u0433\\u0440\\u044b. \\u041f\\u0440\\u0435\\u0434\", \"\\u043f\\u043e\\u043b\\u043e\\u0436\\u0438\\u043c, \\u0447\\u0442\\u043e \\u043c\", \"\\u044b \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u043c \\u043f\\u0440\\u043e\\u0441\\u0442\", \"\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\"\", \" \\u0434\\u043b\\u044f \\u0434\\u0432\\u0443\\u0445 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432.\", \" \\u0412\\u043e\\u0442 \\u043a\\u043e\\u0434, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c\", \" \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c:\\n\\n```python\\nfrom telegram import\", \" Update, InlineKeyboar\", \"dButton, InlineKeyboar\", \"dMarkup\\nfrom telegram.ext import Comman\", \"dHandler, CallbackQueryHandler\", \", ConversationHandler,\", \" MessageHandler, Filters\", \"\\nfrom game_data_init import\", \" get_game_data,\", \" initialize_game_data\\n\\n# \\u0414\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f \\u0434\\u043b\\u044f\", \" \\u0438\\u0433\\u0440\\u044b\\nGAME_PLAY, GAME_END\", \" = range(5, 7)\\n\\n# \\u0413\\u043b\", \"\\u043e\\u0431\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0441\\u043b\\u043e\\u0432\", \"\\u0430\\u0440\\u044c \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f\", \" \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0445 \\u0438\\u0433\\u0440\\ngames = {}\\n\\ndef create\", \"_board():\\n    return [' ' for _ in range(9)]\\n\\ndef check_winner\", \"(board):\\n    winning_combinations = [\\n        [0, 1, 2], [3, 4, 5], [6, 7, 8],  # \\u0433\\u043e\\u0440\", \"\\u0438\\u0437\\u043e\\u043d\\u0442\\u0430\\u043b\\u0438\\n        [0, 3, 6], [1, 4, 7], [2, 5, 8],  # \\u0432\\u0435\\u0440\\u0442\\u0438\\u043a\\u0430\\u043b\\u0438\", \"\\n        [0, 4, 8], [2, 4, 6]  # \\u0434\\u0438\\u0430\\u0433\\u043e\\u043d\\u0430\\u043b\\u0438\\n    ]\\n    for combo in winning_combinations:\", \"\\n        if board[combo[0]] == board[combo[1]] == board[combo[2]] != ' ':\\n            return board[combo[0]]\\n    if '\", \" ' not in board:\", \"\\n        return '\\u041d\\u0438\\u0447\\u044c\\u044f'\\n    return None\\n\\ndef create_boar\", \"d_markup(board):\\n    keyboard = []\\n    for i in range(0, 9, 3):\\n        row = [\\n            InlineKeyboardButton(board[i], callback_data=f\", \"'move_{i}'),\\n            InlineKeyboardButton(board[i+1], callback_data=f'\", \"move_{i+1}'),\\n            InlineKeyboardButton(board[i+2], callback_data=f'move_{i+2}')\\n        ]\\n        keyboard.append(row)\\n    return InlineKeyboardMarkup\", \"(keyboard)\\n\\ndef start_game(update: Update, context):\\n    game_mode = context.user\", \"_data['game_mode']\\n    player_name = context.user_data\", \"['player_name']\\n    \\n    if game_mode == \\\"\\u0418\\u0433\\u0440\\u0430\", \" \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c\\\":\\n        bot_invitation = get_game\", \"_data('bot_invitation')\\n        update.message.reply_text(f\\\"{bot_invitation}\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a: {player_name}\\\")\\n        game\", \"_id = player_name\\n        games[game_id] = {\\n            'board': create_board(),\\n            'current_player': 'X\", \"',\\n            'players': {'X': player_name,\", \" 'O': '\\u0411\\u043e\\u0442'}\\n        }\\n    else:\\n        update.message.reply_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u0441\", \" \\u0434\\u0440\\u0443\\u0433\\u043e\\u043c \\u043d\\u0430\\u0447\\u0438\\u043d\\u0430\\u0435\\u0442\\u0441\\u044f!\\\\n\\u0418\\u0433\\u0440\\u043e\\u043a\", \" 1 (X): {player_name}\\\")\\n        game_id = player_name\\n        games[game_id] = {\\n            'board': create_board(),\\n            'current_player':\", \" 'X',\\n            'players': {'X': player_name, 'O\", \"': '\\u0418\\u0433\\u0440\\u043e\\u043a 2'}\\n        }\\n    \\n    context.user_data['game_id'] = game_id\\n    show_board(update, context)\\n    return GAME_PLAY\\n\\ndef show_board(update: Update, context):\\n    game_id = context.user_data\", \"['game_id']\\n    game = games[game_id]\\n    board = game['board']\\n    current_player = game['current_player']\\n    player_name = game['players'][current_player]\\n    \\n    markup = create_board_markup\", \"(board)\\n    update.message.reply_text\", \"(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {player_name} ({current_player}):\\\", reply_markup=markup)\\n\\ndef make_move(update: Update, context):\\n    query = update.callback_query\", \"\\n    query.answer()\\n    \\n    game_id = context.user_data['game_id']\\n    game = games[game_id]\\n    move = int(query.data.split('_')[1])\\n    \\n    if game['board'][move] == ' ':\\n        game['board'][move] = game['current_player']\\n        winner = check_winner(game['board'])\\n        \\n        if winner:\\n            if\", \" winner == '\\u041d\\u0438\\u0447\\u044c\\u044f':\\n                query.edit\", \"_message_text(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430.\", \" \\u041d\\u0438\\u0447\\u044c\\u044f!\\\")\\n            else:\\n                query.edit_message_text\", \"(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041f\\u043e\\u0431\\u0435\\u0434\", \"\\u0438\\u0442\\u0435\\u043b\\u044c: {game['players'][winner]}!\\\")\\n            del games[game_id]\\n            return GAME_END\", \"\\n        \\n        game['current_player'] = 'O' if game['current_player'] == 'X' else 'X\", \"'\\n        markup = create_board_markup\", \"(game['board'])\\n        query.edit_message_text(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {game['players'][game['current_player']]} ({game['current_player']}):\\\", reply_markup=markup)\\n        \\n        if game['players'][game['current_player']] == '\\u0411\\u043e\\u0442':\\n            # \\u041f\\u0440\\u043e\\u0441\\u0442\", \"\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430 \\u0431\\u043e\\u0442\\u0430: \\u0432\\u044b\\u0431\\u043e\\u0440\", \" \\u043f\\u0435\\u0440\\u0432\\u043e\\u0439 \\u0441\\u0432\\u043e\\u0431\\u043e\\u0434\\u043d\\u043e\\u0439 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0438\", \"\\n            for i, cell in enumerate(game['board']):\\n                if cell == ' ':\\n                    return\", \" make_move(update, context)\\n    else:\\n        query.edit_message_text(\\\"\\u042d\\u0442\\u0430 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0430\", \" \\u0443\\u0436\\u0435 \\u0437\\u0430\\u043d\\u044f\\u0442\\u0430. \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u0443\\u044e\", \".\\\")\\n\\ndef end_game(update: Update, context):\\n    update.message.reply_text\", \"(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u0425\", \"\\u043e\\u0442\\u0438\\u0442\\u0435 \\u0441\\u044b\\u0433\\u0440\\u0430\\u0442\\u044c\", \" \\u0435\\u0449\\u0435 \\u0440\\u0430\\u0437? /start\\\")\\n    return ConversationHandler.END\", \"\\n\\ndef main():\\n    initialize_game_data()\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context\", \"=True)\\n    dp = updater.dispatcher\", \"\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [CallbackQueryHandler(button)],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command,\", \" player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~\", \"Filters.command, invite_\", \"friend)],\\n            GAME_PLAY:\", \" [CallbackQueryHandler(make_move)],\\n            GAME_END: [MessageHandler(Filters.text \u0026 ~Filters.comman\", \"d, end_game)]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__\", \"':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0442\\u0440\\u0435\\u0442\", \"\\u044c\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0443\\u044e\", \" \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c:\\n\\n1. \\u0420\\u0435\", \"\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\\u044b\", \" \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\".\\n2. \\u0421\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442 \\u0438\\u0433\", \"\\u0440\\u043e\\u0432\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0438 \\u043e\\u0442\", \"\\u043e\\u0431\\u0440\\u0430\\u0436\\u0430\\u0435\\u0442 \\u0435\\u0433\\u043e \\u0432\", \" \\u0432\\u0438\\u0434\\u0435 inline-\\u043a\\u043d\\u043e\\u043f\\u043e\\u043a.\\n3. \\u041e\\u0431\\u0440\\u0430\\u0431\\u0430\\u0442\\u044b\\u0432\\u0430\\u0435\\u0442\", \" \\u0445\\u043e\\u0434\\u044b \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438\", \" \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u0442 \\u043d\\u0430\", \"\\u043b\\u0438\\u0447\\u0438\\u0435 \\u043f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f.\", \"\\n4. \\u0420\\u0435\\u0430\\u043b\\u0438\\u0437\\u0443\\u0435\\u0442 \\u043f\\u0440\\u043e\\u0441\\u0442\", \"\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f\", \" \\u0438\\u0433\\u0440\\u044b \\u0441 \\u0431\\u043e\\u0442\\u043e\\u043c.\", \"\\n5. \\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u043f\\u0440\\u0438\", \" \\u043f\\u043e\\u0431\\u0435\\u0434\\u0435 \\u043e\\u0434\\u043d\\u043e\\u0433\\u043e \\u0438\\u0437 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438\\u043b\\u0438\", \" \\u043d\\u0438\\u0447\\u044c\\u0435\\u0439.\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c\", \" \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434:\\n\\n1. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\", \"\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c \\u0434\\u0432\", \"\\u0443\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\\n2. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\", \"\\u044c, \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\", \"\\u043e\\u0440\\u0442\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438\", \" \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\", \"\\u044b\\u0434\\u0443\\u0449\\u0438\\u0445 \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439\", \" \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b.\\n3. \\u0417\\u0430\\u043c\", \"\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e\", \" Telegram \\u0431\\u043e\\u0442\\u0430.\", \"\\n\\n\\u042d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434 \\u0441\\u043e\\u0437\\u0434\", \"\\u0430\\u0435\\u0442 \\u043f\\u043e\\u043b\\u043d\\u043e\\u0446\\u0435\\u043d\\u043d\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\\"\", \"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0432\", \" Telegram \\u0431\\u043e\\u0442\\u0435. \\u0418\\u0433\", \"\\u0440\\u043e\\u043a\\u0438 \\u043c\\u043e\\u0433\\u0443\\u0442 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\", \" \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432 \\u0431\\u043e\\u0442\\u0430 \\u0438\\u043b\\u0438 \\u0434\\u0440\\u0443\\u0433 \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432 \\u0434\\u0440\\u0443\", \"\\u0433\\u0430. \\u0411\\u043e\\u0442 \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\\u043e\\u0441\\u0442\", \"\\u043e\\u044f\\u043d\\u0438\\u0435 \\u0438\\u0433\\u0440\\u044b, \\u043f\\u0440\\u043e\", \"\\u0432\\u0435\\u0440\\u044f\\u0435\\u0442 \\u043f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f\", \" \\u0438 \\u043f\\u0440\\u0435\\u0434\\u043b\\u0430\\u0433\\u0430\\u0435\\u0442 \\u043d\\u0430\\u0447\", \"\\u0430\\u0442\\u044c \\u043d\\u043e\\u0432\\u0443\\u044e \\u0438\\u0433\\u0440\\u0443 \\u043f\\u043e\\u0441\\u043b\\u0435\", \" \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043d\\u0438\\u044f \\u0442\\u0435\\u043a\\u0443\\u0449\\u0435\\u0439.\", \"\\n\\n\\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0434\", \"\\u0430\\u043b\\u044c\\u0448\\u0435 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434\", \", \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435\", \" \\u0441\\u043b\\u043e\\u0436\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f\", \" \\u0431\\u043e\\u0442\\u0430, \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u043e\\u0447\", \"\\u043a\\u043e\\u0432, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\", \" \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u043f\\u043e\", \" \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0436\\u0435\\u043b\\u0430\\u043d\\u0438\\u044e.\"], \"extra_web_results\": []}"])</script><script>self.__next_f.push([1,"29:T7784,"])</script><script>self.__next_f.push([1,"{\"answer\": \"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0434\\u0438\\u043c \\u0447\\u0435\\u0442\\u0432\\u0435\\u0440\\u0442\\u0443\\u044e \\u0447\\u0430\\u0441\\u0442\\u044c, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442 \\u0434\\u043e\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f \\u043a \\u043d\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0431\\u043e\\u0442\\u0443 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\". \\u042d\\u0442\\u0430 \\u0447\\u0430\\u0441\\u0442\\u044c \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0432\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u0432 \\u0441\\u0435\\u0431\\u044f \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0430, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440, \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0441\\u043b\\u043e\\u0436\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u0431\\u043e\\u0442\\u0430 \\u0438 \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0432 \\u043d\\u0435\\u0441\\u043a\\u043e\\u043b\\u044c\\u043a\\u0438\\u0445 \\u0438\\u0433\\u0440\\u0430\\u0445 \\u043e\\u0434\\u043d\\u043e\\u0432\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e.\\n\\n```python\\nimport random\\nfrom telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup\\nfrom telegram.ext import CommandHandler, CallbackQueryHandler, ConversationHandler, MessageHandler, Filters\\nfrom game_data_init import get_game_data, initialize_game_data, update_game_data\\n\\n# \\u0414\\u043e\\u0431\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f\\nSTATS, LEADERBOARD = range(7, 9)\\n\\n# \\u041e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0438\\u0433\\u0440\\ngames = {}\\n\\n# \\u0421\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432\\nplayer_stats = {}\\n\\ndef update_stats(player, result):\\n    if player not in player_stats:\\n        player_stats[player] = {'wins': 0, 'losses': 0, 'draws': 0, 'rating': 1000}\\n    \\n    if result == 'win':\\n        player_stats[player]['wins'] += 1\\n        player_stats[player]['rating'] += 25\\n    elif result == 'loss':\\n        player_stats[player]['losses'] += 1\\n        player_stats[player]['rating'] -= 15\\n    else:  # draw\\n        player_stats[player]['draws'] += 1\\n        player_stats[player]['rating'] += 5\\n\\n    # \\u0421\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u0443\\u044e \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443\\n    update_game_data('player_stats', player_stats)\\n\\ndef get_bot_move(board):\\n    # \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430 \\u0431\\u043e\\u0442\\u0430\\n    # \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043c\\u043e\\u0436\\u0435\\u043c \\u043b\\u0438 \\u043c\\u044b \\u0432\\u044b\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u043c \\u0445\\u043e\\u0434\\u043e\\u043c\\n    for i in range(9):\\n        if board[i] == ' ':\\n            board[i] = 'O'\\n            if check_winner(board) == 'O':\\n                board[i] = ' '\\n                return i\\n            board[i] = ' '\\n    \\n    # \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043d\\u0443\\u0436\\u043d\\u043e \\u043b\\u0438 \\u0431\\u043b\\u043e\\u043a\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0445\\u043e\\u0434 \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430\\n    for i in range(9):\\n        if board[i] == ' ':\\n            board[i] = 'X'\\n            if check_winner(board) == 'X':\\n                board[i] = ' '\\n                return i\\n            board[i] = ' '\\n    \\n    # \\u0412\\u044b\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0439\\u043d\\u044b\\u0439 \\u0445\\u043e\\u0434 \\u0438\\u0437 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b\\u0445\\n    empty_cells = [i for i, cell in enumerate(board) if cell == ' ']\\n    return random.choice(empty_cells) if empty_cells else None\\n\\ndef show_stats(update: Update, context):\\n    player_name = context.user_data.get('player_name', update.effective_user.first_name)\\n    stats = player_stats.get(player_name, {'wins': 0, 'losses': 0, 'draws': 0, 'rating': 1000})\\n    \\n    stats_text = f\\\"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {player_name}:\\\\n\\\"\\n    stats_text += f\\\"\\u041f\\u043e\\u0431\\u0435\\u0434\\u044b: {stats['wins']}\\\\n\\\"\\n    stats_text += f\\\"\\u041f\\u043e\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f: {stats['losses']}\\\\n\\\"\\n    stats_text += f\\\"\\u041d\\u0438\\u0447\\u044c\\u0438: {stats['draws']}\\\\n\\\"\\n    stats_text += f\\\"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433: {stats['rating']}\\\"\\n    \\n    update.message.reply_text(stats_text)\\n    return MENU\\n\\ndef show_leaderboard(update: Update, context):\\n    sorted_players = sorted(player_stats.items(), key=lambda x: x[1]['rating'], reverse=True)\\n    \\n    leaderboard_text = \\\"\\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432:\\\\n\\\"\\n    for i, (player, stats) in enumerate(sorted_players[:10], 1):\\n        leaderboard_text += f\\\"{i}. {player}: {stats['rating']} \\u043e\\u0447\\u043a\\u043e\\u0432\\\\n\\\"\\n    \\n    update.message.reply_text(leaderboard_text)\\n    return MENU\\n\\ndef make_move(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n    \\n    game_id = context.user_data['game_id']\\n    game = games[game_id]\\n    move = int(query.data.split('_')[1])\\n    \\n    if game['board'][move] == ' ':\\n        game['board'][move] = game['current_player']\\n        winner = check_winner(game['board'])\\n        \\n        if winner:\\n            if winner == '\\u041d\\u0438\\u0447\\u044c\\u044f':\\n                query.edit_message_text(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041d\\u0438\\u0447\\u044c\\u044f!\\\")\\n                update_stats(game['players']['X'], 'draw')\\n                update_stats(game['players']['O'], 'draw')\\n            else:\\n                query.edit_message_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044c: {game['players'][winner]}!\\\")\\n                update_stats(game['players'][winner], 'win')\\n                update_stats(game['players']['O' if winner == 'X' else 'X'], 'loss')\\n            del games[game_id]\\n            return GAME_END\\n        \\n        game['current_player'] = 'O' if game['current_player'] == 'X' else 'X'\\n        markup = create_board_markup(game['board'])\\n        query.edit_message_text(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {game['players'][game['current_player']]} ({game['current_player']}):\\\", reply_markup=markup)\\n        \\n        if game['players'][game['current_player']] == '\\u0411\\u043e\\u0442':\\n            bot_move = get_bot_move(game['board'])\\n            if bot_move is not None:\\n                context.user_data['bot_move'] = bot_move\\n                context.job_queue.run_once(bot_make_move, 1, context=context)\\n    else:\\n        query.edit_message_text(\\\"\\u042d\\u0442\\u0430 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0430 \\u0443\\u0436\\u0435 \\u0437\\u0430\\u043d\\u044f\\u0442\\u0430. \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u0443\\u044e.\\\", reply_markup=create_board_markup(game['board']))\\n\\ndef bot_make_move(context):\\n    game_id = context.job.context.user_data['game_id']\\n    bot_move = context.job.context.user_data['bot_move']\\n    \\n    # \\u0421\\u043e\\u0437\\u0434\\u0430\\u0435\\u043c \\u0444\\u0438\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 update \\u0438 context \\u0434\\u043b\\u044f \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430 make_move\\n    class DummyUpdate:\\n        class DummyCallback:\\n            def __init__(self):\\n                self.data = f'move_{bot_move}'\\n            def answer(self):\\n                pass\\n        callback_query = DummyCallback()\\n    \\n    make_move(DummyUpdate(), context.job.context)\\n\\ndef main():\\n    initialize_game_data()\\n    global player_stats\\n    player_stats = get_game_data('player_stats') or {}\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context=True)\\n    dp = updater.dispatcher\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [\\n                CallbackQueryHandler(button),\\n                CommandHandler('stats', show_stats),\\n                CommandHandler('leaderboard', show_leaderboard)\\n            ],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command, player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~Filters.command, invite_friend)],\\n            GAME_PLAY: [CallbackQueryHandler(make_move)],\\n            GAME_END: [MessageHandler(Filters.text \u0026 ~Filters.command, end_game)],\\n            STATS: [MessageHandler(Filters.text \u0026 ~Filters.command, show_stats)],\\n            LEADERBOARD: [MessageHandler(Filters.text \u0026 ~Filters.command, show_leaderboard)]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0447\\u0435\\u0442\\u0432\\u0435\\u0440\\u0442\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u0435 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f:\\n\\n1. \\u0421\\u0438\\u0441\\u0442\\u0435\\u043c\\u0430 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0430 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432.\\n2. \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430 \\u0434\\u043b\\u044f \\u0431\\u043e\\u0442\\u0430, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0442\\u0435\\u043f\\u0435\\u0440\\u044c \\u043c\\u043e\\u0436\\u0435\\u0442 \\u0431\\u043b\\u043e\\u043a\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0432\\u044b\\u0438\\u0433\\u0440\\u044b\\u0448\\u043d\\u044b\\u0435 \\u0445\\u043e\\u0434\\u044b \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430 \\u0438 \\u043f\\u044b\\u0442\\u0430\\u0442\\u044c\\u0441\\u044f \\u0432\\u044b\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441\\u0430\\u043c.\\n3. \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432, \\u043f\\u043e\\u043a\\u0430\\u0437\\u044b\\u0432\\u0430\\u044e\\u0449\\u0430\\u044f \\u0442\\u043e\\u043f-10 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u043f\\u043e \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0443.\\n4. \\u0412\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0430 \\u043b\\u0438\\u0447\\u043d\\u043e\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430.\\n5. \\u0421\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u0435 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u043c\\u0435\\u0436\\u0434\\u0443 \\u0441\\u0435\\u0441\\u0441\\u0438\\u044f\\u043c\\u0438 \\u0431\\u043e\\u0442\\u0430.\\n6. \\u0418\\u043c\\u0438\\u0442\\u0430\\u0446\\u0438\\u044f \\\"\\u043e\\u0431\\u0434\\u0443\\u043c\\u044b\\u0432\\u0430\\u043d\\u0438\\u044f\\\" \\u0445\\u043e\\u0434\\u0430 \\u0431\\u043e\\u0442\\u043e\\u043c \\u0441 \\u043f\\u043e\\u043c\\u043e\\u0449\\u044c\\u044e \\u043d\\u0435\\u0431\\u043e\\u043b\\u044c\\u0448\\u043e\\u0439 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043a\\u0438.\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434:\\n\\n1. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c \\u0442\\u0440\\u0435\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\\n2. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\\u043e\\u0440\\u0442\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u0445 \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b.\\n3. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044e `update_game_data` \\u0432 \\u0444\\u0430\\u0439\\u043b `game_data_init.py` \\u0434\\u043b\\u044f \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u043e\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438.\\n4. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e Telegram \\u0431\\u043e\\u0442\\u0430.\\n\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u0448 \\u0431\\u043e\\u0442 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0438\\u043c\\u0435\\u0435\\u0442 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b, \\u0432\\u043a\\u043b\\u044e\\u0447\\u0430\\u044f \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0430, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438 \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0443\\u043c\\u043d\\u043e\\u0433\\u043e \\u0431\\u043e\\u0442\\u0430-\\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430. \\u0418\\u0433\\u0440\\u043e\\u043a\\u0438 \\u043c\\u043e\\u0433\\u0443\\u0442 \\u043f\\u0440\\u043e\\u0441\\u043c\\u0430\\u0442\\u0440\\u0438\\u0432\\u0430\\u0442\\u044c \\u0441\\u0432\\u043e\\u044e \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438 \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443 \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432, \\u0447\\u0442\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442 \\u0441\\u043e\\u0440\\u0435\\u0432\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f \\u0438 \\u043c\\u043e\\u0442\\u0438\\u0432\\u0430\\u0446\\u0438\\u0438 \\u043a \\u0438\\u0433\\u0440\\u0435.\", \"web_results\": [], \"chunks\": [\"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e, \\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\", \"\\u0430\\u0434\\u0438\\u043c \\u0447\\u0435\\u0442\\u0432\\u0435\\u0440\\u0442\\u0443\\u044e\", \" \\u0447\\u0430\\u0441\\u0442\\u044c, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0434\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u0442 \\u0434\\u043e\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438\", \" \\u0438 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f \\u043a\", \" \\u043d\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0431\\u043e\\u0442\\u0443 \\u0434\\u043b\\u044f\", \" \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\".\", \" \\u042d\\u0442\\u0430 \\u0447\\u0430\\u0441\\u0442\\u044c \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0432\\u043a\\u043b\\u044e\\u0447\", \"\\u0430\\u0442\\u044c \\u0432 \\u0441\\u0435\\u0431\\u044f \\u0441\\u0438\\u0441\\u0442\", \"\\u0435\\u043c\\u0443 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0430, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440,\", \" \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0441\\u043b\\u043e\\u0436\\u043d\\u0443\\u044e \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f\", \" \\u0431\\u043e\\u0442\\u0430 \\u0438 \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0432\", \" \\u043d\\u0435\\u0441\\u043a\\u043e\\u043b\\u044c\\u043a\\u0438\\u0445 \\u0438\\u0433\\u0440\\u0430\", \"\\u0445 \\u043e\\u0434\\u043d\\u043e\\u0432\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e.\", \"\\n\\n```python\\nimport random\\nfrom telegram import\", \" Update, InlineKeyboar\", \"dButton, InlineKeyboar\", \"dMarkup\\nfrom telegram.ext import Comman\", \"dHandler, CallbackQueryHandler\", \", ConversationHandler,\", \" MessageHandler, Filters\", \"\\nfrom game_data_init import get\", \"_game_data, initialize\", \"_game_data, update\", \"_game_data\\n\\n# \\u0414\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\", \"\\u043e\\u044f\\u043d\\u0438\\u044f\\nSTATS, LE\", \"ADERBOARD = range(7, 9)\\n\\n# \\u041e\\u0431\", \"\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\", \"\\u0443\\u0440\\u0430 \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0438\\u0433\\u0440\", \"\\ngames = {}\\n\\n# \\u0421\\u0442\\u0440\\u0443\\u043a\\u0442\", \"\\u0443\\u0440\\u0430 \\u0434\\u043b\\u044f \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0441\\u0442\\u0430\\u0442\", \"\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432\\nplayer_stats = {}\\n\\ndef update_stats\", \"(player, result):\\n    if player not in player_stats:\", \"\\n        player_stats[player] = {'wins': 0, 'losses': 0, 'draws': 0,\", \" 'rating': 1000}\\n    \\n    if result == 'win':\\n        player_stats[player]['wins'] += 1\\n        player_stats[player]['rating'] += 25\\n    elif result == 'loss':\\n        player_stats[player]['losses'] += 1\\n        player_stats[player]['rating'] -= 15\\n    else:  # draw\\n        player_stats[player]['draws'] += 1\\n        player_stats[player]['rating'] += 5\\n\\n    #\", \" \\u0421\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u043e\\u0431\", \"\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u0443\\u044e \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443\", \"\\n    update_game_data('player_stats', player_\", \"stats)\\n\\ndef get_bot_move(board):\\n    # \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430\", \" \\u0431\\u043e\\u0442\\u0430\\n    # \\u041f\\u0440\\u043e\", \"\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043c\\u043e\\u0436\\u0435\\u043c \\u043b\\u0438 \\u043c\\u044b \\u0432\\u044b\", \"\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u043c\", \" \\u0445\\u043e\\u0434\\u043e\\u043c\\n    for i in\", \" range(9):\\n        if board[i] == ' ':\\n            board[i] = 'O'\\n            if check_winner(board) == 'O':\\n                board[i] = ' '\\n                return i\\n            board[i] = ' '\\n    \\n    # \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c,\", \" \\u043d\\u0443\\u0436\\u043d\\u043e \\u043b\\u0438 \\u0431\\u043b\\u043e\\u043a\\u0438\\u0440\\u043e\\u0432\", \"\\u0430\\u0442\\u044c \\u0445\\u043e\\u0434 \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430\\n    for i in range(9):\\n        if board[i] == ' ':\\n            board[i] = 'X'\\n            if check_winner(board) == 'X':\", \"\\n                board[i] = ' '\\n                return i\\n            board[i] = ' '\\n    \\n    # \\u0412\\u044b\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0439\\u043d\\u044b\\u0439\", \" \\u0445\\u043e\\u0434 \\u0438\\u0437 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b\\u0445\\n    empty_cells = [i for i, cell in enumerate(board) if cell == ' ']\\n    return random.choice(empty_cells) if empty_cells else None\", \"\\n\\ndef show_stats(update: Update, context):\\n    player_\", \"name = context\", \".user_data.get('player_name', update\", \".effective_user.first_name\", \")\\n    stats = player_stats.get(player_name, {'wins': 0, 'losses': 0, 'draws': 0, 'rating':\", \" 1000})\\n    \\n    stats_text = f\\\"\", \"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430\", \" {player_name}:\\\\n\\\"\\n    stats_text += f\\\"\\u041f\\u043e\\u0431\\u0435\\u0434\", \"\\u044b: {stats['wins']}\\\\n\\\"\\n    stats_text += f\\\"\", \"\\u041f\\u043e\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f: {stats['losses']}\\\\n\\\"\\n    stats_text += f\\\"\\u041d\\u0438\\u0447\", \"\\u044c\\u0438: {stats['draws']}\\\\n\\\"\\n    stats_text += f\\\"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043d\", \"\\u0433: {stats['rating']}\\\"\\n    \\n    update.message.reply_\", \"text(stats_text)\\n    return MENU\\n\\ndef show_leaderboard(update: Update, context):\\n    sorted_players = sorted(player_stats.items(), key=lambda x: x[1]['rating'], reverse=True)\\n    \\n    leaderboard_text = \\\"\\u0422\\u0430\", \"\\u0431\\u043b\\u0438\\u0446\\u0430 \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432\", \":\\\\n\\\"\\n    for i\", \", (player, stats) in enumerate(sorted_players[:10],\", \" 1):\\n        leaderboard_text += f\\\"{i}. {player}: {stats['rating']} \\u043e\\u0447\\u043a\\u043e\\u0432\\\\n\\\"\\n    \\n    update.message.reply_text(leaderboard_text)\\n    return MENU\\n\\ndef make_move(update: Update, context):\\n    query = update.callback_query\", \"\\n    query.answer()\\n    \\n    game_id = context.user_data['game_id']\\n    game = games[game_id]\\n    move = int\", \"(query.data.split('_')[1])\\n    \\n    if game['board'][move] == ' ':\\n        game['board'][move] = game['current_player']\\n        winner = check_winner(game['board'])\\n        \\n        if winner:\\n            if winner == '\", \"\\u041d\\u0438\\u0447\\u044c\\u044f':\\n                query.edit_message_\", \"text(\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0435\\u043d\\u0430. \\u041d\\u0438\\u0447\", \"\\u044c\\u044f!\\\")\\n                update_stats\", \"(game['players']['X'], 'draw')\\n                update_stats(game['players']['O'], 'draw')\\n            else:\\n                query.edit_message_text(f\\\"\\u0418\\u0433\\u0440\\u0430 \\u043e\\u043a\\u043e\\u043d\\u0447\", \"\\u0435\\u043d\\u0430. \\u041f\\u043e\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043b\\u044c\", \": {game['players'][winner]}!\\\")\\n                update_stats(game['players'][winner], 'win')\\n                update_stats(game['players']['O'\", \" if winner == 'X\", \"' else 'X'], 'loss')\\n            del\", \" games[game_id]\\n            return GAME_END\\n        \\n        game['current_player'] = 'O' if game\", \"['current_player'] == 'X' else\", \" 'X'\\n        markup = create_board_markup\", \"(game['board'])\\n        query.edit_message_text(f\\\"\\u0425\\u043e\\u0434 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430 {game['players'][game['current_player']]} ({game['current_player']}):\\\", reply_markup=markup)\\n        \\n        if game['players'][game['current_player']] == '\\u0411\\u043e\\u0442':\", \"\\n            bot_move = get_bot\", \"_move(game['board'])\\n            if bot_move is\", \" not None:\\n                context.user_data['bot_move'] = bot_move\\n                context.job\", \"_queue.run_once(bot_make_move, 1, context=context)\\n    else:\\n        query.edit_message_text(\\\"\\u042d\\u0442\\u0430 \\u043a\\u043b\\u0435\\u0442\\u043a\\u0430\", \" \\u0443\\u0436\\u0435 \\u0437\\u0430\\u043d\\u044f\\u0442\\u0430. \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u0443\\u044e.\\\",\", \" reply_markup=create_\", \"board_markup(game['board']))\\n\\ndef bot_make_move(context):\\n    game_id = context.job\", \".context.user_data['game_id']\\n    bot_move = context.job\", \".context.user_data['bot_move']\\n    \\n    # \\u0421\\u043e\\u0437\\u0434\", \"\\u0430\\u0435\\u043c \\u0444\\u0438\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\", \"\\u0435\\u043a\\u0442 update \\u0438 context \\u0434\\u043b\\u044f \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430 make\", \"_move\\n    class D\", \"ummyUpdate:\\n        class\", \" DummyCallback\", \":\\n            def __init__(self):\\n                self.data = f\", \"'move_{bot_move}'\\n            def\", \" answer(self):\\n                pass\\n        callback_query = DummyCallback()\\n    \\n    make_move(DummyUpdate(), context.job.context)\\n\\ndef main\", \"():\\n    initialize_game_data()\\n    global player\", \"_stats\\n    player_stats = get_game\", \"_data('player_stats') or {}\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context\", \"=True)\\n    dp = updater.dispatcher\", \"\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [\\n                CallbackQueryHandler(button),\\n                CommandHandler('stats', show_stats),\\n                CommandHandler('leaderboard', show_leaderboard)\\n            ],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~\", \"Filters.command, player\", \"_name)],\\n            INVITE_FRIEND:\", \" [MessageHandler(Filters.text \u0026 ~Filters\", \".command, invite_frien\", \"d)],\\n            GAME_PLAY: [CallbackQueryHandler(make_move)],\\n            GAME_END: [MessageHandler(Filters.text \u0026 ~Filters.comman\", \"d, end_game)],\\n            STATS: [MessageHandler(Filters.text \u0026 ~Filters\", \".command, show_stats\", \")],\\n            LEADERBOARD: [MessageHandler(Filters.text \u0026 ~Filters.command,\", \" show_leaderboard)]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main\", \"__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u0447\\u0435\\u0442\\u0432\\u0435\\u0440\\u0442\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c\", \" \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\", \"\\u0438\\u0435 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f:\\n\\n1. \\u0421\\u0438\\u0441\\u0442\\u0435\\u043c\\u0430\", \" \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\\u0430 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u043e\", \"\\u043a\\u043e\\u0432.\\n2. \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u043b\\u043e\\u0433\\u0438\\u043a\\u0430\", \" \\u0434\\u043b\\u044f \\u0431\\u043e\\u0442\\u0430, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439\", \" \\u0442\\u0435\\u043f\\u0435\\u0440\\u044c \\u043c\\u043e\\u0436\\u0435\\u0442 \\u0431\\u043b\\u043e\\u043a\", \"\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0432\\u044b\\u0438\\u0433\\u0440\\u044b\\u0448\\u043d\\u044b\\u0435 \\u0445\\u043e\\u0434\", \"\\u044b \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430 \\u0438\", \" \\u043f\\u044b\\u0442\\u0430\\u0442\\u044c\\u0441\\u044f \\u0432\\u044b\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c \\u0441\", \"\\u0430\\u043c.\\n3. \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432\", \", \\u043f\\u043e\\u043a\\u0430\\u0437\\u044b\\u0432\\u0430\\u044e\\u0449\\u0430\\u044f \\u0442\\u043e\\u043f\", \"-10 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u043f\\u043e \\u0440\\u0435\\u0439\\u0442\\u0438\\u043d\\u0433\", \"\\u0443.\\n4. \\u0412\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043f\\u0440\\u043e\\u0441\", \"\\u043c\\u043e\\u0442\\u0440\\u0430 \\u043b\\u0438\\u0447\\u043d\\u043e\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u0438\\u0433\", \"\\u0440\\u043e\\u043a\\u0430.\\n5. \\u0421\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u0435 \\u0441\\u0442\\u0430\\u0442\", \"\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438 \\u043c\\u0435\\u0436\\u0434\\u0443 \\u0441\\u0435\\u0441\\u0441\\u0438\\u044f\\u043c\\u0438 \\u0431\", \"\\u043e\\u0442\\u0430.\\n6. \\u0418\\u043c\\u0438\\u0442\\u0430\\u0446\\u0438\\u044f \\\"\", \"\\u043e\\u0431\\u0434\\u0443\\u043c\\u044b\\u0432\\u0430\\u043d\\u0438\\u044f\\\" \\u0445\", \"\\u043e\\u0434\\u0430 \\u0431\\u043e\\u0442\\u043e\\u043c \\u0441 \\u043f\\u043e\\u043c\\u043e\\u0449\\u044c\\u044e\", \" \\u043d\\u0435\\u0431\\u043e\\u043b\\u044c\\u0448\\u043e\\u0439 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043a\\u0438\", \".\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442\", \" \\u043a\\u043e\\u0434:\\n\\n1. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c\", \" \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c\", \" \\u0442\\u0440\\u0435\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\", \"\\n2. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\", \"\\u043e\\u0440\\u0442\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438\", \" \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\", \"\\u0443\\u0449\\u0438\\u0445 \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\", \"\\u043d\\u044b.\\n3. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\", \"\\u0446\\u0438\\u044e `update_game_data` \\u0432\", \" \\u0444\\u0430\\u0439\\u043b `game_data_init.py` \\u0434\\u043b\\u044f \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\", \"\\u043d\\u043e\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0438.\", \"\\n4. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e\", \" Telegram \\u0431\\u043e\\u0442\\u0430.\", \"\\n\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u0448 \\u0431\\u043e\\u0442 \\u0434\\u043b\\u044f\", \" \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0438\\u043c\", \"\\u0435\\u0435\\u0442 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0435\\u043d\\u043d\\u044b\\u0439\", \" \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b, \\u0432\\u043a\\u043b\\u044e\\u0447\\u0430\\u044f \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u0440\\u0435\\u0439\", \"\\u0442\\u0438\\u043d\\u0433\\u0430, \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\", \"\\u0438\\u043a\\u0443 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438\", \" \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0443\\u043c\\u043d\\u043e\\u0433\\u043e \\u0431\\u043e\\u0442\\u0430-\\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043d\\u0438\\u043a\\u0430.\", \" \\u0418\\u0433\\u0440\\u043e\\u043a\\u0438 \\u043c\\u043e\\u0433\\u0443\\u0442 \\u043f\\u0440\\u043e\\u0441\\u043c\\u0430\\u0442\", \"\\u0440\\u0438\\u0432\\u0430\\u0442\\u044c \\u0441\\u0432\\u043e\\u044e \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\", \"\\u0438\\u043a\\u0443 \\u0438 \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443\", \" \\u043b\\u0438\\u0434\\u0435\\u0440\\u043e\\u0432, \\u0447\\u0442\\u043e\", \" \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\", \" \\u0441\\u043e\\u0440\\u0435\\u0432\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f \\u0438 \\u043c\\u043e\\u0442\\u0438\\u0432\\u0430\\u0446\\u0438\\u0438\", \" \\u043a \\u0438\\u0433\\u0440\\u0435.\"], \"extra_web_results\": []}"])</script><script>self.__next_f.push([1,"2a:T83ce,"])</script><script>self.__next_f.push([1,"{\"answer\": \"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e! \\u0414\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0434\\u0438\\u043c \\u043f\\u044f\\u0442\\u0443\\u044e \\u0447\\u0430\\u0441\\u0442\\u044c, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442 \\u0435\\u0449\\u0435 \\u0431\\u043e\\u043b\\u044c\\u0448\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0438 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u0439 \\u043a \\u043d\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0431\\u043e\\u0442\\u0443 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\". \\u0412 \\u044d\\u0442\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438 \\u043c\\u044b \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u043c \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439, \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0438\\u0433\\u0440\\u044b, \\u0442\\u0443\\u0440\\u043d\\u0438\\u0440\\u043d\\u044b\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438 \\u0438\\u043d\\u0442\\u0435\\u0433\\u0440\\u0430\\u0446\\u0438\\u044e \\u0441 \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435 \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445.\\n\\n```python\\nimport sqlite3\\nfrom telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup\\nfrom telegram.ext import CommandHandler, CallbackQueryHandler, ConversationHandler, MessageHandler, Filters\\nfrom game_data_init import get_game_data, initialize_game_data, update_game_data\\n\\n# \\u0414\\u043e\\u0431\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f\\nACHIEVEMENTS, SETTINGS, TOURNAMENT = range(9, 12)\\n\\n# \\u0418\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u044f \\u0431\\u0430\\u0437\\u044b \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\\ndef init_db():\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute('''CREATE TABLE IF NOT EXISTS players\\n                 (id INTEGER PRIMARY KEY, name TEXT, wins INTEGER, losses INTEGER, draws INTEGER, rating INTEGER)''')\\n    c.execute('''CREATE TABLE IF NOT EXISTS achievements\\n                 (id INTEGER PRIMARY KEY, player_id INTEGER, achievement TEXT, date TEXT)''')\\n    conn.commit()\\n    conn.close()\\n\\n# \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b \\u0441 \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\\ndef get_player(player_id):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT * FROM players WHERE id=?\\\", (player_id,))\\n    player = c.fetchone()\\n    conn.close()\\n    return player\\n\\ndef update_player_stats(player_id, name, result):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    player = get_player(player_id)\\n    if player is None:\\n        c.execute(\\\"INSERT INTO players (id, name, wins, losses, draws, rating) VALUES (?, ?, 0, 0, 0, 1000)\\\", (player_id, name))\\n        player = get_player(player_id)\\n    \\n    wins, losses, draws, rating = player[2], player[3], player[4], player[5]\\n    if result == 'win':\\n        wins += 1\\n        rating += 25\\n    elif result == 'loss':\\n        losses += 1\\n        rating -= 15\\n    else:  # draw\\n        draws += 1\\n        rating += 5\\n    \\n    c.execute(\\\"UPDATE players SET wins=?, losses=?, draws=?, rating=? WHERE id=?\\\", \\n              (wins, losses, draws, rating, player_id))\\n    conn.commit()\\n    conn.close()\\n    check_achievements(player_id)\\n\\ndef check_achievements(player_id):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    player = get_player(player_id)\\n    achievements = []\\n    \\n    if player[2] \u003e= 10 and not has_achievement(player_id, \\\"10 \\u043f\\u043e\\u0431\\u0435\\u0434\\\"):\\n        achievements.append(\\\"10 \\u043f\\u043e\\u0431\\u0435\\u0434\\\")\\n    if player[5] \u003e= 1500 and not has_achievement(player_id, \\\"\\u041c\\u0430\\u0441\\u0442\\u0435\\u0440\\\"):\\n        achievements.append(\\\"\\u041c\\u0430\\u0441\\u0442\\u0435\\u0440\\\")\\n    \\n    for achievement in achievements:\\n        c.execute(\\\"INSERT INTO achievements (player_id, achievement, date) VALUES (?, ?, datetime('now'))\\\", \\n                  (player_id, achievement))\\n    \\n    conn.commit()\\n    conn.close()\\n    return achievements\\n\\ndef has_achievement(player_id, achievement):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT * FROM achievements WHERE player_id=? AND achievement=?\\\", (player_id, achievement))\\n    result = c.fetchone() is not None\\n    conn.close()\\n    return result\\n\\n# \\u041e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0438 \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0434\\u043b\\u044f \\u0431\\u043e\\u0442\\u0430\\ndef show_achievements(update: Update, context):\\n    player_id = update.effective_user.id\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT achievement, date FROM achievements WHERE player_id=?\\\", (player_id,))\\n    achievements = c.fetchall()\\n    conn.close()\\n    \\n    if achievements:\\n        text = \\\"\\u0412\\u0430\\u0448\\u0438 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u044f:\\\\n\\\\n\\\"\\n        for achievement, date in achievements:\\n            text += f\\\"{achievement} - \\u043f\\u043e\\u043b\\u0443\\u0447\\u0435\\u043d\\u043e {date}\\\\n\\\"\\n    else:\\n        text = \\\"\\u0423 \\u0432\\u0430\\u0441 \\u043f\\u043e\\u043a\\u0430 \\u043d\\u0435\\u0442 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439. \\u041f\\u0440\\u043e\\u0434\\u043e\\u043b\\u0436\\u0430\\u0439\\u0442\\u0435 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0438\\u0445!\\\"\\n    \\n    update.message.reply_text(text)\\n    return MENU\\n\\ndef settings(update: Update, context):\\n    keyboard = [\\n        [InlineKeyboardButton(\\\"\\u0420\\u0430\\u0437\\u043c\\u0435\\u0440 \\u043f\\u043e\\u043b\\u044f\\\", callback_data='setting_size')],\\n        [InlineKeyboardButton(\\\"\\u0421\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430\\\", callback_data='setting_difficulty')],\\n        [InlineKeyboardButton(\\\"\\u041d\\u0430\\u0437\\u0430\\u0434\\\", callback_data='back_to_menu')]\\n    ]\\n    reply_markup = InlineKeyboardMarkup(keyboard)\\n    update.message.reply_text(\\\"\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0438\\u0433\\u0440\\u044b:\\\", reply_markup=reply_markup)\\n    return SETTINGS\\n\\ndef handle_settings(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n    \\n    if query.data == 'setting_size':\\n        keyboard = [\\n            [InlineKeyboardButton(\\\"3x3\\\", callback_data='size_3')],\\n            [InlineKeyboardButton(\\\"4x4\\\", callback_data='size_4')],\\n            [InlineKeyboardButton(\\\"5x5\\\", callback_data='size_5')]\\n        ]\\n        query.edit_message_text(\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u043c\\u0435\\u0440 \\u043f\\u043e\\u043b\\u044f:\\\", reply_markup=InlineKeyboardMarkup(keyboard))\\n    elif query.data == 'setting_difficulty':\\n        keyboard = [\\n            [InlineKeyboardButton(\\\"\\u041b\\u0435\\u0433\\u043a\\u0438\\u0439\\\", callback_data='diff_easy')],\\n            [InlineKeyboardButton(\\\"\\u0421\\u0440\\u0435\\u0434\\u043d\\u0438\\u0439\\\", callback_data='diff_medium')],\\n            [InlineKeyboardButton(\\\"\\u0421\\u043b\\u043e\\u0436\\u043d\\u044b\\u0439\\\", callback_data='diff_hard')]\\n        ]\\n        query.edit_message_text(\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430:\\\", reply_markup=InlineKeyboardMarkup(keyboard))\\n    elif query.data.startswith('size_') or query.data.startswith('diff_'):\\n        setting = query.data.split('_')[0]\\n        value = query.data.split('_')[1]\\n        context.user_data[setting] = value\\n        query.edit_message_text(f\\\"\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0430 {setting} \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0430 \\u043d\\u0430 {value}\\\")\\n        return settings(update, context)\\n    elif query.data == 'back_to_menu':\\n        return start(update, context)\\n    \\n    return SETTINGS\\n\\ndef start_tournament(update: Update, context):\\n    # \\u0417\\u0434\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443 \\u0434\\u043b\\u044f \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0438\\u044f \\u0438 \\u0443\\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u044f \\u0442\\u0443\\u0440\\u043d\\u0438\\u0440\\u043e\\u043c\\n    update.message.reply_text(\\\"\\u0422\\u0443\\u0440\\u043d\\u0438\\u0440\\u043d\\u044b\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c \\u043f\\u043e\\u043a\\u0430 \\u043d\\u0430\\u0445\\u043e\\u0434\\u0438\\u0442\\u0441\\u044f \\u0432 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0435.\\\")\\n    return MENU\\n\\ndef main():\\n    init_db()\\n    initialize_game_data()\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context=True)\\n    dp = updater.dispatcher\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [\\n                CallbackQueryHandler(button),\\n                CommandHandler('stats', show_stats),\\n                CommandHandler('leaderboard', show_leaderboard),\\n                CommandHandler('achievements', show_achievements),\\n                CommandHandler('settings', settings),\\n                CommandHandler('tournament', start_tournament)\\n            ],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command, player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~Filters.command, invite_friend)],\\n            GAME_PLAY: [CallbackQueryHandler(make_move)],\\n            GAME_END: [MessageHandler(Filters.text \u0026 ~Filters.command, end_game)],\\n            STATS: [MessageHandler(Filters.text \u0026 ~Filters.command, show_stats)],\\n            LEADERBOARD: [MessageHandler(Filters.text \u0026 ~Filters.command, show_leaderboard)],\\n            ACHIEVEMENTS: [MessageHandler(Filters.text \u0026 ~Filters.command, show_achievements)],\\n            SETTINGS: [CallbackQueryHandler(handle_settings)],\\n            TOURNAMENT: [MessageHandler(Filters.text \u0026 ~Filters.command, start_tournament)]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u043f\\u044f\\u0442\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u0435 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f:\\n\\n1. \\u0418\\u043d\\u0442\\u0435\\u0433\\u0440\\u0430\\u0446\\u0438\\u044f \\u0441 SQLite \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435 \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438 \\u0438\\u0445 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439.\\n2. \\u0421\\u0438\\u0441\\u0442\\u0435\\u043c\\u0430 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u043f\\u0440\\u043e\\u0433\\u0440\\u0435\\u0441\\u0441 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438 \\u043d\\u0430\\u0433\\u0440\\u0430\\u0436\\u0434\\u0430\\u0435\\u0442 \\u0438\\u0445 \\u0437\\u0430 \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043f\\u0435\\u0445\\u0438.\\n3. \\u041c\\u0435\\u043d\\u044e \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0435\\u043a, \\u043f\\u043e\\u0437\\u0432\\u043e\\u043b\\u044f\\u044e\\u0449\\u0435\\u0435 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430\\u043c \\u0432\\u044b\\u0431\\u0438\\u0440\\u0430\\u0442\\u044c \\u0440\\u0430\\u0437\\u043c\\u0435\\u0440 \\u0438\\u0433\\u0440\\u043e\\u0432\\u043e\\u0433\\u043e \\u043f\\u043e\\u043b\\u044f \\u0438 \\u0441\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430.\\n4. \\u0417\\u0430\\u0433\\u043e\\u0442\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043b\\u044f \\u0442\\u0443\\u0440\\u043d\\u0438\\u0440\\u043d\\u043e\\u0433\\u043e \\u0440\\u0435\\u0436\\u0438\\u043c\\u0430 (\\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u043c\\u043e\\u0436\\u043d\\u043e \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043e\\u0442\\u0430\\u0442\\u044c \\u0434\\u0430\\u043b\\u044c\\u0448\\u0435).\\n5. \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\\u0443\\u0440\\u0430 \\u043a\\u043e\\u0434\\u0430 \\u0441 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0439 \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b \\u0441 \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445.\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434:\\n\\n1. \\u0423\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u0438\\u0442\\u0435 \\u0431\\u0438\\u0431\\u043b\\u0438\\u043e\\u0442\\u0435\\u043a\\u0443 sqlite3, \\u0435\\u0441\\u043b\\u0438 \\u043e\\u043d\\u0430 \\u0435\\u0449\\u0435 \\u043d\\u0435 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0430.\\n2. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u043c \\u0447\\u0435\\u0442\\u044b\\u0440\\u0435\\u043c \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\\n3. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c, \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\\u043e\\u0440\\u0442\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u0445 \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b.\\n4. \\u041e\\u0431\\u043d\\u043e\\u0432\\u0438\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 `update_stats` \\u0438 `show_stats` \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b \\u0441 \\u043d\\u043e\\u0432\\u043e\\u0439 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u043e\\u0439 \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445.\\n5. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e Telegram \\u0431\\u043e\\u0442\\u0430.\\n\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u0448 \\u0431\\u043e\\u0442 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0438\\u043c\\u0435\\u0435\\u0442 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b \\u0441 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u043e\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439, \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0430\\u043c\\u0438 \\u0438\\u0433\\u0440\\u044b \\u0438 \\u0431\\u043e\\u043b\\u0435\\u0435 \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u044b\\u043c \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445. \\u042d\\u0442\\u043e \\u0434\\u0435\\u043b\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0438\\u043d\\u0442\\u0435\\u0440\\u0435\\u0441\\u043d\\u043e\\u0439 \\u0438 \\u043f\\u0440\\u0438\\u0432\\u043b\\u0435\\u043a\\u0430\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e\\u0439 \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432, \\u0430 \\u0442\\u0430\\u043a\\u0436\\u0435 \\u043e\\u0431\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0431\\u043e\\u043b\\u044c\\u0448\\u0443\\u044e \\u0433\\u0438\\u0431\\u043a\\u043e\\u0441\\u0442\\u044c \\u0438 \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\\u0435\\u0439\\u0448\\u0435\\u0433\\u043e \\u0440\\u0430\\u0437\\u0432\\u0438\\u0442\\u0438\\u044f.\", \"web_results\": [], \"chunks\": [\"\\u041a\\u043e\\u043d\\u0435\\u0447\\u043d\\u043e! \\u0414\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u043e\\u0437\\u0434\", \"\\u0430\\u0434\\u0438\\u043c \\u043f\\u044f\\u0442\\u0443\\u044e \\u0447\\u0430\\u0441\", \"\\u0442\\u044c, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442 \\u0435\", \"\\u0449\\u0435 \\u0431\\u043e\\u043b\\u044c\\u0448\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\", \"\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0438 \\u0443\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u0439 \\u043a \\u043d\", \"\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0431\\u043e\\u0442\\u0443 \\u0434\\u043b\\u044f \\u0438\\u0433\", \"\\u0440\\u044b \\u0432 \\\"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\". \\u0412\", \" \\u044d\\u0442\\u043e\\u0439 \\u0447\\u0430\\u0441\\u0442\\u0438 \\u043c\\u044b \\u0434\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u043c \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443 \\u0434\\u043e\\u0441\\u0442\", \"\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439, \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043d\\u0430\\u0441\\u0442\", \"\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0438\\u0433\\u0440\\u044b, \\u0442\\u0443\\u0440\", \"\\u043d\\u0438\\u0440\\u043d\\u044b\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c \\u0438 \\u0438\\u043d\\u0442\", \"\\u0435\\u0433\\u0440\\u0430\\u0446\\u0438\\u044e \\u0441 \\u0431\\u0430\\u0437\", \"\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435\", \" \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\", \"\\u043d\\u044b\\u0445.\\n\\n```python\\nimport sqlite3\\nfrom telegram import Update\", \", InlineKeyboardButton\", \", InlineKeyboardMark\", \"up\\nfrom telegram.ext import Comman\", \"dHandler, CallbackQueryHandler\", \", ConversationHandler, Message\", \"Handler, Filters\", \"\\nfrom game_data_init import get\", \"_game_data, initialize\", \"_game_data, update\", \"_game_data\\n\\n# \\u0414\\u043e\\u0431\", \"\\u0430\\u0432\\u0438\\u043c \\u043d\\u043e\\u0432\\u044b\\u0435 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\", \"\\u043d\\u0438\\u044f\\nACHIEVEMENTS, SETTINGS, TOURNAMENT =\", \" range(9, 12)\\n\\n# \\u0418\\u043d\", \"\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u044f \\u0431\\u0430\\u0437\\u044b \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\\ndef init\", \"_db():\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute('''CREATE TABLE IF NOT EXISTS players\", \"\\n                 (id INTEGER PRIMARY KEY,\", \" name TEXT, wins\", \" INTEGER, losses INTEGER, draws\", \" INTEGER, rating INTEGER)''')\\n    c.execute('''CREATE TABLE IF NOT EXISTS achievements\", \"\\n                 (id INTEGER PRIMARY KEY, player\", \"_id INTEGER, achievement\", \" TEXT, date TEXT\", \")''')\\n    conn.commit()\\n    conn.close()\\n\\n# \\u0424\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438\", \" \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b \\u0441 \\u0431\\u0430\\u0437\\u043e\\u0439\", \" \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\\ndef get_player(player_id):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT * FROM players WHERE i\", \"d=?\\\", (player_id,))\\n    player = c.fetchone()\\n    conn.close()\\n    return player\\n\\ndef update_player_\", \"stats(player_id, name\", \", result):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    player = get_player(player_id)\\n    if player is\", \" None:\\n        c.execute(\\\"INSERT INTO players (id, name, wins,\", \" losses, draws, rating) VALUES (?, ?, 0, 0, 0, 1000)\\\", (player_id, name))\\n        player\", \" = get_player(player_id)\\n    \\n    wins, losses, draws,\", \" rating = player[2], player[3], player[4], player[5]\\n    if result == 'win':\", \"\\n        wins += 1\\n        rating += 25\\n    elif result == 'loss':\\n        losses += 1\\n        rating -= 15\\n    else:  # draw\", \"\\n        draws += 1\\n        rating += 5\\n    \\n    c.execute(\\\"UPDATE players SET wins=?, losses=?, draws\", \"=?, rating=? WHERE\", \" id=?\\\", \\n              (wins, losses, draws, rating, player\", \"_id))\\n    conn.commit()\\n    conn.close()\\n    check_achievements(player_id)\\n\\ndef check_achievements(player_id):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    player\", \" = get_player(player_id)\\n    achievements = []\\n    \\n    if player[2] \u003e= 10 and not\", \" has_achievement(player_id, \\\"\", \"10 \\u043f\\u043e\\u0431\\u0435\\u0434\\\"):\\n        achievements.append(\\\"10 \\u043f\\u043e\\u0431\\u0435\\u0434\\\")\\n    if player[5] \u003e= 1500 and not has_achievement\", \"(player_id, \\\"\\u041c\\u0430\\u0441\\u0442\\u0435\\u0440\\\"):\\n        achievements.append(\\\"\\u041c\\u0430\\u0441\\u0442\\u0435\\u0440\\\")\\n    \\n    for achievement in achievements:\\n        c.execute(\\\"INSERT INTO achievements (player_id, achievement, date) VALUES (?, ?, datetime\", \"('now'))\\\", \\n                  (player_id, achievement))\\n    \\n    conn.commit()\\n    conn.close()\\n    return achievements\\n\\ndef has_achievement(player_id, achievement):\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT * FROM achievements WHERE player\", \"_id=? AND achievement\", \"=?\\\", (player_id, achievement))\\n    result = c.fetchone\", \"() is not None\\n    conn.close()\\n    return result\\n\\n# \\u041e\\u0431\", \"\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0438 \\u043d\\u043e\\u0432\", \"\\u044b\\u0435 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438 \\u0434\\u043b\\u044f\", \" \\u0431\\u043e\\u0442\\u0430\\ndef show_achievements(update: Update, context):\\n    player_id = update.effective_user.\", \"id\\n    conn = sqlite3.connect('game_data.db')\\n    c = conn.cursor()\\n    c.execute(\\\"SELECT achievement, date FROM achievements WHERE player\", \"_id=?\\\", (player_id,))\\n    achievements = c.fetchall()\\n    conn.close()\\n    \\n    if achievements\", \":\\n        text = \\\"\\u0412\\u0430\\u0448\\u0438 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u044f:\\\\n\\\\n\\\"\\n        for achievement,\", \" date in achievements:\\n            text += f\\\"{achievement} - \\u043f\\u043e\\u043b\\u0443\\u0447\\u0435\\u043d\\u043e {date}\\\\n\\\"\\n    else:\\n        text = \\\"\\u0423 \\u0432\\u0430\\u0441 \\u043f\", \"\\u043e\\u043a\\u0430 \\u043d\\u0435\\u0442 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439\", \". \\u041f\\u0440\\u043e\\u0434\\u043e\\u043b\\u0436\\u0430\\u0439\\u0442\\u0435 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\", \", \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c\", \" \\u0438\\u0445!\\\"\\n    \\n    update.message.reply_text\", \"(text)\\n    return MENU\", \"\\n\\ndef settings(update: Update, context):\\n    keyboard = [\\n        [InlineKeyboardButton(\\\"\\u0420\\u0430\\u0437\\u043c\\u0435\\u0440 \\u043f\\u043e\\u043b\\u044f\\\", callback_\", \"data='setting_size')],\\n        [InlineKeyboardButton(\\\"\\u0421\", \"\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430\\\", callback_data='\", \"setting_difficulty')],\\n        [InlineKeyboardButton(\\\"\\u041d\\u0430\\u0437\\u0430\\u0434\\\", callback_data='\", \"back_to_menu')]\\n    ]\\n    reply_markup = InlineKeyboardMark\", \"up(keyboard)\\n    update.message.reply_\", \"text(\\\"\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0438\\u0433\\u0440\\u044b:\\\",\", \" reply_markup=reply_\", \"markup)\\n    return SETTINGS\\n\\ndef handle_settings\", \"(update: Update, context):\\n    query = update.callback_query\\n    query.answer()\\n    \\n    if query.data == 'setting_size':\", \"\\n        keyboard = [\\n            [InlineKeyboardButton(\\\"3x3\\\", callback_data='size\", \"_3')],\\n            [InlineKeyboardButton(\\\"4x4\\\", callback_data='size_4')],\\n            [InlineKeyboardButton(\\\"5x5\\\", callback_data='size\", \"_5')]\\n        ]\\n        query.edit_message_text\", \"(\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u043c\\u0435\\u0440 \\u043f\\u043e\\u043b\\u044f:\\\", reply_\", \"markup=InlineKeyboardMarkup(keyboard))\\n    elif query.data ==\", \" 'setting_difficulty':\\n        keyboard = [\\n            [InlineKeyboardButton(\\\"\\u041b\\u0435\\u0433\\u043a\\u0438\\u0439\\\", callback_data='diff\", \"_easy')],\\n            [InlineKeyboardButton(\\\"\\u0421\\u0440\\u0435\\u0434\\u043d\\u0438\\u0439\\\", callback_data='diff_medium\", \"')],\\n            [InlineKeyboardButton(\\\"\\u0421\\u043b\\u043e\\u0436\\u043d\\u044b\\u0439\\\", callback_\", \"data='diff_hard')]\\n        ]\\n        query.edit_message_text\", \"(\\\"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430:\\\", reply\", \"_markup=InlineKeyboardMarkup(keyboard))\\n    elif query.data.\", \"startswith('size_') or query.data.start\", \"swith('diff_'):\\n        setting = query.data.split\", \"('_')[0]\\n        value = query.data.split('_')[1]\\n        context.user_data[setting] = value\\n        query.edit_message_\", \"text(f\\\"\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0430 {setting} \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0430 \\u043d\\u0430 {value}\\\")\\n        return settings\", \"(update, context)\\n    elif query.data == '\", \"back_to_menu':\\n        return start\", \"(update, context)\\n    \\n    return SETTINGS\", \"\\n\\ndef start_tournament(update: Update, context):\\n    # \\u0417\\u0434\", \"\\u0435\\u0441\\u044c \\u043c\\u043e\\u0436\\u043d\\u043e \\u0434\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u043e\\u0433\\u0438\\u043a\\u0443\", \" \\u0434\\u043b\\u044f \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0438\\u044f \\u0438\", \" \\u0443\\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u044f \\u0442\\u0443\\u0440\\u043d\\u0438\\u0440\\u043e\\u043c\", \"\\n    update.message.reply_text\", \"(\\\"\\u0422\\u0443\\u0440\\u043d\\u0438\\u0440\\u043d\\u044b\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043c \\u043f\", \"\\u043e\\u043a\\u0430 \\u043d\\u0430\\u0445\\u043e\\u0434\\u0438\\u0442\\u0441\\u044f \\u0432 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0435.\\\")\\n    return MENU\\n\\ndef main():\\n    init_db()\\n    initialize_game_data()\\n\\n    updater = Updater(\\\"YOUR_BOT_TOKEN\\\", use_context\", \"=True)\\n    dp = updater.dispatcher\", \"\\n\\n    conv_handler = ConversationHandler(\\n        entry_points=[CommandHandler('start', start)],\\n        states={\\n            MENU: [\\n                CallbackQueryHandler(button),\\n                CommandHandler('stats', show_stats),\\n                CommandHandler('leaderboard', show_le\", \"aderboard),\\n                CommandHandler('achievements', show_achievements),\\n                CommandHandler('settings', settings),\\n                CommandHandler('tournament', start_tournament)\\n            ],\\n            GAME_MODE: [CallbackQueryHandler(button)],\\n            PLAYER_NAME: [MessageHandler(Filters.text \u0026 ~Filters.command,\", \" player_name)],\\n            INVITE_FRIEND: [MessageHandler(Filters.text \u0026 ~\", \"Filters.command, invite_\", \"friend)],\\n            GAME_PLAY: [CallbackQueryHandler(make_move)],\\n            GAME_END: [Message\", \"Handler(Filters.text \u0026 ~Filters.comman\", \"d, end_game)],\\n            STATS: [MessageHandler(Filters.text \u0026 ~Filters.\", \"command, show_stats)],\\n            LEADERBOARD: [MessageHandler(Filters.text \u0026 ~\", \"Filters.command, show\", \"_leaderboard)],\\n            ACHIEVEMENTS: [MessageHandler(Filters.text \u0026 ~Filters\", \".command, show_achievements\", \")],\\n            SETTINGS: [CallbackQueryHandler(handle_settings)],\\n            TOURNAMENT: [MessageHandler(Filters.text \u0026 ~Filters\", \".command, start_tournament\", \")]\\n        },\\n        fallbacks=[CommandHandler('start', start)]\\n    )\\n\\n    dp.add_handler(conv_handler)\\n\\n    updater.start_polling()\\n    updater.idle()\\n\\nif __name__ == '__main__':\\n    main()\\n```\\n\\n\\u042d\\u0442\\u0430 \\u043f\", \"\\u044f\\u0442\\u0430\\u044f \\u0447\\u0430\\u0441\\u0442\\u044c \\u0434\\u043e\\u0431\\u0430\\u0432\", \"\\u043b\\u044f\\u0435\\u0442 \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u0435 \\u0443\\u043b\", \"\\u0443\\u0447\\u0448\\u0435\\u043d\\u0438\\u044f:\\n\\n1. \\u0418\\u043d\\u0442\", \"\\u0435\\u0433\\u0440\\u0430\\u0446\\u0438\\u044f \\u0441 SQL\", \"ite \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u043b\\u044f \\u0431\\u043e\\u043b\\u0435\\u0435\", \" \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u043e\\u0433\\u043e \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f\", \" \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432 \\u0438 \\u0438\\u0445\", \" \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439.\\n2. \\u0421\\u0438\\u0441\\u0442\\u0435\\u043c\\u0430\", \" \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439, \\u043a\\u043e\\u0442\\u043e\\u0440\\u0430\\u044f\", \" \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u043f\\u0440\", \"\\u043e\\u0433\\u0440\\u0435\\u0441\\u0441 \\u0438\\u0433\\u0440\\u043e\\u043a\\u043e\\u0432\", \" \\u0438 \\u043d\\u0430\\u0433\\u0440\\u0430\\u0436\\u0434\\u0430\\u0435\\u0442 \\u0438\\u0445 \\u0437\\u0430 \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0435\\u043d\", \"\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043f\\u0435\\u0445\\u0438.\\n3. \\u041c\\u0435\", \"\\u043d\\u044e \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0435\\u043a, \\u043f\\u043e\\u0437\", \"\\u0432\\u043e\\u043b\\u044f\\u044e\\u0449\\u0435\\u0435 \\u0438\\u0433\\u0440\\u043e\\u043a\\u0430\\u043c \\u0432\\u044b\", \"\\u0431\\u0438\\u0440\\u0430\\u0442\\u044c \\u0440\\u0430\\u0437\\u043c\\u0435\\u0440 \\u0438\\u0433\", \"\\u0440\\u043e\\u0432\\u043e\\u0433\\u043e \\u043f\\u043e\\u043b\\u044f \\u0438 \\u0441\", \"\\u043b\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0431\\u043e\\u0442\\u0430.\", \"\\n4. \\u0417\\u0430\\u0433\\u043e\\u0442\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043b\\u044f \\u0442\\u0443\\u0440\\u043d\\u0438\\u0440\", \"\\u043d\\u043e\\u0433\\u043e \\u0440\\u0435\\u0436\\u0438\\u043c\\u0430 (\\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u043c\\u043e\\u0436\", \"\\u043d\\u043e \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043e\\u0442\\u0430\\u0442\\u044c \\u0434\", \"\\u0430\\u043b\\u044c\\u0448\\u0435).\\n5. \\u0423\\u043b\\u0443\\u0447\\u0448\\u0435\\u043d\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u0443\\u043a\\u0442\", \"\\u0443\\u0440\\u0430 \\u043a\\u043e\\u0434\\u0430 \\u0441 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\", \"\\u0438\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0439 \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\", \"\\u044b \\u0441 \\u0431\\u0430\\u0437\\u043e\\u0439 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445\", \".\\n\\n\\u0427\\u0442\\u043e\\u0431\\u044b \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043a\\u043e\\u0434\", \":\\n\\n1. \\u0423\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u0438\\u0442\\u0435 \\u0431\\u0438\\u0431\\u043b\", \"\\u0438\\u043e\\u0442\\u0435\\u043a\\u0443 sqlite\", \"3, \\u0435\\u0441\\u043b\\u0438 \\u043e\\u043d\\u0430 \\u0435\\u0449\\u0435 \\u043d\\u0435 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\", \"\\u043b\\u0435\\u043d\\u0430.\\n2. \\u0414\\u043e\\u0431\\u0430\\u0432\\u044c\\u0442\\u0435 \\u044d\", \"\\u0442\\u0443 \\u0447\\u0430\\u0441\\u0442\\u044c \\u043a \\u043f\\u0440\\u0435\\u0434\\u044b\", \"\\u0434\\u0443\\u0449\\u0438\\u043c \\u0447\\u0435\\u0442\\u044b\\u0440\\u0435\\u043c\", \" \\u0447\\u0430\\u0441\\u0442\\u044f\\u043c.\\n3. \\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044c\", \", \\u0447\\u0442\\u043e \\u0432\\u0441\\u0435 \\u0438\\u043c\\u043f\\u043e\\u0440\\u0442\\u044b\", \" \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u044b \\u0438 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u0438\", \" \\u0438\\u0437 \\u043f\\u0440\\u0435\\u0434\\u044b\\u0434\\u0443\\u0449\\u0438\\u0445\", \" \\u0447\\u0430\\u0441\\u0442\\u0435\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b.\", \"\\n4. \\u041e\\u0431\\u043d\\u043e\\u0432\\u0438\\u0442\\u0435 \\u0444\\u0443\\u043d\\u043a\", \"\\u0446\\u0438\\u0438 `update_stats` \\u0438 `show_stats` \\u0434\\u043b\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b \\u0441 \\u043d\\u043e\\u0432\\u043e\\u0439 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\", \"\\u043e\\u0439 \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u044f \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445.\", \"\\n5. \\u0417\\u0430\\u043c\\u0435\\u043d\\u0438\\u0442\\u0435 `\\\"YOUR_BOT_TOKEN\\\"` \\u043d\\u0430 \\u0442\\u043e\\u043a\\u0435\\u043d \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e Telegram \\u0431\", \"\\u043e\\u0442\\u0430.\\n\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u0448 \\u0431\\u043e\\u0442\", \" \\u0434\\u043b\\u044f \\u0438\\u0433\\u0440\\u044b \\u0432 \\\"\", \"\\u041a\\u0440\\u0435\\u0441\\u0442\\u0438\\u043a\\u0438-\\u043d\\u043e\\u043b\\u0438\\u043a\\u0438\\\" \\u0438\\u043c\\u0435\\u0435\\u0442 \\u0440\\u0430\\u0441\", \"\\u0448\\u0438\\u0440\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\", \" \\u0441 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u043e\\u0439 \\u0434\\u043e\\u0441\\u0442\\u0438\\u0436\\u0435\\u043d\\u0438\\u0439,\", \" \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0430\\u043c\\u0438 \\u0438\\u0433\\u0440\\u044b \\u0438\", \" \\u0431\\u043e\\u043b\\u0435\\u0435 \\u043d\\u0430\\u0434\\u0435\\u0436\\u043d\\u044b\\u043c \\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u0438\\u0435\\u043c\", \" \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445. \\u042d\\u0442\\u043e \\u0434\\u0435\\u043b\", \"\\u0430\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0443 \\u0431\\u043e\\u043b\\u0435\\u0435 \\u0438\\u043d\\u0442\\u0435\\u0440\\u0435\\u0441\", \"\\u043d\\u043e\\u0439 \\u0438 \\u043f\\u0440\\u0438\\u0432\\u043b\\u0435\\u043a\\u0430\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e\\u0439 \\u0434\\u043b\\u044f \\u0438\\u0433\", \"\\u0440\\u043e\\u043a\\u043e\\u0432, \\u0430 \\u0442\\u0430\\u043a\\u0436\\u0435 \\u043e\\u0431\", \"\\u0435\\u0441\\u043f\\u0435\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0431\\u043e\\u043b\\u044c\\u0448\", \"\\u0443\\u044e \\u0433\\u0438\\u0431\\u043a\\u043e\\u0441\\u0442\\u044c \\u0438\", \" \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\", \"\\u0435\\u0439\\u0448\\u0435\\u0433\\u043e \\u0440\\u0430\\u0437\\u0432\\u0438\\u0442\\u0438\\u044f.\"], \"extra_web_results\": []}"])</script><script>self.__next_f.push([1,"2b:[\"uuid\",\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"oc\"]\n"])</script><script>self.__next_f.push([1,"c:[\"$\",\"$L18\",null,{\"state\":{\"mutations\":[],\"queries\":[{\"state\":{\"data\":{\"1903cf12-faff-494c-a4c4-32431d22f0eb\":[{\"attachments\":[],\"author_image\":null,\"author_username\":null,\"backend_uuid\":\"7496f6e0-1126-430d-9e32-983127ebb20d\",\"bookmark_state\":\"NOT_BOOKMARKED\",\"context_uuid\":\"fa0ca743-f654-4e3e-a152-72153f84046f\",\"display_model\":\"turbo\",\"expiry_time\":\"2024-08-15T15:41:06.786051\",\"frontend_context_uuid\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\",\"gpt4\":false,\"knowledge_cards\":[],\"media_items\":[],\"mode\":\"concise\",\"personalized\":false,\"plan\":null,\"privacy_state\":\"INCOGNITO\",\"query_str\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"read_write_token\":\"5a915726-a00b-468e-bf60-5e9b8afb610d\",\"related_queries\":[\"Какие функции можно добавить для привлечения игроков\",\"Какие типы игр можно включить в бота\",\"Какие библиотеки или инструменты помогут создать устойчивый код\",\"Какие ошибки нужно предотвратить при создании устойчивого кода\",\"Какие настройки безопасности помогут защитить код от удаления\"],\"s3_social_preview_url\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\",\"search_focus\":\"internet\",\"should_index\":false,\"social_info\":{\"fork_count\":0,\"like_count\":0,\"user_likes\":false,\"view_count\":2},\"status\":\"completed\",\"step_type\":\"FINAL\",\"subtext\":\"NONE\",\"text\":\"$26\",\"thread_access\":1,\"thread_title\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"thread_url_slug\":\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"updated_datetime\":\"2024-08-14T15:44:12.557017\",\"uuid\":\"703a885e-dccf-4d04-a822-fad6b8acdd52\",\"widget_data\":[]},{\"attachments\":[],\"author_image\":null,\"author_username\":null,\"backend_uuid\":\"600f7838-c8b3-4786-bc71-17d1351940cd\",\"context_uuid\":\"fa0ca743-f654-4e3e-a152-72153f84046f\",\"display_model\":\"turbo\",\"expiry_time\":\"2024-08-15T15:41:06.786051\",\"frontend_context_uuid\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\",\"gpt4\":false,\"knowledge_cards\":[],\"media_items\":[],\"mode\":\"concise\",\"personalized\":false,\"plan\":null,\"privacy_state\":\"INCOGNITO\",\"query_str\":\"Напиши вторую часть\",\"read_write_token\":\"5a915726-a00b-468e-bf60-5e9b8afb610d\",\"related_queries\":[\"Какие механики можно добавить для улучшения игрового процесса\",\"Какие функции могут привлечь новых игроков к боту\",\"Какие типы контента могут интересовать игроков\",\"Какие методы анализа поведения игроков помогут улучшить бота\",\"Какие способы взаимодействия с игроками могут быть наиболее эффективными\"],\"s3_social_preview_url\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\",\"search_focus\":\"internet\",\"should_index\":false,\"status\":\"completed\",\"step_type\":\"FINAL\",\"subtext\":\"NONE\",\"text\":\"$27\",\"thread_access\":1,\"thread_title\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"thread_url_slug\":\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"updated_datetime\":\"2024-08-14T15:44:12.557017\",\"uuid\":\"fc5721d1-d15a-4cf1-8de3-8dcbea5c0b51\",\"widget_data\":[]},{\"attachments\":[],\"author_image\":null,\"author_username\":null,\"backend_uuid\":\"8cbd7f46-6db7-437b-b0d1-e5b2509942e4\",\"context_uuid\":\"fa0ca743-f654-4e3e-a152-72153f84046f\",\"display_model\":\"turbo\",\"expiry_time\":\"2024-08-15T15:41:06.786051\",\"frontend_context_uuid\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\",\"gpt4\":false,\"knowledge_cards\":[],\"media_items\":[],\"mode\":\"concise\",\"personalized\":false,\"plan\":null,\"privacy_state\":\"INCOGNITO\",\"query_str\":\"Напиши третью часть\",\"read_write_token\":\"5a915726-a00b-468e-bf60-5e9b8afb610d\",\"related_queries\":[\"Какие новые функции можно добавить для улучшения игрового процесса\",\"Какие игровые механики могут привлечь еще больше игроков\",\"Какие типы контента могут интересовать игроков в будущем\",\"Какие методы анализа поведения игроков помогут улучшить бота\",\"Какие способы взаимодействия с игроками могут быть наиболее эффективными\"],\"s3_social_preview_url\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\",\"search_focus\":\"internet\",\"should_index\":false,\"status\":\"completed\",\"step_type\":\"FINAL\",\"subtext\":\"NONE\",\"text\":\"$28\",\"thread_access\":1,\"thread_title\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"thread_url_slug\":\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"updated_datetime\":\"2024-08-14T15:44:12.557017\",\"uuid\":\"817af5b9-5c71-4259-82fb-5c48ea690196\",\"widget_data\":[]},{\"attachments\":[],\"author_image\":null,\"author_username\":null,\"backend_uuid\":\"4f59ba23-7849-41bc-8c6c-ef7d8135cab8\",\"context_uuid\":\"fa0ca743-f654-4e3e-a152-72153f84046f\",\"display_model\":\"turbo\",\"expiry_time\":\"2024-08-15T15:41:06.786051\",\"frontend_context_uuid\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\",\"gpt4\":false,\"knowledge_cards\":[],\"media_items\":[],\"mode\":\"concise\",\"personalized\":false,\"plan\":null,\"privacy_state\":\"INCOGNITO\",\"query_str\":\"напишиб четвертую часть\",\"read_write_token\":\"5a915726-a00b-468e-bf60-5e9b8afb610d\",\"related_queries\":[\"Какие новые функции можно добавить для улучшения игрового процесса\",\"Какие игровые механики могут привлечь еще больше игроков\",\"Какие типы контента могут интересовать игроков в будущем\",\"Какие методы анализа поведения игроков помогут улучшить бота\",\"Какие способы взаимодействия с игроками могут быть наиболее эффективными\"],\"s3_social_preview_url\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\",\"search_focus\":\"internet\",\"should_index\":false,\"status\":\"completed\",\"step_type\":\"FINAL\",\"subtext\":\"NONE\",\"text\":\"$29\",\"thread_access\":1,\"thread_title\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"thread_url_slug\":\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"updated_datetime\":\"2024-08-14T15:44:12.557017\",\"uuid\":\"3f40ebda-f231-42de-a8da-a6fdc9e74585\",\"widget_data\":[]},{\"attachments\":[],\"author_image\":null,\"author_username\":null,\"backend_uuid\":\"83e304b2-d72b-4502-b595-b8859c6e654e\",\"context_uuid\":\"fa0ca743-f654-4e3e-a152-72153f84046f\",\"display_model\":\"turbo\",\"expiry_time\":\"2024-08-15T15:41:06.786051\",\"frontend_context_uuid\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\",\"gpt4\":false,\"knowledge_cards\":[],\"media_items\":[],\"mode\":\"concise\",\"personalized\":false,\"plan\":null,\"privacy_state\":\"INCOGNITO\",\"query_str\":\"Напиши пятую часть\",\"read_write_token\":\"5a915726-a00b-468e-bf60-5e9b8afb610d\",\"related_queries\":[\"Какие сюжетные линии могут добавить новизны в игру\",\"Какие внешние источники могут помочь в разработке игры\",\"Какие технологии могут использоваться для улучшения графики\",\"Какие игровые элементы могут изменить динамику игры\",\"Какие изменения могут улучшить баланс игры\"],\"s3_social_preview_url\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\",\"search_focus\":\"internet\",\"should_index\":false,\"status\":\"completed\",\"step_type\":\"FINAL\",\"subtext\":\"NONE\",\"text\":\"$2a\",\"thread_access\":1,\"thread_title\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как играть в Иру. \\n6 название игры \\n7 имена участников игры\\n\\n8 возможность пригласить друга \\n9 два вида. игры с богом и с другом \\nНапиши код дополнительный, чтобым эти  9 пунктов были созданы до подключение игроков к телеграмботу , и немоги быть никак ни удалены, даже иесли удаляют вь переписку всего бота\",\"thread_url_slug\":\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\",\"updated_datetime\":\"2024-08-14T15:44:12.557017\",\"uuid\":\"b96eb046-c143-42f7-affb-75f719486d38\",\"widget_data\":[]}]},\"dataUpdateCount\":1,\"dataUpdatedAt\":1723650347492,\"error\":null,\"errorUpdateCount\":0,\"errorUpdatedAt\":0,\"fetchFailureCount\":0,\"fetchFailureReason\":null,\"fetchMeta\":null,\"isInvalidated\":false,\"status\":\"success\",\"fetchStatus\":\"idle\"},\"queryKey\":[\"results\"],\"queryHash\":\"[\\\"results\\\"]\"},{\"state\":{\"data\":{\"1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\":\"1903cf12-faff-494c-a4c4-32431d22f0eb\"},\"dataUpdateCount\":1,\"dataUpdatedAt\":1723650347492,\"error\":null,\"errorUpdateCount\":0,\"errorUpdatedAt\":0,\"fetchFailureCount\":0,\"fetchFailureReason\":null,\"fetchMeta\":null,\"isInvalidated\":false,\"status\":\"success\",\"fetchStatus\":\"idle\"},\"queryKey\":[\"slug-to-frontendContextUUID\"],\"queryHash\":\"[\\\"slug-to-frontendContextUUID\\\"]\"}]},\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(with-sidebar)\",\"children\",\"(search)\",\"children\",\"search\",\"children\",\"$2b\",\"children\"],\"loading\":\"$L2c\",\"loadingStyles\":[],\"loadingScripts\":[],\"hasLoading\":true,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}]\n"])</script><script>self.__next_f.push([1,"2d:I[59406,[\"5128\",\"static/chunks/5128-1f62c4de3c11599e.js\",\"637\",\"static/chunks/637-626e1bb395a0d3af.js\",\"659\",\"static/chunks/app/(with-sidebar)/(search)/search/%5B%5B...uuid%5D%5D/loading-389ab4b4d909584a.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"2c:[\"$\",\"div\",null,{\"className\":\"shimmer\",\"children\":[[\"$\",\"div\",null,{\"id\":\"$undefined\",\"className\":\"flex h-[48px] w-full items-center border-b px-md md:h-[53px] border-borderMain/50 ring-borderMain/50 divide-borderMain/50 dark:divide-borderMainDark/50  dark:ring-borderMainDark/50 dark:border-borderMainDark/50 bg-background dark:bg-backgroundDark\",\"onClick\":\"$undefined\",\"onMouseOver\":\"$undefined\",\"onMouseLeave\":\"$undefined\",\"style\":\"$undefined\",\"data-testid\":\"$undefined\",\"children\":[[\"$\",\"div\",null,{\"className\":\"hidden items-center gap-sm md:flex\",\"children\":[[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset size-[20px]\"}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-3 w-[100px]\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-sm md:hidden\",\"children\":[[\"$\",\"div\",null,{\"className\":\"\",\"children\":[\"$\",\"div\",null,{\"className\":\"h-auto group  w-6 md:w-8\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 101 116\",\"stroke\":\"none\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"d\":\"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M50.4634 1L50.4634 114.441\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}],[\"$\",\"path\",null,{\"d\":\"M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z\",\"className\":\"stroke-textMain dark:stroke-textMainDark\",\"strokeWidth\":\"5.53371\",\"strokeMiterlimit\":\"10\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"relative\",\"children\":[[\"$\",\"$L2d\",null,{\"extraCSS\":\"bg-offsetPlus dark:bg-offsetPlusDark text-textMain dark:text-textMainDark  md:hover:text-textOff md:dark:hover:text-textOffDark opacity-0\",\"disabled\":\"$undefined\",\"size\":\"small\",\"text\":\"New\",\"icon\":{\"prefix\":\"far\",\"iconName\":\"plus\",\"icon\":[448,512,[10133,61543,\"add\"],\"2b\",\"M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z\"]}}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset absolute inset-0 rounded-md\"}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mx-auto h-full w-full max-w-threadWidth px-md md:px-lg\",\"children\":[\"$\",\"div\",null,{\"className\":\"grid-cols-12 gap-xl md:grid\",\"children\":[\"$\",\"div\",null,{\"className\":\"col-span-8 mt-sm py-lg\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"relative mb-md md:mb-lg default font-display text-2xl md:text-3xl text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark\",\"data-testid\":\"$undefined\",\"htmlFor\":\"$undefined\",\"children\":[\" \",[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset absolute left-0 top-1/2 h-5 w-[200px] -translate-y-1/2\"}]]}],[\"$\",\"div\",null,{\"className\":\"relative default font-display text-lg font-medium text-textMain dark:text-textMainDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark\",\"data-testid\":\"$undefined\",\"htmlFor\":\"$undefined\",\"children\":[\" \",[\"$\",\"div\",null,{\"className\":\"absolute left-0 top-1/2 flex -translate-y-1/2 items-center gap-sm\",\"children\":[[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset size-[24px]\"}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-4 w-[100px]\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mt-sm flex gap-sm md:mt-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-[76px] w-[40vw] shrink-0 !rounded-md md:w-auto md:flex-1\"}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-[76px] w-[40vw] shrink-0 !rounded-md md:w-auto md:flex-1\"}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-[76px] w-[40vw] shrink-0 !rounded-md md:w-auto md:flex-1\"}],[\"$\",\"div\",null,{\"className\":\"rounded-full bg-offset h-[76px] w-[40vw] shrink-0 !rounded-md md:w-auto md:flex-1\"}]]}]]}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как...\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту....\"}],[\"$\",\"meta\",\"4\",{\"name\":\"datePublished\",\"content\":\"2024-08-14\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как...\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту....\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"Perplexity AI\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image\",\"content\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:site\",\"content\":\"@perplexity_ai\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:title\",\"content\":\"1 меню.  \\n2 и объяснение как играть в игру \\n4 и приглашение в игру бота \\n5 как...\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:description\",\"content\":\"Вот пример кода на Python, который создает структуру данных для хранения информации о 9 пунктах, которые вы описали, до подключения игроков к Telegram боту....\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image\",\"content\":\"https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png\"}],[\"$\",\"meta\",\"18\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,""])</script><script defer="" src="./1 меню. 2 и объяснение как играть в игру 4 и приглашение в игру бота 5 как..._files/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;rayId&quot;:&quot;8b3212ed88738e4a&quot;,&quot;serverTiming&quot;:{&quot;name&quot;:{&quot;cfL4&quot;:true}},&quot;version&quot;:&quot;2024.8.0&quot;,&quot;token&quot;:&quot;92730c73a9e747fbb6a25e1d6657122d&quot;}" crossorigin="anonymous"></script>
<div id="subs-dialog" class="subs-dialog" style="width: 100vw; height: 100vh; position: fixed; z-index: 999999999; top: 0px; background: rgba(0, 0, 0, 0.3); display: none; align-items: center; justify-content: center;"><div id="dialog" class="dialog" style="height: 650px;width: 420px;background-color: #faf9f4;box-sizing: border-box;display: flex;flex-direction: column;justify-content: center;align-items: center;border-radius: 10px;padding-top: 24px;padding-bottom: 10px;position: relative;"><div id="d-close" style="width: 95%;line-height: 30px;text-align: right;position: absolute;top:6px;right: 6px;"><svg style="width:20px;height:20px;cursor:pointer;" t="1695196357204" class="icon" version="1.1" p-id="20365" viewBox="0 0 1024 1024"><path d="M566.97558594 521.09667969L856.8828125 231.18945312c14.63378906-14.63378906 14.63378906-38.75976563 0-53.39355468l-1.58203125-1.58203125c-14.63378906-14.63378906-38.75976563-14.63378906-53.39355469 0L512 466.51660156 222.09277344 176.21386719c-14.63378906-14.63378906-38.75976563-14.63378906-53.39355469 0l-1.58203125 1.58203125c-15.02929688 14.63378906-15.02929688 38.75976563 0 53.39355469l289.90722656 289.90722656L167.1171875 811.00390625c-14.63378906 14.63378906-14.63378906 38.75976563 0 53.39355469l1.58203125 1.58203125c14.63378906 14.63378906 38.75976563 14.63378906 53.39355469 0L512 576.07226563 801.90722656 865.97949219c14.63378906 14.63378906 38.75976563 14.63378906 53.39355469 0l1.58203125-1.58203125c14.63378906-14.63378906 14.63378906-38.75976563 0-53.39355469L566.97558594 521.09667969z" p-id="20366" style="fill:#333333"></path></svg></div><div id="d-name" style="width: 100%;height: 30px;line-height: 20px;text-align: center;font-size: 30px;font-weight: 600;color: #ffa83e;">🔥Limited-time Offer🔥</div><div id="d-redLine" style="width: 90%;height:20px;text-align: center;font-size: 15px;color: #de868f;font-weight: bold;margin-top: 10px;margin-bottom: 4px;">Get Unlimited download and 4K/2K/HD Support.</div><div id="d-tips" style="width: 90%;height: 30px;line-height: 15px;text-align: center;font-size: 10px;color: #666;margin-bottom: 10px;">subscription will renew automatically when it expires, and you can cancel the subscription manually.</div><div id="d-subs-btn" class="d-subs-btn" style="height: 30px;display: flex;flex-direction: row;justify-content: center;align-items: center;margin-bottom: 10px;position: relative;border: 1px solid #ff8f1f;user-select: none;"><div id="year-btn" class="btn-sel">Yearly🔥</div><div id="month-btn" class="normal-btn">Monthly</div><div id="lifetime-btn" class="normal-btn">Lifetime</div><div style="width: 25px;height: 14px;line-height: 14px;text-align: center;font-size: 8px;color: rgb(255, 255, 255);position: absolute;right: -13px;top: -6px;background: rgb(255, 143, 31);border-radius: 6px;">NEW</div></div><div id="d-con-box-year" style="width: 340px;height: 420px;border: 2px solid #f1b041;display: flex;flex-direction: column;justify-content: end;align-items: center;border-radius: 4px;position: relative;"><div id="d-con-save" style="width: 72px;height: 26px;line-height: 26px;text-align: center;color: white;font-weight: 600;font-size: 15px;background: #f14d6c;position: absolute;top: 6px;right: -1px;">50% OFF</div><div id="d-con-desc" style="width: 100%;height: 40px;line-height: 40px;text-align: center;color: #de868f;font-weight: bold;font-size: 26px;margin-bottom: 3px;">PRO PLAN YEARLY</div><div id="d-con-line" style="width: 90%;height: 2px;background-color: #de868f;"></div><div id="d-price-line" style="width: 100%;height:96px;line-height:96px;text-align: center;color: #de868f;"><span style="font-size: 40px;font-weight: bold;">$29.99</span><span>/</span><span style="font-size: 13px;">year</span></div><div id="d-dot-line" style="width: 90%;height: 1px;border-bottom: 1px dashed #d8d8d8;color: transparent;"></div><div style="width: 90%;margin-top: 20px;box-sizing: border-box;margin-left: 10px;color:#1a2e3b;"><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Unlimited download</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Batch download support</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">5K+ website support</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">HD Download support</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Dedicated high-speed download channel</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Advanced capability support</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Experience new features first</div></div><div style="height: 20px;margin-bottom: 5px;display: flex;flex-direction: row;align-items: center;"><svg style="width:8px;height:8px" t="1695196357204" class="icon" version="1.1" p-id="2754" viewBox="0 0 1024 1024"><path d="M959.846 509.535c0 247.319-200.527 447.846-447.846 447.846l0 0c-247.378 0-447.846-200.527-447.846-447.846l0 0c0-247.319 200.467-447.846 447.846-447.846l0 0c247.319 0 447.846 200.527 447.846 447.846l0 0z" p-id="20366" style="fill:#DE868F"></path></svg><div style="margin-left: 6px;font-size: 14px;">Customer support</div></div></div><div id="d-btn" style="width: 100px;height: 26px;line-height: 26px;text-align: center;font-size: 12px;font-weight: 500;color: white;background-color: #de868f;border-radius: 4px;margin: 10px;cursor: pointer;display: flex;justify-content: center;align-items: center;">Upgrade Now</div><div id="d-con-counter" style="width: 100px; height: 26px; line-height: 26px; text-align: center; color: rgb(51, 51, 51); font-size: 12px; background: white; border-radius: 13px; box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 10px 0px; position: absolute; bottom: 10px; right: 10px; display: block;">02 : 13 : 18 : 57</div></div><div id="d-terms" class="d-terms"><svg style="width:18px;height:18px" t="1710832169658" class="icon" version="1.1" p-id="25209" viewBox="0 0 1024 1024"><path d="M810.666 128 213.334 128C166.396 128 128 166.396 128 213.334l0 597.332C128 857.604 166.396 896 213.334 896l597.332 0C857.604 896 896 857.604 896 810.666L896 213.334C896 166.396 857.604 128 810.666 128zM426.666 725.334 213.334 512l59.728-59.728 153.604 153.604 324.272-324.272 59.728 59.73L426.666 725.334z" p-id="25210" style="fill:#1296db"></path></svg><span>I have agreed </span><span class="sp">Terms </span><span>and </span><span class="sp">Protocol</span></div><div>
		<div class="play-environment" id="play-environment">
			<div class="environment-loading">
				<p style="color: #1a2e3b;">Checking the payment environment</p>
				<div class="loader"></div>
			</div>
		</div>
	</div></div></div><div id="videoPopupMenu" style="display: none;"></div><div class="addCenterLogo updated" style="transform: translate(0px, -132px);" id="addCenterLogo">
        <img class="addCenterLogoImg" id="addCenterLogoImg" src="chrome-extension://hcmiiaachajoiijecmakkhlcpagafklj/img/ai_assistant.png">
        <span class="aiCloseBtn"><svg width="8" height="10" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg" hanging="8"><path d="M7.83725 1.30615L1.30664 7.83676M1.30664 1.30615L7.83725 7.83676" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>
        </div><next-route-announcer style="position: absolute;"><template shadowrootmode="open"><div aria-live="assertive" id="__next-route-announcer__" role="alert" style="position: absolute; border: 0px; height: 1px; margin: -1px; padding: 0px; width: 1px; clip: rect(0px, 0px, 0px, 0px); overflow: hidden; white-space: nowrap; overflow-wrap: normal;"></div></template></next-route-announcer><textarea tabindex="-1" aria-hidden="true" style="min-height: 0px !important; max-height: none !important; height: 0px !important; visibility: hidden !important; overflow: hidden !important; position: absolute !important; z-index: -1000 !important; top: 0px !important; right: 0px !important; border-width: 0px; box-sizing: border-box; font-family: __fkGroteskNeue_598ab8, __fkGroteskNeue_Fallback_598ab8, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-weight: 400; letter-spacing: normal; line-height: 24px; padding: 0px; tab-size: 4; text-indent: 0px; text-rendering: auto; text-transform: none; width: 466.05px; word-break: normal;"></textarea><div id="tldx-toast-container"></div><style data-styled="active" data-styled-version="5.3.11"></style><div id="tldx-webext-container"></div><div id="zeit-ui-clipboard"></div>
    
    
    
    
    
    
    
    
    </body><tldx-lmi-shadow-root data-wxt-shadow-root=""><template shadowrootmode="open">
<!-- saved from url=(0086)https://www.perplexity.ai/search/1-meniu-2-i-obiasnenie-kak-igr-dJb24BEmQw2eMpgxJ.uyDQ -->
<html><head><style>:host{--color-base-100: var(--color-base-100);--color-base-200: var(--color-base-200);--color-base-250: var(--color-base-250);--color-base-300: var(--color-base-300);--color-base-400: var(--color-base-400);--color-base-500: var(--color-base-500);--color-base-600: var(--color-base-600);--color-base-700: var(--color-base-700)}.light,[data-mode=light]{--color-base-100: 255 255 255;--color-base-150: 250 250 255;--color-base-200: 246 245 250;--color-base-250: 237 236 244;--color-base-300: 227 226 237;--color-base-400: 176 174 208;--color-base-500: 90 93 141;--color-base-600: 0 8 82;--color-base-700: 1 1 50}.dark,[data-mode=dark]{--color-base-100: 18 18 18;--color-base-150: 23 23 18;--color-base-200: 34 34 34;--color-base-250: 43 43 43;--color-base-300: 53 53 53;--color-base-400: 116 114 114;--color-base-500: 209 209 209;--color-base-600: 237 237 237;--color-base-700: 255 255 255}*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}.tiptap>p.is-empty:before{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.tiptap>p.is-empty:before{content:attr(data-placeholder);float:left;height:0;pointer-events:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.bottom-4{bottom:1rem}.left-2{left:.5rem}.left-4{left:1rem}.left-\[50\%\]{left:50%}.right-2{right:.5rem}.top-1\/2{top:50%}.top-2{top:.5rem}.top-4{top:1rem}.top-\[50\%\]{top:50%}.z-10{z-index:10}.z-50{z-index:50}.z-\[1001\]{z-index:1001}.z-\[100\]{z-index:100}.z-\[110\]{z-index:110}.z-\[1\]{z-index:1}.z-\[91\]{z-index:91}.m-0{margin:0}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-1{margin-left:.25rem}.ml-s{margin-left:.5rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-s{margin-top:.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.inline-grid{display:inline-grid}.contents{display:contents}.hidden{display:none}.h-0{height:0px}.h-1{height:.25rem}.h-4{height:1rem}.h-6{height:1.5rem}.h-\[1px\]{height:1px}.h-\[2px\]{height:2px}.h-\[36px\]{height:36px}.h-\[37px\]{height:37px}.h-full{height:100%}.max-h-\[500px\]{max-height:500px}.min-h-\[37px\]{min-height:37px}.min-h-\[40px\]{min-height:40px}.\!w-\[280px\]{width:280px!important}.\!w-\[calc\(100\%-3px\)\]{width:calc(100% - 3px)!important}.w-0{width:0px}.w-3{width:.75rem}.w-4{width:1rem}.w-\[9\.33px\]{width:9.33px}.w-\[calc\(100\%-32px\)\]{width:calc(100% - 32px)}.w-\[var\(--chip-input-value-length\)\]{width:var(--chip-input-value-length)}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[200px\]{min-width:200px}.min-w-\[274px\]{min-width:274px}.min-w-\[280px\]{min-width:280px}.max-w-\[212px\]{max-width:212px}.max-w-\[260px\]{max-width:260px}.max-w-\[340px\]{max-width:340px}.max-w-\[390px\]{max-width:390px}.max-w-\[393px\]{max-width:393px}.max-w-\[600px\]{max-width:600px}.max-w-\[none\]{max-width:none}.flex-1{flex:1 1 0%}.flex-shrink{flex-shrink:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.origin-bottom{transform-origin:bottom}.origin-top{transform-origin:top}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\[-50\%\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\[-50\%\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes growFromBottom{0%{opacity:0;transform:scale(.9) translateY(16px)}to{opacity:1;transform:scale(1) translateY(0)}}.animate-grow-from-bottom{animation:growFromBottom .4s cubic-bezier(.28,.84,.42,1)}@keyframes growFromTop{0%{opacity:0;transform:scale(.9) translate(-50%,-16px)}to{opacity:1;transform:scale(1)translate(-50%)}}.animate-grow-from-top{animation:growFromTop .4s cubic-bezier(.28,.84,.42,1)}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.place-content-center{place-content:center}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.\!gap-s{gap:.5rem!important}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-7{gap:1.75rem}.gap-8{gap:2rem}.gap-\[2px\]{gap:2px}.gap-s{gap:.5rem}.gap-xs{gap:.25rem}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.text-wrap{text-wrap:wrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-\[3px\]{border-radius:3px}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-none{border-radius:0}.border{border-width:1px}.border-0{border-width:0px}.border-\[1px\]{border-width:1px}.border-b-2{border-bottom-width:2px}.border-base-200{--tw-border-opacity: 1;border-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-border-opacity))}.border-base-300{--tw-border-opacity: 1;border-color:rgba(var(--color-base-300, 227 226 237) / var(--tw-border-opacity))}.border-base-400{--tw-border-opacity: 1;border-color:rgba(var(--color-base-400, 176 174 208) / var(--tw-border-opacity))}.border-base-600{--tw-border-opacity: 1;border-color:rgba(var(--color-base-600, 0 8 82) / var(--tw-border-opacity))}.border-primary-400{--tw-border-opacity: 1;border-color:rgb(29 29 255 / var(--tw-border-opacity))}.border-red-300{--tw-border-opacity: 1;border-color:rgb(237 49 93 / var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-base-100{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-100, 255 255 255) / var(--tw-bg-opacity))}.bg-base-200{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.bg-base-250{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-250, 237 236 244) / var(--tw-bg-opacity))}.bg-base-300{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-300, 227 226 237) / var(--tw-bg-opacity))}.bg-base-600{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-600, 0 8 82) / var(--tw-bg-opacity))}.bg-green-400{--tw-bg-opacity: 1;background-color:rgb(15 163 136 / var(--tw-bg-opacity))}.bg-light-blue-100{--tw-bg-opacity: 1;background-color:rgb(244 250 255 / var(--tw-bg-opacity))}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 244 240 / var(--tw-bg-opacity))}.bg-primary-100{--tw-bg-opacity: 1;background-color:rgb(242 242 255 / var(--tw-bg-opacity))}.bg-primary-200{--tw-bg-opacity: 1;background-color:rgb(193 193 255 / var(--tw-bg-opacity))}.bg-primary-500{--tw-bg-opacity: 1;background-color:rgb(0 0 130 / var(--tw-bg-opacity))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(249 241 255 / var(--tw-bg-opacity))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(255 245 247 / var(--tw-bg-opacity))}.bg-red-300{--tw-bg-opacity: 1;background-color:rgb(237 49 93 / var(--tw-bg-opacity))}.bg-slate-500{--tw-bg-opacity: 1;background-color:rgb(100 116 139 / var(--tw-bg-opacity))}.bg-tertiary-100{--tw-bg-opacity: 1;background-color:rgb(249 241 255 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.fill-base-100{fill:rgba(var(--color-base-100, 255 255 255) / 1)}.fill-current{fill:currentColor}.stroke-current{stroke:currentColor}.\!p-0{padding:0!important}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.p-\[2px\]{padding:2px}.p-m{padding:1rem}.p-s{padding:.5rem}.p-xs{padding:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-m{padding-left:1rem;padding-right:1rem}.py-0{padding-top:0;padding-bottom:0}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-\[6px\]{padding-top:6px;padding-bottom:6px}.py-xs{padding-top:.25rem;padding-bottom:.25rem}.pl-10{padding-left:2.5rem}.pl-2{padding-left:.5rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-10{padding-right:2.5rem}.pr-8{padding-right:2rem}.pt-2{padding-top:.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xs{font-size:.625rem}.text-\[10px\]{font-size:10px}.text-\[12px\]{font-size:12px}.text-\[13px\]{font-size:13px}.text-\[15px\]{font-size:15px}.text-\[18px\]{font-size:18px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-\[400\]{font-weight:400}.font-\[500\]{font-weight:500}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.\!leading-4{line-height:1rem!important}.leading-none{line-height:1}.\!text-base-400{--tw-text-opacity: 1 !important;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))!important}.\!text-base-600{--tw-text-opacity: 1 !important;color:rgba(var(--color-base-600, 0 8 82) / var(--tw-text-opacity))!important}.text-base-100{--tw-text-opacity: 1;color:rgba(var(--color-base-100, 255 255 255) / var(--tw-text-opacity))}.text-base-500{--tw-text-opacity: 1;color:rgba(var(--color-base-500, 90 93 141) / var(--tw-text-opacity))}.text-base-600{--tw-text-opacity: 1;color:rgba(var(--color-base-600, 0 8 82) / var(--tw-text-opacity))}.text-base-700{--tw-text-opacity: 1;color:rgba(var(--color-base-700, 1 1 50) / var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity))}.text-light-blue-400{--tw-text-opacity: 1;color:rgb(0 141 255 / var(--tw-text-opacity))}.text-orange-400{--tw-text-opacity: 1;color:rgb(255 107 70 / var(--tw-text-opacity))}.text-primary-400{--tw-text-opacity: 1;color:rgb(29 29 255 / var(--tw-text-opacity))}.text-purple-300{--tw-text-opacity: 1;color:rgb(178 94 244 / var(--tw-text-opacity))}.text-red-300{--tw-text-opacity: 1;color:rgb(237 49 93 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.opacity-0{opacity:0}.opacity-30{opacity:.3}.opacity-40{opacity:.4}.opacity-65{opacity:.65}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0px 5px 30px 0px rgba(0, 8, 82, .1);--tw-shadow-colored: 0px 5px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0px 5px 20px 0px rgba(0, 8, 82, .05);--tw-shadow-colored: 0px 5px 20px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.outline-\[4\.5px\]{outline-width:4.5px}.outline-tertiary-400{outline-color:#953bab}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[background-color\]{transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.duration-200{animation-duration:.2s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}.running{animation-play-state:running}.paused{animation-play-state:paused}.placeholder\:text-sm::-moz-placeholder{font-size:.875rem;line-height:1.25rem}.placeholder\:text-sm::placeholder{font-size:.875rem;line-height:1.25rem}.placeholder\:font-normal::-moz-placeholder{font-weight:400}.placeholder\:font-normal::placeholder{font-weight:400}.placeholder\:text-base-400::-moz-placeholder{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.placeholder\:text-base-400::placeholder{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.before\:absolute:before{content:var(--tw-content);position:absolute}.before\:bottom-0:before{content:var(--tw-content);bottom:0}.before\:left-0:before{content:var(--tw-content);left:0}.before\:top-0:before{content:var(--tw-content);top:0}.before\:flex:before{content:var(--tw-content);display:flex}.before\:h-4:before{content:var(--tw-content);height:1rem}.before\:w-4:before{content:var(--tw-content);width:1rem}.before\:w-\[var\(--player-buffer-progress\)\]:before{content:var(--tw-content);width:var(--player-buffer-progress)}.before\:content-normal:before{content:var(--tw-content);align-content:normal}.before\:rounded-full:before{content:var(--tw-content);border-radius:9999px}.before\:bg-base-400:before{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgba(var(--color-base-400, 176 174 208) / var(--tw-bg-opacity))}.before\:bg-primary-300:before{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(133 133 255 / var(--tw-bg-opacity))}.before\:transition-\[border\]:before{content:var(--tw-content);transition-property:border;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.before\:transition-\[width\]:before{content:var(--tw-content);transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.before\:content-\[\'\'\]:before{--tw-content: "";content:var(--tw-content)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:bottom-0:after{content:var(--tw-content);bottom:0}.after\:left-0:after{content:var(--tw-content);left:0}.after\:top-0:after{content:var(--tw-content);top:0}.after\:flex:after{content:var(--tw-content);display:flex}.after\:w-\[var\(--player-timeline-progress\)\]:after{content:var(--tw-content);width:var(--player-timeline-progress)}.after\:content-normal:after{content:var(--tw-content);align-content:normal}.after\:bg-primary-400:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(29 29 255 / var(--tw-bg-opacity))}.after\:transition-\[width\]:after{content:var(--tw-content);transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.checked\:border-none:checked{border-style:none}.checked\:border-primary-400:checked{--tw-border-opacity: 1;border-color:rgb(29 29 255 / var(--tw-border-opacity))}.checked\:bg-primary-400:checked{--tw-bg-opacity: 1;background-color:rgb(29 29 255 / var(--tw-bg-opacity))}.before\:checked\:border-\[5px\]:checked:before{content:var(--tw-content);border-width:5px}.before\:checked\:border-primary-400:checked:before{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(29 29 255 / var(--tw-border-opacity))}.hover\:bg-base-200:hover{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.hover\:bg-base-250:hover{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-250, 237 236 244) / var(--tw-bg-opacity))}.hover\:bg-transparent:hover{background-color:transparent}.hover\:bg-none:hover{background-image:none}.hover\:text-primary-500:hover{--tw-text-opacity: 1;color:rgb(0 0 130 / var(--tw-text-opacity))}.focus\:border-primary-300:focus{--tw-border-opacity: 1;border-color:rgb(133 133 255 / var(--tw-border-opacity))}.focus\:border-red-300:focus{--tw-border-opacity: 1;border-color:rgb(237 49 93 / var(--tw-border-opacity))}.focus\:bg-base-100:focus{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-100, 255 255 255) / var(--tw-bg-opacity))}.focus\:bg-base-200:focus{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.focus\:bg-transparent:focus{background-color:transparent}.focus\:bg-none:focus{background-image:none}.focus\:text-base-600:focus{--tw-text-opacity: 1;color:rgba(var(--color-base-600, 0 8 82) / var(--tw-text-opacity))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:placeholder\:text-base-400:focus::-moz-placeholder{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.focus\:placeholder\:text-base-400:focus::placeholder{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.disabled\:\!cursor-not-allowed:disabled{cursor:not-allowed!important}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:border-base-300:disabled{--tw-border-opacity: 1;border-color:rgba(var(--color-base-300, 227 226 237) / var(--tw-border-opacity))}.disabled\:bg-base-300:disabled{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-300, 227 226 237) / var(--tw-bg-opacity))}.disabled\:\!opacity-50:disabled{opacity:.5!important}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:before\:checked\:border-base-300:checked:disabled:before{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgba(var(--color-base-300, 227 226 237) / var(--tw-border-opacity))}.disabled\:hover\:\!bg-transparent:hover:disabled{background-color:transparent!important}.disabled\:hover\:bg-transparent:hover:disabled{background-color:transparent}.group\/trigger:hover .group-hover\/trigger\:flex{display:flex}.has-\[\:focus\]\:border-primary-300:has(:focus){--tw-border-opacity: 1;border-color:rgb(133 133 255 / var(--tw-border-opacity))}.aria-\[current\=page\]\:border-b-primary-400[aria-current=page]{--tw-border-opacity: 1;border-bottom-color:rgb(29 29 255 / var(--tw-border-opacity))}.aria-\[current\=page\]\:bg-primary-400\/10[aria-current=page]{background-color:#1d1dff1a}.aria-\[current\=page\]\:text-primary-400[aria-current=page]{--tw-text-opacity: 1;color:rgb(29 29 255 / var(--tw-text-opacity))}.aria-\[current\=page\]\:hover\:border-b-primary-500:hover[aria-current=page]{--tw-border-opacity: 1;border-bottom-color:rgb(0 0 130 / var(--tw-border-opacity))}.aria-\[current\=page\]\:hover\:bg-primary-400\/20:hover[aria-current=page]{background-color:#1d1dff33}.aria-\[current\=page\]\:hover\:text-primary-500:hover[aria-current=page]{--tw-text-opacity: 1;color:rgb(0 0 130 / var(--tw-text-opacity))}.group\/dropdown-subtrigger[aria-expanded=true] .group-aria-\[expanded\=true\]\/dropdown-subtrigger\:bg-base-200{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.data-\[clickable\=false\]\:pointer-events-none[data-clickable=false],.data-\[disabled\]\:pointer-events-none[data-disabled]{pointer-events:none}.data-\[disabled\=false\]\:pointer-events-auto[data-disabled=false]{pointer-events:auto}.data-\[size\=l\]\:left-\[17px\][data-size=l]{left:17px}.data-\[size\=l\]\:top-\[14px\][data-size=l]{top:14px}.data-\[size\=m\]\:left-\[12px\][data-size=m]{left:12px}.data-\[size\=m\]\:top-\[9px\][data-size=m]{top:9px}.data-\[size\=s\]\:left-\[8px\][data-size=s]{left:8px}.data-\[size\=s\]\:top-\[6px\][data-size=s]{top:6px}.data-\[size\=xl\]\:left-\[23px\][data-size=xl]{left:23px}.data-\[size\=xl\]\:top-\[18px\][data-size=xl]{top:18px}.data-\[size\=xs\]\:left-\[7px\][data-size=xs]{left:7px}.data-\[size\=xs\]\:top-\[10px\][data-size=xs]{top:10px}.data-\[size\=\"big\"\]\:h-\[37px\][data-size=big]{height:37px}.data-\[size\=\"small\"\]\:h-6[data-size=small]{height:1.5rem}.data-\[size\=l\]\:h-8[data-size=l]{height:2rem}.data-\[size\=m\]\:h-6[data-size=m]{height:1.5rem}.data-\[size\=s\]\:h-4[data-size=s]{height:1rem}.data-\[size\=xl\]\:h-10[data-size=xl]{height:2.5rem}.data-\[size\=xs\]\:h-3[data-size=xs]{height:.75rem}.data-\[size\=l\]\:w-8[data-size=l]{width:2rem}.data-\[size\=m\]\:w-6[data-size=m]{width:1.5rem}.data-\[size\=s\]\:w-4[data-size=s]{width:1rem}.data-\[size\=xl\]\:w-10[data-size=xl]{width:2.5rem}.data-\[size\=xs\]\:w-3[data-size=xs]{width:.75rem}.data-\[clickable\=true\]\:cursor-pointer[data-clickable=true]{cursor:pointer}.data-\[disabled\=\"true\"\]\:cursor-not-allowed[data-disabled=true]{cursor:not-allowed}.data-\[disabled\=true\]\:\!cursor-not-allowed[data-disabled=true]{cursor:not-allowed!important}.data-\[outline\=\"true\"\]\:border-\[1px\][data-outline=true]{border-width:1px}.data-\[focus\=true\]\:border-primary-300[data-focus=true]{--tw-border-opacity: 1;border-color:rgb(133 133 255 / var(--tw-border-opacity))}.data-\[variant\=\"primary\"\]\:border-primary-400[data-variant=primary]{--tw-border-opacity: 1;border-color:rgb(29 29 255 / var(--tw-border-opacity))}.data-\[variant\=\"secondary\"\]\:border-base-400[data-variant=secondary]{--tw-border-opacity: 1;border-color:rgba(var(--color-base-400, 176 174 208) / var(--tw-border-opacity))}.data-\[checked\=false\]\:bg-base-200[data-checked=false]{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.data-\[checked\=true\]\:bg-green-100[data-checked=true]{--tw-bg-opacity: 1;background-color:rgb(235 255 251 / var(--tw-bg-opacity))}.data-\[selected\=true\]\:bg-base-200[data-selected=true]{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.data-\[variant\=\"primary\"\]\:bg-primary-100[data-variant=primary]{--tw-bg-opacity: 1;background-color:rgb(242 242 255 / var(--tw-bg-opacity))}.data-\[variant\=\"secondary\"\]\:bg-base-200[data-variant=secondary]{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-200, 246 245 250) / var(--tw-bg-opacity))}.data-\[variant\=\"tertiary\"\]\:bg-tertiary-100[data-variant=tertiary]{--tw-bg-opacity: 1;background-color:rgb(249 241 255 / var(--tw-bg-opacity))}.data-\[size\=m\]\:p-4[data-size=m]{padding:1rem}.data-\[size\=s\]\:p-2[data-size=s]{padding:.5rem}.data-\[size\=\"big\"\]\:py-2[data-size=big]{padding-top:.5rem;padding-bottom:.5rem}.data-\[size\=\"small\"\]\:py-\[6px\][data-size=small]{padding-top:6px;padding-bottom:6px}.data-\[size\=m\]\:text-\[15px\][data-size=m]{font-size:15px}.data-\[size\=s\]\:text-xs[data-size=s]{font-size:.75rem;line-height:1rem}.data-\[disabled\=false\]\:\!opacity-100[data-disabled=false]{opacity:1!important}.data-\[disabled\=true\]\:\!opacity-50[data-disabled=true]{opacity:.5!important}.data-\[disabled\]\:opacity-30[data-disabled]{opacity:.3}.data-\[outline\=true\]\:outline[data-outline=true]{outline-style:solid}.data-\[outline\=true\]\:outline-\[1\.5px\][data-outline=true]{outline-width:1.5px}.data-\[outline\=true\]\:outline-primary-400[data-outline=true]{outline-color:#1d1dff}.data-\[disabled\=true\]\:hover\:\!bg-transparent:hover[data-disabled=true]{background-color:transparent!important}.data-\[variant\=\"secondary\"\]\:hover\:bg-base-250:hover[data-variant=secondary]{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-250, 237 236 244) / var(--tw-bg-opacity))}.group\/dropdown-wordtrigger[data-state=closed] .group-data-\[state\=closed\]\/dropdown-wordtrigger\:block,.group\/dropdown-wordtrigger[data-state=open] .group-data-\[state\=open\]\/dropdown-wordtrigger\:block{display:block}.group\/trigger[data-state=paused] .group-data-\[state\=paused\]\/trigger\:flex,.group\/trigger[data-state=playing] .group-data-\[state\=playing\]\/trigger\:flex{display:flex}.group\/checkbox[data-checked=false] .group-data-\[checked\=false\]\/checkbox\:hidden,.group\/sidebar[data-state=collapsed] .group-data-\[state\=\"collapsed\"\]\/sidebar\:hidden,.group\/sidebar[data-state=expanded] .group-data-\[state\=\"expanded\"\]\/sidebar\:hidden,.group\/dropdown-wordtrigger[data-state=closed] .group-data-\[state\=closed\]\/dropdown-wordtrigger\:hidden,.group\/dropdown-wordtrigger[data-state=open] .group-data-\[state\=open\]\/dropdown-wordtrigger\:hidden{display:none}.group\/dropdown-item[data-size=m] .group-data-\[size\=m\]\/dropdown-item\:\!w-5{width:1.25rem!important}.group\/dropdown-item[data-size=s] .group-data-\[size\=s\]\/dropdown-item\:w-m{width:1rem}.group\/sidebar[data-state=collapsed] .group-data-\[state\=\"collapsed\"\]\/sidebar\:justify-center{justify-content:center}.group\/input-root[data-invalid=true] .group-data-\[invalid\=true\]\/input-root\:border-red-300{--tw-border-opacity: 1;border-color:rgb(237 49 93 / var(--tw-border-opacity))}.group\/sidebar[data-type=meeting] .group-data-\[type\=\"meeting\"\]\/sidebar\:bg-base-100{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-100, 255 255 255) / var(--tw-bg-opacity))}.group\/tooltip[data-type=default] .group-data-\[type\=\"default\"\]\/tooltip\:fill-base-600{fill:rgba(var(--color-base-600, 0 8 82) / 1)}.group\/tooltip[data-type=error] .group-data-\[type\=\"error\"\]\/tooltip\:fill-red-300{fill:#ed315d}.group\/tooltip[data-type=success] .group-data-\[type\=\"success\"\]\/tooltip\:fill-green-400{fill:#0fa388}.group\/sidebar[data-state=collapsed] .group-data-\[state\=\"collapsed\"\]\/sidebar\:px-1{padding-left:.25rem;padding-right:.25rem}.group\/chip[data-size=big] .group-data-\[size\=\"big\"\]\/chip\:text-s{font-size:.938rem}.group\/chip[data-size=small] .group-data-\[size\=\"small\"\]\/chip\:text-2xs{font-size:.625rem}.group\/dropdown-item[data-size=m] .group-data-\[size\=m\]\/dropdown-item\:\!text-\[15px\]{font-size:15px!important}.group\/dropdown-item[data-size=s] .group-data-\[size\=s\]\/dropdown-item\:text-xs{font-size:.75rem;line-height:1rem}.group\/input-root[data-invalid=true] .group-data-\[invalid\=true\]\/input-root\:text-red-300{--tw-text-opacity: 1;color:rgb(237 49 93 / var(--tw-text-opacity))}.group\/banner[data-type=secondary] .group-data-\[type\=\"secondary\"\]\/banner\:text-base-100{--tw-text-opacity: 1;color:rgba(var(--color-base-100, 255 255 255) / var(--tw-text-opacity))}.group\/chip[data-variant=primary] .group-data-\[variant\=\"primary\"\]\/chip\:text-primary-400{--tw-text-opacity: 1;color:rgb(29 29 255 / var(--tw-text-opacity))}.group\/chip[data-variant=secondary] .group-data-\[variant\=\"secondary\"\]\/chip\:text-base-400{--tw-text-opacity: 1;color:rgba(var(--color-base-400, 176 174 208) / var(--tw-text-opacity))}.group\/chip[data-variant=tertiary] .group-data-\[variant\=\"tertiary\"\]\/chip\:text-base-300{--tw-text-opacity: 1;color:rgba(var(--color-base-300, 227 226 237) / var(--tw-text-opacity))}.group\/chip[data-variant=tertiary] .group-data-\[variant\=\"tertiary\"\]\/chip\:text-tertiary-300{--tw-text-opacity: 1;color:rgb(178 94 244 / var(--tw-text-opacity))}.group\/sidebar[data-type=meeting] .group-data-\[type\=\"meeting\"\]\/sidebar\:hover\:bg-base-150:hover{--tw-bg-opacity: 1;background-color:rgba(var(--color-base-150, 250 250 255) / var(--tw-bg-opacity))}.group\/input-root[data-invalid=true] .group-data-\[invalid\=true\]\/input-root\:focus\:border-red-300:focus{--tw-border-opacity: 1;border-color:rgb(237 49 93 / var(--tw-border-opacity))}.group\/chip:hover[data-variant=primary] .group-hover\/chip\:group-data-\[variant\=\"primary\"\]\/chip\:text-primary-500{--tw-text-opacity: 1;color:rgb(0 0 130 / var(--tw-text-opacity))}.group\/chip:hover[data-variant=secondary] .group-hover\/chip\:group-data-\[variant\=\"secondary\"\]\/chip\:text-base-500{--tw-text-opacity: 1;color:rgba(var(--color-base-500, 90 93 141) / var(--tw-text-opacity))}.group\/chip:hover[data-variant=tertiary] .group-hover\/chip\:group-data-\[variant\=\"tertiary\"\]\/chip\:text-tertiary-400{--tw-text-opacity: 1;color:rgb(149 59 171 / var(--tw-text-opacity))}.group\/sidebar[data-type=meeting] .group-data-\[type\=\"meeting\"\]\/sidebar\:aria-\[current\=page\]\:bg-primary-400\/10[aria-current=page]{background-color:#1d1dff1a}.group\/sidebar[data-type=meeting] .group-data-\[type\=\"meeting\"\]\/sidebar\:aria-\[current\=page\]\:hover\:bg-primary-400\/20:hover[aria-current=page]{background-color:#1d1dff33}@media not all and (min-width: 1024px){.group\/sidebar:hover .max-lg\:group-hover\/sidebar\:\!px-4{padding-left:1rem!important;padding-right:1rem!important}.group\/sidebar[data-state=default] .max-lg\:group-data-\[state\=\"default\"\]\/sidebar\:hidden{display:none}}@media not all and (min-width: 768px){.group\/sidebar:hover .group-hover\/sidebar\:max-md\:\!px-4{padding-left:1rem!important;padding-right:1rem!important}.group\/sidebar[data-state=default] .max-md\:group-data-\[state\=\"default\"\]\/sidebar\:justify-center{justify-content:center}.group\/sidebar[data-state=default] .max-md\:group-data-\[state\=\"default\"\]\/sidebar\:px-1{padding-left:.25rem;padding-right:.25rem}}@media (min-width: 768px){.md\:text-\[24px\]{font-size:24px}.group\/sidebar[data-state=default] .md\:group-data-\[state\=\"default\"\]\/sidebar\:hidden{display:none}}.\[\&\>\*\]\:outline-none>*{outline:2px solid transparent;outline-offset:2px}.group\/banner[data-type=secondary] .group-data-\[type\=\"secondary\"\]\/banner\:\[\&\>\*\]\:\!text-base-100>*{--tw-text-opacity: 1 !important;color:rgba(var(--color-base-100, 255 255 255) / var(--tw-text-opacity))!important}.\[\&\>span\]\:\!no-underline>span{text-decoration-line:none!important}.\[\&\>svg\]\:gap-xs>svg{gap:.25rem}.\[\&_button\>span\]\:text-base-500 button>span{--tw-text-opacity: 1;color:rgba(var(--color-base-500, 90 93 141) / var(--tw-text-opacity))}.\[\&_button\>span\]\:text-orange-400 button>span{--tw-text-opacity: 1;color:rgb(255 107 70 / var(--tw-text-opacity))}.\[\&_button\>span\]\:text-white button>span{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.\[\&_button\>svg\]\:fill-light-blue-400 button>svg{fill:#008dff}.\[\&_button\>svg\]\:fill-orange-400 button>svg{fill:#ff6b46}.\[\&_button\>svg\]\:fill-primary-400 button>svg{fill:#1d1dff}.\[\&_button\>svg\]\:fill-purple-300 button>svg{fill:#b25ef4}.\[\&_button\>svg\]\:fill-white button>svg{fill:#fff}</style></head><body></body></html></template></tldx-lmi-shadow-root></html>